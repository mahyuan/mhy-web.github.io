---
title: linux学习笔记(3)
category: javascript
tags:
  - javascript
date: 2018-09-11 18:12:07
---
# shell基础

运行shell脚本

## echo 命令
> echo [选项] [输出内容]

选项：
- -e 支持反斜杠控制的字符转换

|控制字符| 作用  |
|-----|------|
| \a  | 输出警告音 |
| \b  | 退格键，即左删除键 |
| \n  | 换行符 |
| \r  | 回车键 |
| \t  | 制表符 |
| \v  | 垂直制表符 |
| \0n | nn 按八进制ASCII码表输出字符，其中0是数字零，nnn是三位八进制数 |
| \xh | h 按照十六进制ASCII码表输出z福。其中hh是两位十六进制数 |

<!-- more --> 

## alias

eg:
`alias la="ls -la"`
查看系统中的别名：
`alias`
1.临时设置别名：

命令行输入 `alias la="ls -al --color=auto"`

2.永久设置：

写入环境变量配置文件:
`~/.bashrc`

3.删除别名：
临时删除可以直接输入: `unalias la`,
永久删除需要修改配置文件

- 命令生效顺序

	1. 第一顺位执行用绝对路径活泼相对路径执行的命令
	2. 第二顺位执行别名
	3. 第三执行bash的内部命令
	4. 第四顺位执行按照$PATH环境变量定义的目录查找顺序找到的第一个命令

- 命令快捷键

|快捷键  | 功能 |
|-------|-------|
|ctrl + c| 强行终止 |
|cmd  + l| 清屏(清除一行) |
|ctrl + l| 清屏(屏幕中所有行), 效果同clear |
|ctrl + a| 光标移动到命令行行首 |
|ctrl + e| 光标移动到命令行行尾 |
|ctrl + u| 从光标位置删除到行首 |
|ctrl + z| 把命令放入后台(命令无法使用ctrl + c z终止的时候使用，不建议 ) |
|ctrl + r| 在历史命令中搜索 |
|ctrl + 左右方向键 | 按单词左右移动光标|

## 历史命令

上下箭头读取历史命令

- 读取所有历史命令

`history [选项] [历史命令保存文件]`

选项：
 - -c 清空历史命令
 - -w 把缓存中的历史命令写入历史命令保存文件 `~/.bash_history`

注意: history命令中的命令包括文件保存的和当前登录输入的所有命令， 文件只会在登出的时候才会主动保存到文件，但是可以通过`-w`选项把当前登录后的历史命令手动保存在文件中

历史命令默认保存1000条，可以在`/etc/profile`中的`HISTSIZE=1000`字段中设置

1. *使用`!n`重复执行第n条历史命令*
2. *使用`!字串`重复执行最后一条以该字串开头的命令*
3. 使用`!!`重复执行上一条命令

- 命令和文件补全

在bash中，按tab键自动补全命令、文件路径， 对提高输入速度和排错非常有用

## 输出重定向
```
标准的输入输出设备:
键盘    /dev.stdin  0 标准输入
显示器  /dev/sdtout 1 标准输出
显示器  /dev/sdterr 2 标准错误输出
```
### 标准输出重定向：
```
命令 > 文件 ： 以覆盖方式，把命令的正确输出输出到指定文件或设备中
命令 >> 文件 ： 以追加的方式，把命令的正确输出输出到指定文件或设备中
```
**文件不存在， 先创建后写入， `>`覆盖 `>>`追加**

### 命令的错误输出：
```
错误命令 2> 文件 ： 以覆盖方式，把命令的错误输出输出到指定文件或设备中
错误命令 2>> 文件 ： 以追加的方式，把命令的错误输出输出到指定文件或设备中
```
*注意：正确输出大于号左右有空格，错误输出左右没有空格*

### 正确和错误输出同时保存：

- 以*覆盖*方式，把正确输出和错误输出都保存到同一个文件中：
1. 命令 &>文件
2. 命令 > 文件 2>&1

eg: `./test.sh >> common.log 2>&1`

- 以*追加*方式，把正确输出和错误输出都保存到同一个文件中：
1. 命令 &>>文件
2. 命令 >> 文件 2>&1

eg: `./test.sh >> common.log 2>&1`

- *把正确输出追加到文件1， 把错误输出追加到文件2*：
1. 命令 >> 文件一 2>> 文件二

eg: `./test.sh >> success.log 2>> error.log`

**注意上面命令中的空格，在错误输出中`2>`或者`2>>`之间没有空格， `1>` 等同于 `>`，`1`省略不写**
一般都是以追加的方式写入日志文件
最常用的命令：
```
 `命令>>文件一 2>>文件二`
 `命令 &>> 文件`
```

`/dev/null`目录文件写入后丢弃，用于一些不需要过程只需要结果的命令

```
> 和 1> 相同, 标准输出重定向
2>&1 标标准错误输出 重定向到 标准输出
&> file 把标准输出和错误输出都重定向到文件file中
```

### 输入重定向

`wc [选项] [文件名]`

选项：
 - -c 统计字节数
 - -w 统计单词数
 - -l 统计行数
```
命令 < 把文件作为命令的输入
命令 << 标识符
```
标识符把标识符之间的内容作为命令的输入
eg:
```
wc < acc.log  # 统计文件的输入
<<很少用
```

## 管道符

### 多命令顺序执行：

| 多命令执行符 | 格式    |  作用         |
|------------|--------|--------------------|
| ;  |  命令1; 命令2   |  多个命令顺序执行，之间没有任何逻辑关系   |
| && |  命令1 && 命令2 |  逻辑与， 当命令1正确执行，则命令2才会执行，否则命令2不执行   |
| || |  命令1 || 命令2 |  逻辑或， 当命令1执行不正确，才会执行命令2，否则命令2不会执行   |

判断命令是否正确执行:

`./test.sh && echo "yes" || echo "no"`

### 管道符
格式：

`命令1 | 命令2`

命令1的正确输出作为命令2的操作对象
```
netstat -an | grep ESTABLISHED
```

### 通配符

|通配符| 作用|
|----|----|
|？   |匹配一个任意字符  |
|*   |匹配0个或任意多个字符  |
|[]  |匹配中括号中任意一个字符  |
|[-] |匹配中括号中任意一个字符， - 代表范围  |
|[^] |逻辑非， 匹配不上中括号内的一个字符  |

*通配符用于匹配文件名或目录名*

### bash中其他特殊符号
```
''
""
`` : 反引号，反引号括起来的是系统命令，在bash中会先执行它，和$()作用一样
$() : 作用同反引号, 执行系统命令，然后获取到执行结果
$ : 调用变量的值
\ : 转义符
#  :注释
```
