<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><!--[if lt IE 9]><style>body {display: none; background: none !important} </style><meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/"/><![endif]--><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="author" content="shanks"><meta name="baidu-site-verification" content="VJKBSS2rgO"><meta name="google-site-verification" content="OsZIswr6btG3y1q87keqlXy3VucMbYU6pBbnDVtNOB8"><meta name="description" content="JavaScript和HTML的交互是通过事件实现的。JavaScript采用异步事件驱动编程模型，当文档、浏览器、元素或与之相关对象发生特定事情时，浏览器会产生事件。如果JavaScript关注特定类型事件，那么它可以注册当这类事件发生时要调用的句柄"><meta name="keywords" content="javascript,DOM,事件"><meta property="og:type" content="article"><meta property="og:title" content="事件处理程序"><meta property="og:url" content="https://mhynet.cn/event-of-javascript.html"><meta property="og:site_name" content="shanks的学习日志"><meta property="og:description" content="JavaScript和HTML的交互是通过事件实现的。JavaScript采用异步事件驱动编程模型，当文档、浏览器、元素或与之相关对象发生特定事情时，浏览器会产生事件。如果JavaScript关注特定类型事件，那么它可以注册当这类事件发生时要调用的句柄"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="http://7xpvnv.com2.z0.glb.qiniucdn.com/4bc08396-78b0-48e3-a8bb-f846e86e9d73"><meta property="og:image" content="http://7xpvnv.com2.z0.glb.qiniucdn.com/0faaa7bb-5dcf-4f3c-93ff-62b134d987dd"><meta property="og:image" content="http://7xpvnv.com2.z0.glb.qiniucdn.com/8ddedb2e-f55e-4872-bd36-79c44b71d3f1"><meta property="og:updated_time" content="2020-01-13T04:05:08.195Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="事件处理程序"><meta name="twitter:description" content="JavaScript和HTML的交互是通过事件实现的。JavaScript采用异步事件驱动编程模型，当文档、浏览器、元素或与之相关对象发生特定事情时，浏览器会产生事件。如果JavaScript关注特定类型事件，那么它可以注册当这类事件发生时要调用的句柄"><meta name="twitter:image" content="http://7xpvnv.com2.z0.glb.qiniucdn.com/4bc08396-78b0-48e3-a8bb-f846e86e9d73"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="alternate" href="/atom.xml" title="shanks的学习日志" type="application/atom+xml"><link rel="shortcut icon" href="/img/favicon.png"><link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet"><link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet"><script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script><link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet"><link rel="stylesheet" href="/css/style.css"><link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"><title>事件处理程序 | shanks的学习日志</title><script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script><script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script><script>var yiliaConfig={fancybox:!0,animate:!0,isHome:!1,isPost:!0,isArchive:!1,isTag:!1,isCategory:!1,fancybox_js:"//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",scrollreveal:"//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",search:!0}</script><script>yiliaConfig.jquery_ui=[!1]</script><script>yiliaConfig.rootUrl="/"</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="//hm.baidu.com/hm.js?b641a697cd393c453dcbbdfe0fefc625";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></head></html><body><div id="container"><div class="left-col"><div class="overlay"></div><div class="intrude-less"><header id="header" class="inner"> <a href="/" class="profilepic"><img src="/img/avatar.png" class="animated zoomIn"></a><hgroup><h1 class="header-author"><a href="/">shanks</a></h1></hgroup><p class="header-subtitle">shanks的学习日志</p><form id="search-form"> <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="fale"><i class="fa fa-times" onclick="resetSearch()"></i></form><div id="local-search-result"></div><p class="no-result">No results found<i class="fa fa-spinner fa-pulse"></i></p><div id="switch-area" class="switch-area"><div class="switch-wrap"><section class="switch-part switch-part1"><nav class="header-menu"><ul><li><a href="/">主页</a></li><li><a href="/archives/">所有文章</a></li><li><a href="/tags/">标签云</a></li><li><a href="/about/">关于我</a></li></ul></nav><nav class="header-nav"><ul class="social"><a class="fa Email" href="mailto:dsz9258@163.com" title="Email"></a><a class="fa GitHub" href="https://github.com/mhy-web/" title="GitHub"></a><a class="fa RSS" href="/atom.xml" title="RSS"></a></ul></nav></section><section class="switch-part switch-part3"><div id="js-friends"> <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a> <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a> <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a></div></section><section class="switch-part switch-part4"><div id="js-aboutme">专注于前端</div></section></div></div></header></div></div><div class="mid-col"><nav id="mobile-nav"><div class="overlay"><div class="slider-trigger"></div><h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">shanks</a></h1></div><div class="intrude-less"><header id="header-mobile" class="inner"> <a href="/" class="profilepic"><img src="/img/avatar.png" class="animated zoomIn"></a><hgroup><h1 class="header-author"><a href="/" title="回到主页">shanks</a></h1></hgroup><p class="header-subtitle">shanks的学习日志</p><nav class="header-menu"><ul><li><a href="/">主页</a></li><li><a href="/archives/">所有文章</a></li><li><a href="/tags/">标签云</a></li><li><a href="/about/">关于我</a></li><div class="clearfix"></div></ul></nav><nav class="header-nav"><ul class="social"><a class="fa Email" target="_blank" href="mailto:dsz9258@163.com" title="Email"></a><a class="fa GitHub" target="_blank" href="https://github.com/mhy-web/" title="GitHub"></a><a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a></ul></nav></header></div><link class="menu-list" tags="标签" friends="友情链接" about="关于我"></nav><div class="body-wrap"><article id="post-event-of-javascript" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"> <a href="/event-of-javascript.html" class="article-date"><time datetime="2017-09-04T02:36:21.000Z" itemprop="datePublished">2017-09-04</time></a></div><div class="article-inner"> <input type="hidden" class="isFancy"><header class="article-header"><h1 class="article-title" itemprop="name"> 事件处理程序</h1></header><div class="article-info article-info-post"><div class="article-category tagcloud"> <a class="article-category-link" href="/categories/前端/">前端</a></div><div class="article-tag tagcloud"><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/DOM/">DOM</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/javascript/">javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/事件/">事件</a></li></ul></div><div class="clearfix"></div></div><div class="article-entry" itemprop="articleBody"><p>JavaScript和HTML的交互是通过事件实现的。JavaScript采用异步事件驱动编程模型，当文档、浏览器、元素或与之相关对象发生特定事情时，浏览器会产生事件。如果JavaScript关注特定类型事件，那么它可以注册当这类事件发生时要调用的句柄<br><a id="more"></a></p><pre><code>事件是某个行为或者触发，比如点击、鼠标移动
当用户点击鼠标时
当网页已加载时
当图像已加载时
当鼠标移动到元素上时
当用户触发按键时...
</code></pre><h3 id="事件流"><a href="#事件流" class="headerlink" title="事件流"></a>事件流</h3><p>事件流描述的是从页面中接收事件的顺序，比如有两个嵌套的div，点击了内层的div，这时候是内层的div先触发click事件还是外层先触发？目前主要有三种模型</p><blockquote><ul><li>IE的事件冒泡：事件开始时由最具体的元素接收，然后逐级向上传播到较为不具体的元素</li><li>Netscape的事件捕获：不太具体的节点更早接收事件，而最具体的元素最后接收事件，和事件冒泡相反</li><li>DOM事件流：DOM2级事件规定事件流包括三个阶段，事件捕获阶段，处于目标阶段，事件冒泡阶段，首先发生的是事件捕获，为截取事件提供机会，<br>然后是实际目标接收事件，最后是冒泡阶段</li></ul></blockquote><p>这种分歧在日常生活中也很常见，举个例子，某个地方出了抢劫事件，我们有多种处理方式</p><pre><code>村里先发现，报告给乡里，乡里报告到县城，县城报告给市里
市里先知道这事儿，然后交代给县城怎么处理，县城交给到乡里处理，乡里交给村里处理
</code></pre><p>Opera、Firefox、Chrome、Safari都支持DOM事件流，IE不支持事件流，只支持事件冒泡</p><p>如有以下html<br></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Test Page<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        Click Here<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><p>点击div区域</p><table><thead><tr><th><img src="http://7xpvnv.com2.z0.glb.qiniucdn.com/4bc08396-78b0-48e3-a8bb-f846e86e9d73" alt></th><th><img src="http://7xpvnv.com2.z0.glb.qiniucdn.com/0faaa7bb-5dcf-4f3c-93ff-62b134d987dd" alt></th><th><img src="http://7xpvnv.com2.z0.glb.qiniucdn.com/8ddedb2e-f55e-4872-bd36-79c44b71d3f1" alt></th></tr></thead><tbody><tr><td>事件冒泡模型</td><td>事件捕获模型</td><td>DOM事件流</td></tr></tbody></table><h2 id="事件处理程序"><a href="#事件处理程序" class="headerlink" title="事件处理程序"></a>事件处理程序</h2><p>我们也称之为事件侦听器（listener），事件就是用户或浏览器自身执行的某种动作。比如click、load、mouseover等，都是事件类型（俗称事件名称），而响应某个事件的方法就叫做事件处理程序或者事件监听器</p><p>也就是我们需要提前定义好某些事件发生了该怎么处理，这个过程叫做绑定事件处理程序，了解了这些，我们看看如何给元素添加事件处理程序<br>HTML内联方式</p><p>元素支持的每个事件都可以使用一个相应事件处理程序同名的HTML属性指定。这个属性的值应该是可以执行的JavaScript代码，我们可以为一个button添加click事件处理程序</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">input</span> <span class="keyword">type</span>="button" <span class="keyword">value</span>="Click Here" onclick="alert('Clicked!');" /&gt;</span><br></pre></td></tr></table></figure><p>在HTML事件处理程序中可以包含要执行的具体动作，也可以调用在页面其它地方定义的脚本,刚才的例子可以写成这样</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">input</span> <span class="keyword">type</span>="button" <span class="keyword">value</span>="Click Here" onclick="showMessage();" /&gt;</span><br></pre></td></tr></table></figure><p>在HTML中指定事件处理程序书写很方便，但是有两个缺点。</p><blockquote><ul><li>存在加载顺序问题，如果事件处理程序在html代码之后加载，用户可能在事件处理程序还未加载完成时就点击按钮之类的触发事件，存在时间差问题</li><li>这样书写html代码和JavaScript代码紧密耦合，维护不方便</li></ul></blockquote><h3 id="JavaScript指定事件处理程序"><a href="#JavaScript指定事件处理程序" class="headerlink" title="JavaScript指定事件处理程序"></a>JavaScript指定事件处理程序</h3><p>通过JavaScript指定事件处理程序就是把一个方法赋值给一个元素的事件处理程序属性。</p><p>每个元素都有自己的事件处理程序属性，这些属性名称通常为小写，如onclick等，将这些属性的值设置为一个函数，就可以指定事件处理程序，如下<br></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"btnClick"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"Click Here"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> btnClick = <span class="built_in">document</span>.getElementById(<span class="string">'btnClick'</span>);</span></span><br><span class="line"><span class="actionscript">    btnClick.onclick = <span class="function"><span class="keyword">function</span> <span class="title">showMessage</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        alert(<span class="keyword">this</span>.id);</span></span><br><span class="line">    &#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><p>这样处理，事件处理程序被认为是元素的方法，事件处理程序在元素的作用域下运行，this就是当前元素，所以点击button结果是：btnClick</p><p>这样还有一个好处，我们可以删除事件处理程序，只需把元素的onclick属性赋为null即可</p><h3 id="DOM2事件处理程序"><a href="#DOM2事件处理程序" class="headerlink" title="DOM2事件处理程序"></a>DOM2事件处理程序</h3><p>DOM2级事件定义了两个方法用于处理指定和删除事件处理程序的操作：<br></p><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">addEventListener</span></span><br><span class="line"><span class="keyword">removeEventListener</span></span><br></pre></td></tr></table></figure><p></p><p>所有的DOM节点都包含这两个方法，并且它们都接受三个参数：</p><blockquote><ul><li>事件类型</li><li>事件处理方法</li><li>布尔参数，如果是true表示在捕获阶段调用事件处理程序，如果是false，则是在事件冒泡阶段处理</li></ul></blockquote><p>刚才的例子我们可以这样写<br></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"btnClick"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"Click Here"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> btnClick = <span class="built_in">document</span>.getElementById(<span class="string">'btnClick'</span>);</span></span><br><span class="line"><span class="actionscript">    btnClick.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        alert(<span class="keyword">this</span>.id);</span></span><br><span class="line"><span class="actionscript">    &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><p>上面代码为button添加了click事件的处理程序，在冒泡阶段触发，与上一种方法一样，这个程序也是在元素的作用域下运行，不过有一个好处，我们可以为click事件添加多个处理程序<br></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"btnClick"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"Click Here"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> btnClick = <span class="built_in">document</span>.getElementById(<span class="string">'btnClick'</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    btnClick.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        alert(<span class="keyword">this</span>.id);</span></span><br><span class="line"><span class="actionscript">    &#125;, <span class="literal">false</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    btnClick.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        alert(<span class="string">'Hello!'</span>);</span></span><br><span class="line"><span class="actionscript">    &#125;, <span class="literal">false</span>);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><p>这样两个事件处理程序会在用户点击button后按照添加顺序依次执行。</p><p>通过addEventListener添加的事件处理程序只能通过removeEventListener移除，移除时参数与添加的时候相同，这就意味着刚才我们添加的匿名函数无法移除，因为匿名函数虽然方法体一样，但是句柄却不相同，所以当我们有移除事件处理程序的时候可以这样写<br></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"btnClick"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"Click Here"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> btnClick = <span class="built_in">document</span>.getElementById(<span class="string">'btnClick'</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> handler=<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        alert(<span class="keyword">this</span>.id);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    btnClick.addEventListener(<span class="string">'click'</span>, handler, <span class="literal">false</span>);</span></span><br><span class="line"><span class="actionscript">    btnClick.removeEventListener(<span class="string">'click'</span>, handler, <span class="literal">false</span>);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><h2 id="IE兼容性"><a href="#IE兼容性" class="headerlink" title="IE兼容性"></a>IE兼容性</h2><p>下面就是老生常谈的IE兼容性问题了。。。</p><p>IE并不支持addEventListener和removeEventListener方法，而是实现了两个类似的方法<br></p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">attachEvent</span></span><br><span class="line"></span><br><span class="line"><span class="attribute">detachEvent</span></span><br></pre></td></tr></table></figure><p></p><p>这两个方法都接收两个相同的参数</p><blockquote><ul><li>事件处理程序名称</li><li>事件处理程序方法</li></ul></blockquote><p>由于IE指支持事件冒泡，所以添加的程序会被添加到冒泡阶段，使用attachEvent添加事件处理程序可以如下<br></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"btnClick"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"Click Here"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> btnClick = <span class="built_in">document</span>.getElementById(<span class="string">'btnClick'</span>);</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> handler=<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        alert(<span class="keyword">this</span>.id);</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="actionscript">    btnClick.attachEvent(<span class="string">'onclick'</span>, handler);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><p>结果是undefined，很奇怪，一会儿我们会介绍到</p><p>使用attachEvent添加的事件处理程序可以通过detachEvent移除，条件也是相同的参数，匿名函数不能被移除。<br></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"btnClick"</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"Click Here"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> btnClick = <span class="built_in">document</span>.getElementById(<span class="string">'btnClick'</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> handler=<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">        alert(<span class="keyword">this</span>.id);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="actionscript">    btnClick.attachEvent(<span class="string">'onclick'</span>, handler);</span></span><br><span class="line"><span class="actionscript">    btnClick.detachEvent(<span class="string">'onclick'</span>, handler);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><h2 id="跨浏览器的事件处理程序"><a href="#跨浏览器的事件处理程序" class="headerlink" title="跨浏览器的事件处理程序"></a>跨浏览器的事件处理程序</h2><p>前面内容我们可以看到，在不同的浏览器下，添加和移除事件处理程序方式不相同，要想写出跨浏览器的事件处理程序，首先我们要了解不同的浏览器下处理事件处理程序的区别</p><p>在添加事件处理程序事addEventListener和attachEvent主要有几个区别</p><blockquote><ul><li>参数个数不相同，这个最直观，addEventListener有三个参数，attachEvent只有两个，attachEvent添加的事件处理程序只能发生在冒泡阶段，addEventListener第三个参数可以决定添加的事件处理程序是在捕获阶段还是冒泡阶段处理（我们一般为了浏览器兼容性都设置为冒泡阶段）</li><li>第一个参数意义不同，addEventListener第一个参数是事件类型（比如click，load），而attachEvent第一个参数指明的是事件处理函数名称（onclick，onload）</li><li>事件处理程序的作用域不相同，addEventListener的作用域是元素本身，this是指的触发元素，而attachEvent事件处理程序会在全局变量内运行，this是window，所以刚才例子才会返回undefined，而不是元素id</li><li>为一个事件添加多个事件处理程序时，执行顺序不同，addEventListener添加会按照添加顺序执行，而attachEvent添加多个事件处理程序时顺序无规律(添加的方法少的时候大多是按添加顺序的反顺序执行的，但是添加的多了就无规律了)，所以添加多个的时候，不依赖执行顺序的还好，若是依赖于函数执行顺序，最好自己处理，不要指望浏览器</li></ul></blockquote><p>了解了这四点区别后我们可以尝试写一个浏览器兼容性比较好的添加事件处理程序方法</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function addEvent(<span class="keyword">node</span><span class="title">, type</span>, handler) &#123;</span><br><span class="line">    if (!<span class="keyword">node</span><span class="title">) return</span> <span class="literal">false</span>;</span><br><span class="line">    if (<span class="keyword">node</span>.<span class="title">addEventListener</span>) &#123;</span><br><span class="line">        <span class="keyword">node</span>.<span class="title">addEventListener</span>(<span class="keyword">type</span>, handler, <span class="literal">false</span>);</span><br><span class="line">        return <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    else if (<span class="keyword">node</span>.<span class="title">attachEvent</span>) &#123;</span><br><span class="line">        <span class="keyword">node</span>.<span class="title">attachEvent</span>('on' + <span class="keyword">type</span>, handler, );</span><br><span class="line">        return <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    return <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这样，首先我们解决了第一个问题参数个数不同，现在三个参数，采用事件冒泡阶段触发</p><p>第二个问题也得以解决，如果是IE，我们给type添加上on</p><p>第四个问题目前还没有解决方案，需要用户自己注意，一般情况下，大家也不会添加很多事件处理程序</p><p>试试这个方法感觉很不错，但是我们没有解决第三个问题，由于处理程序作用域不同，如果handler内有this之类操作，那么就会出错。在IE下，实际上大多数函数都会有this操作<br></p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function addEvent(<span class="keyword">node</span><span class="title">, type</span>, handler) &#123;</span><br><span class="line">    if (!<span class="keyword">node</span><span class="title">) return</span> <span class="literal">false</span>;</span><br><span class="line">    if (<span class="keyword">node</span>.<span class="title">addEventListener</span>) &#123;</span><br><span class="line">        <span class="keyword">node</span>.<span class="title">addEventListener</span>(<span class="keyword">type</span>, handler, <span class="literal">false</span>);</span><br><span class="line">        return <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    else if (<span class="keyword">node</span>.<span class="title">attachEvent</span>) &#123;</span><br><span class="line">        <span class="keyword">node</span>.<span class="title">attachEvent</span>('on' + <span class="keyword">type</span>, function() &#123; handler.apply(<span class="keyword">node</span><span class="title">); &#125;);</span></span><br><span class="line"><span class="title">        return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    return <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>这样处理就可以解决this的问题了，但是新的问题又来了，我们这样等于添加了一个匿名的事件处理程序，无法用detachEvent取消事件处理程序，有很多解决方案，我们可以借鉴大师的处理方式，jQuery创始人John Resig是这样做的<br></p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">function addEvent(<span class="keyword">node</span><span class="title">, type</span>, handler) &#123;</span><br><span class="line">    if (!<span class="keyword">node</span><span class="title">) return</span> <span class="literal">false</span>;</span><br><span class="line">    if (<span class="keyword">node</span>.<span class="title">addEventListener</span>) &#123;</span><br><span class="line">        <span class="keyword">node</span>.<span class="title">addEventListener</span>(<span class="keyword">type</span>, handler, <span class="literal">false</span>);</span><br><span class="line">        return <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    else if (<span class="keyword">node</span>.<span class="title">attachEvent</span>) &#123;</span><br><span class="line">        <span class="keyword">node</span><span class="title">['e</span>' + <span class="keyword">type</span> + handler] = handler;</span><br><span class="line">        <span class="keyword">node</span><span class="title">[type</span> + handler] = function() &#123;</span><br><span class="line">            <span class="keyword">node</span><span class="title">['e</span>' + <span class="keyword">type</span> + handler](window.event);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">node</span>.<span class="title">attachEvent</span>('on' + <span class="keyword">type</span>, <span class="keyword">node</span><span class="title">[type</span> + handler]);</span><br><span class="line">        return <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    return <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p><strong>在取消事件处理程序的时候</strong><br></p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function removeEvent(<span class="keyword">node</span><span class="title">, type</span>, handler) &#123;</span><br><span class="line">    if (!<span class="keyword">node</span><span class="title">) return</span> <span class="literal">false</span>;</span><br><span class="line">    if (<span class="keyword">node</span>.<span class="title">removeEventListener</span>) &#123;</span><br><span class="line">        <span class="keyword">node</span>.<span class="title">removeEventListener</span>(<span class="keyword">type</span>, handler, <span class="literal">false</span>);</span><br><span class="line">        return <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    else if (<span class="keyword">node</span>.<span class="title">detachEvent</span>) &#123;</span><br><span class="line">        <span class="keyword">node</span>.<span class="title">detachEvent</span>('on' + <span class="keyword">type</span>, <span class="keyword">node</span><span class="title">[type</span> + handler]);</span><br><span class="line">        <span class="keyword">node</span><span class="title">[type</span> + handler] = null;</span><br><span class="line">    &#125;</span><br><span class="line">    return <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>John Resig很巧妙地利用了闭包，看起来很不错。</p><h2 id="事件对象"><a href="#事件对象" class="headerlink" title="事件对象"></a>事件对象</h2><p>在触发DOM上的某个事件的时候会产生一个事件对象event，这个对象包含着所有与事件有关的信息，包括产生事件的元素、事件类型等相关信息。所有浏览器都支持event对象，但支持方式不同。</p><h3 id="DOM中的事件对象"><a href="#DOM中的事件对象" class="headerlink" title="DOM中的事件对象"></a>DOM中的事件对象</h3><p>兼容DOM的浏览器会产生一个event对象传入事件处理程序中。应用一下刚才我们写的addEvent方法<br></p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var btnClick = document.get<span class="constructor">ElementById('<span class="params">btnClick</span>')</span>;</span><br><span class="line">  add<span class="constructor">Event(<span class="params">btnClick</span>, '<span class="params">click</span>', <span class="params">handler</span>)</span>;</span><br></pre></td></tr></table></figure><p></p><p>点击button的时候我们可以看到弹出内容是click的弹窗</p><p>event对象包含与创建它的特定事件有关的属性和方法，触发事件的类型不同，可用的属性和方法也不同，但是所有事件都会包含</p><table><thead><tr><th>属性/方法</th><th>类型</th><th>读/写</th><th>说明</th></tr></thead><tbody><tr><td>bubbles</td><td>Boolean</td><td>只读</td><td>事件是否冒泡</td></tr><tr><td>cancelable</td><td>Boolean</td><td>只读</td><td>是否可以取消事件的默认行为</td></tr><tr><td>currentTarget</td><td>Element</td><td>只读</td><td>事件处理程序当前处理元素</td></tr><tr><td>detail</td><td>Integer</td><td>只读</td><td>与事件相关细节信息</td></tr><tr><td>eventPhase</td><td>Integer</td><td>只读</td><td>事件处理程序阶段：1 捕获阶段，2 处于目标阶段，3 冒泡阶段</td></tr><tr><td>preventDefault()</td><td>Function</td><td>只读</td><td>取消事件默认行为</td></tr><tr><td>stopPropagation()</td><td>Function</td><td>只读</td><td>取消事件进一步捕获或冒泡</td></tr><tr><td>target</td><td>Element</td><td>只读</td><td>事件的目标元素</td></tr><tr><td>type</td><td>String</td><td>只读</td><td>被触发的事件类型</td></tr><tr><td>view</td><td>AbstractView</td><td>只读</td><td>与事件关联的抽象视图，等同于发生事件的window对象</td></tr></tbody></table><p>在事件处理程序内部，this始终等同于currentTarget，而target是事件的实际目标。</p><p>要阻止事件的默认行为，可以使用preventDefault()方法，前提是cancelable值为true，比如我们可以阻止链接导航这一默认行为<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">'#btn'</span>).onclick = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>stopPropagation()方法可以停止事件在DOM层次的传播，即取消进一步的事件捕获或冒泡。我们可以在button的事件处理程序中调用stopPropagation()从而避免注册在body上的事件发生<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> handler = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    alert(e.type);</span><br><span class="line">    e.stopPropagation();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">addEvent(<span class="built_in">document</span>.body, <span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; alert(<span class="string">'Clicked body'</span>)&#125;);</span><br><span class="line"><span class="keyword">var</span> btnClick = <span class="built_in">document</span>.getElementById(<span class="string">'btnClick'</span>);</span><br><span class="line">addEvent(btnClick, <span class="string">'click'</span>, handler);</span><br></pre></td></tr></table></figure><p></p><p>若是注释掉e.stopPropagation(); 在点击button的时候，由于事件冒泡，body的click事件也会触发，但是调用这句后，事件会停止传播<br>IE中的事件对象</p><p>访问IE中的event对象有几种不同的方式，取决于指定事件处理程序的方法。直接为DOM元素添加事件处理程序时，event对象作为window对象的一个属性存在<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> handler = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> e = <span class="built_in">window</span>.event;</span><br><span class="line">    alert(e.type);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> btnClick = <span class="built_in">document</span>.getElementById(<span class="string">'btnClick'</span>);</span><br><span class="line">btnClick.onclick = handler;</span><br></pre></td></tr></table></figure><p></p><p>我们通过window.event取得了event对象，并检测到了其类型，可是如果事件处理程序是通过attachEvent添加的，那么就会有一个event对象被传入事件处理程序中<br></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> handler = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    alert(e.type);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> btnClick = <span class="built_in">document</span>.getElementById(<span class="string">'btnClick'</span>);</span><br><span class="line">attachEvent(btnClick, handler);</span><br></pre></td></tr></table></figure><p></p><p>当然这时候也可以通过window对象访问event，方便起见，我们一般会传入event对象，IE中所有的事件都包含以下属性方法</p><table><thead><tr><th>属性/方法</th><th>类型</th><th>读/写</th><th>说明</th></tr></thead><tbody><tr><td>cancelBubble</td><td>Boolean</td><td>读/写</td><td>默认为false，设置为true后可以取消事件冒泡</td></tr><tr><td>returnValue</td><td>Boolean</td><td>读/写</td><td>默认为true，设为false可以取消事件默认行为</td></tr><tr><td>srcElement</td><td>Element</td><td>只读</td><td>事件的目标元素</td></tr><tr><td>type</td><td>String 只读</td><td>被触发的事件类型</td></tr></tbody></table><h3 id="跨浏览器的事件对象"><a href="#跨浏览器的事件对象" class="headerlink" title="跨浏览器的事件对象"></a>跨浏览器的事件对象</h3><p>虽然DOM和IE的event对象不同，但基于它们的相似性，我们还是可以写出跨浏览器的事件对象方案<br></p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title">getEvent</span>(e) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">e</span> || window.event;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title">getTarget</span>(e) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="type">e.target</span> || e.scrElement;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title">preventDefault</span>(e) &#123;</span><br><span class="line">    if (e.preventDefault)</span><br><span class="line">        e.preventDefault();</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        e.returnValue = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title">stopPropagation</span>(e) &#123;</span><br><span class="line">    if (e.stopPropagation)</span><br><span class="line">        e.stopPropagation();</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        e.cancelBubble = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><h3 id="常用HTML事件"><a href="#常用HTML事件" class="headerlink" title="常用HTML事件"></a>常用HTML事件</h3><p>有一些HTML事件我们会经常用到，这些事件不一定与用户操作有关，这里只是简单提及，详细用法大家就得百度谷歌了<br></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">load</span>：当页面完全加载后在<span class="keyword">window</span>上触发，当图像加载完成后在img元素上触发，或当嵌入内容加载完成时，在<span class="keyword">object</span>元素上触发</span><br><span class="line"></span><br><span class="line">unload：页面完全卸载后在<span class="keyword">window</span>上触发，或嵌入内容卸载后在<span class="keyword">object</span>元素触发</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span>：用户选择文本框中的字符时触发</span><br><span class="line"></span><br><span class="line"><span class="keyword">change</span>：文本框焦点变化后其值改变时触发</span><br><span class="line"></span><br><span class="line">submit：用户提交表单的时候触发</span><br><span class="line"></span><br><span class="line"><span class="keyword">resize</span>：窗口或框架大小变化的时候在<span class="keyword">window</span>上触发</span><br><span class="line"></span><br><span class="line"><span class="keyword">scroll</span>：用户滚动带滚动条的元素时，在该元素上触发</span><br><span class="line"></span><br><span class="line">focus：页面或元素获得焦点时在<span class="keyword">window</span>及相应元素上触发</span><br><span class="line"></span><br><span class="line">blur：页面或元素失去焦点时在<span class="keyword">window</span>及相应元素上触发</span><br><span class="line"></span><br><span class="line">beforeunload：页面卸载前在<span class="keyword">window</span>上触发</span><br><span class="line"></span><br><span class="line">mousewheel：不算HTML的，当用户通过鼠标滚轮与页面交互，在垂直方向滚动页面时触发</span><br></pre></td></tr></table></figure><p></p></div></div><div class="copyright"><p><span>本文标题:</span><a href="/event-of-javascript.html">事件处理程序</a></p><p><span>文章作者:</span><a href="/" title="回到主页">shanks</a></p><p><span>发布时间:</span>2017-09-04, 10:36:21</p><p><span>最后更新:</span>2020-01-13, 12:05:08</p><p> <span>原始链接:</span><a class="post-url" href="/event-of-javascript.html" title="事件处理程序">https://mhynet.cn/event-of-javascript.html</a><span class="copy-path" data-clipboard-text="原文: https://mhynet.cn/event-of-javascript.html　　作者: shanks" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span><script>var clipboard=new Clipboard(".copy-path")</script></p><p> <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target="_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。</p></div><nav id="article-nav"><div id="article-nav-newer" class="article-nav-title"> <a href="/self-and-this-in-js.html">【转】javascript的self和this使用小结</a></div><div id="article-nav-older" class="article-nav-title"> <a href="/REM-vs-EM.html">【转】REM和EM</a></div></nav></article><div id="toc" class="toc-article"> <strong class="toc-title">文章目录</strong><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#事件流"><span class="toc-number">1.</span> <span class="toc-text">事件流</span></a></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#事件处理程序"><span class="toc-number"></span> <span class="toc-text">事件处理程序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JavaScript指定事件处理程序"><span class="toc-number">1.</span> <span class="toc-text">JavaScript指定事件处理程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DOM2事件处理程序"><span class="toc-number">2.</span> <span class="toc-text">DOM2事件处理程序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IE兼容性"><span class="toc-number"></span> <span class="toc-text">IE兼容性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#跨浏览器的事件处理程序"><span class="toc-number"></span> <span class="toc-text">跨浏览器的事件处理程序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#事件对象"><span class="toc-number"></span> <span class="toc-text">事件对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#DOM中的事件对象"><span class="toc-number">1.</span> <span class="toc-text">DOM中的事件对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#跨浏览器的事件对象"><span class="toc-number">2.</span> <span class="toc-text">跨浏览器的事件对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#常用HTML事件"><span class="toc-number">3.</span> <span class="toc-text">常用HTML事件</span></a></li></ol></li></div><style>.left-col .switch-area,.left-col .switch-btn{display:none}.toc-level-3 i,.toc-level-3 ol{display:none!important}</style> <input type="button" id="tocButton" value="隐藏目录" title="点击按钮隐藏或者显示文章目录"><script>yiliaConfig.toc=["隐藏目录","显示目录",!0]</script><section><div id="gitalk-container" style="margin:auto 30px"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script><script type="text/javascript">
     const gitalk = new Gitalk({
      id: "/event-of-javascript.html",
      owner: "mhy-web",
      admin: "mhy-web",
      repo: "blog-comment",
      clientID: "a717b97f95436ae1fce1",
      clientSecret: "c864f5e20f3057474ae80373e63dfa405d552c57"
    });
    gitalk.render('gitalk-container')
  </script></section><div class="scroll" id="post-nav-button"><a href="/self-and-this-in-js.html" title="上一篇: 【转】javascript的self和this使用小结"><i class="fa fa-angle-left"></i></a><a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a><a href="/REM-vs-EM.html" title="下一篇: 【转】REM和EM"><i class="fa fa-angle-right"></i></a></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/cssText-operate-style.html">cssText批量修改dom的样式</a></li><li class="post-list-item"><a class="post-list-link" href="/vps-deploy-guide.html">vps搭建指南</a></li><li class="post-list-item"><a class="post-list-link" href="/vue-element-admin-search-query-cache.html">vue+element后台管理搜索表单缓存</a></li><li class="post-list-item"><a class="post-list-link" href="/pynongo-notes.html">pynongo使用笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/elementUI-component-validate.html">elementUI表单使用自定义组件并获取子组件验证</a></li><li class="post-list-item"><a class="post-list-link" href="/linux-note-5.html">linux学习笔记(5)</a></li><li class="post-list-item"><a class="post-list-link" href="/mongodb-searchs.html">[转载]mongodb常用查询语句</a></li><li class="post-list-item"><a class="post-list-link" href="/express_request_and_response.html">express之request和response对象</a></li><li class="post-list-item"><a class="post-list-link" href="/hexo-mutl-device-sync.html">hexo+github博客多设备同步</a></li><li class="post-list-item"><a class="post-list-link" href="/linux-note-4.html">linux学习笔记(4)</a></li><li class="post-list-item"><a class="post-list-link" href="/linux-note-3.html">linux学习笔记(3)</a></li><li class="post-list-item"><a class="post-list-link" href="/linux-note-2.html">linux学习笔记(2)</a></li><li class="post-list-item"><a class="post-list-link" href="/linux-note-1.html">linux学习笔记(1)</a></li><li class="post-list-item"><a class="post-list-link" href="/mongodb-notes.html">mongodb学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/vuex-notes.html">vuex学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/mobile-remote-debug.html">移动端页面远程调试</a></li><li class="post-list-item"><a class="post-list-link" href="/dispatchEvent.html">dispatchEvent的用法</a></li><li class="post-list-item"><a class="post-list-link" href="/window-screen-property.html">window对象之屏幕尺寸相关的属性</a></li><li class="post-list-item"><a class="post-list-link" href="/ES6-Set-and-Map.html">ES6之Set和Map</a></li><li class="post-list-item"><a class="post-list-link" href="/MySQL-notes.html">MySQL学习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/window-screens.html">window对象之screen</a></li><li class="post-list-item"><a class="post-list-link" href="/window-property-and-function.html">window对象的属性和方法</a></li><li class="post-list-item"><a class="post-list-link" href="/window-location.html">window对象之location</a></li><li class="post-list-item"><a class="post-list-link" href="/window-navigator.html">window对象之navigator</a></li><li class="post-list-item"><a class="post-list-link" href="/deep-clone-js.html">深浅拷贝方法总结</a></li><li class="post-list-item"><a class="post-list-link" href="/functions_of_object.html">对象的方法汇总</a></li><li class="post-list-item"><a class="post-list-link" href="/oop-and-inherit.html">面向对象和继承</a></li><li class="post-list-item"><a class="post-list-link" href="/hexo-for-blog.html">使用hexo+github搭建免费个人博客</a></li><li class="post-list-item"><a class="post-list-link" href="/Front-end-design-patterns.html">前端设计模式</a></li><li class="post-list-item"><a class="post-list-link" href="/function-of-array.html">数组的方法汇总</a></li><li class="post-list-item"><a class="post-list-link" href="/CSS3-rotate-dice.html">CSS3动画--转不停的骰子</a></li><li class="post-list-item"><a class="post-list-link" href="/wechat-app-of-wepy.html">使用wepy框架开发微信小程序</a></li><li class="post-list-item"><a class="post-list-link" href="/this-protoype-inherit.html">this、原型、继承总结</a></li><li class="post-list-item"><a class="post-list-link" href="/FE-module.html">前端模块化常用规范</a></li><li class="post-list-item"><a class="post-list-link" href="/self-and-this-in-js.html">【转】javascript的self和this使用小结</a></li><li class="post-list-item"><a class="post-list-link" href="/event-of-javascript.html">事件处理程序</a></li><li class="post-list-item"><a class="post-list-link" href="/REM-vs-EM.html">【转】REM和EM</a></li><li class="post-list-item"><a class="post-list-link" href="/jquery-extend-use.html">【转】jQuery之.extend()方法使用</a></li><li class="post-list-item"><a class="post-list-link" href="/javascript-regexp-note.html">javascript正则表达式</a></li><li class="post-list-item"><a class="post-list-link" href="/DOM-operate-note.html">DOM操作总结</a></li><li class="post-list-item"><a class="post-list-link" href="/html5-meta-properties.html">meta标签总结与属性使用介绍</a></li></ul><script></script></div><footer id="footer"><div class="outer"><div id="footer-info"><div class="footer-left"><i class="fa fa-copyright"></i> 2017-2020 shanks</div><div class="footer-right"> <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a> Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE<i class="fa fa-heart animated infinite pulse"></i></div></div><div class="visit"><span id="busuanzi_container_site_pv" style="display:none"><span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span></span></span> <span style="padding:0 3px">|</span><span id="busuanzi_container_page_pv" style="display:none"><span id="page-visit" title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span></span></span> <span style="padding:0 3px">|</span> <a class="link" target="_blank" href="http://www.beian.miit.gov.cn/">京ICP备19058010号</a></div></div></footer></div><script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-155864731-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-155864731-1")</script><div class="scroll" id="scroll"><a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a><a href="#comments" onclick="load$hide()" title="查看评论"><i class="fa fa-comments-o"></i></a><a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a></div><script>var oOpenInNew={archives:".archive-article-title",miniArchives:"a.post-list-link",friends:"#js-friends a",socail:".social a"};for(var x in oOpenInNew)$(oOpenInNew[x]).attr("target","_blank")</script><script async src="http://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body>