<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom"><title>shanksçš„å­¦ä¹ æ—¥å¿—</title><subtitle>shanksçš„å­¦ä¹ æ—¥å¿—</subtitle><link href="/atom.xml" rel="self"/><link href="https://mhynet.cn/"/><updated>2020-01-13T04:05:08.194Z</updated><id>https://mhynet.cn/</id><author><name>shanks</name></author><generator uri="http://hexo.io/">Hexo</generator><entry><title>cssTextæ‰¹é‡ä¿®æ”¹domçš„æ ·å¼</title><link href="https://mhynet.cn/cssText-operate-style.html"/><id>https://mhynet.cn/cssText-operate-style.html</id><published>2019-11-26T03:09:34.000Z</published><updated>2020-01-13T04:05:08.194Z</updated><content type="html"><![CDATA[<p>ä¹‹å‰ç”¨jsä¿®æ”¹domçš„æ ·å¼ä¸€èˆ¬éƒ½æ˜¯é‡‡ç”¨ä»¥ä¸‹çš„æ–¹å¼ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = <span class="keyword">this</span>.$refs.target;</span><br><span class="line">element.style.width = <span class="string">'200px'</span>;</span><br><span class="line">element.style.height = <span class="string">'100px'</span>;</span><br><span class="line">element.style.color = <span class="string">'red'</span>;</span><br></pre></td></tr></table></figure></p><p>æ ·å¼ä¸å¤šçš„è¯ï¼Œæ€§èƒ½è¿˜å¯ä»¥ï¼Œä½†æ˜¯å¦‚æœæ ·å¼ç‰¹åˆ«å¤šï¼Œæˆ–è€…æ¶‰åŠåˆ°åŠ¨ç”»çš„æ—¶å€™ï¼Œæ€§èƒ½ä¼šä¸å¤ªç†æƒ³ã€‚å‰è€…æ¯ä¸€æ¬¡è®¾ç½®éƒ½ä¼šreflowä¸€æ¬¡ï¼Œåè€…ä¹‹åreflowä¸€æ¬¡ã€‚<br>æ—©ä¸Šé˜…è¯»æŸå¼€æºæ¡†æ¶çš„æºç æ—¶å‘ç°äº†ä¸€ç§ç”¨jsè¦†å†™cssçš„æ–¹å¼ï¼ŒæŸ¥é˜…ä¹‹åå‘ç°å…¼å®¹æ€§å’Œæ€§èƒ½éƒ½è¶…çº§æ£’ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ä»¥åŠ æ·±è®°å¿†ã€‚</p><h2 id="åŠŸèƒ½å’Œè¯­æ³•"><a href="#åŠŸèƒ½å’Œè¯­æ³•" class="headerlink" title="åŠŸèƒ½å’Œè¯­æ³•"></a>åŠŸèƒ½å’Œè¯­æ³•</h2><p>MDNä»‹ç»:</p><blockquote><p>The cssText property of the CSSStyleDeclaration interface returns or sets the text of the elementâ€™s inline style declaration only. To be able to set a stylesheet rule dynamically, see Using dynamic styling information.</p></blockquote><p>è¯­æ³•ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> element = <span class="keyword">this</span>.$refs.target;</span><br><span class="line"><span class="comment">// è·å–å†…è”æ ·å¼,å¥½åƒåªèƒ½è·å–åˆ°å†…è”æ ·å¼ï¼Œå†™åœ¨styleæ ‡ç­¾å’Œcssæ–‡ä»¶ä¸­çš„æ ·å¼éœ€è¦ä½¿ç”¨ window.getComputedStyle è·å–</span></span><br><span class="line">alert(element.style.cssText)</span><br><span class="line"><span class="comment">// è¦†å†™æ ·å¼</span></span><br><span class="line">element.style.cssText = <span class="string">'width:200px;height:100px;color:red;'</span>;</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨<code>cssText</code>ä¼šè¦†ç›–ä¹‹å‰çš„æ‰€æœ‰æ ·å¼ï¼Œæ‰€ä»¥å¦‚æœè¦ä¿ç•™ä¹‹å‰çš„æ ·å¼ï¼Œåˆ™éœ€è¦å…ˆè·å–åˆ°å·²æœ‰æ ·å¼ï¼Œç„¶åè¿½åŠ æ–°æ ·å¼ã€‚</p><h3 id="å…¼å®¹æ€§"><a href="#å…¼å®¹æ€§" class="headerlink" title="å…¼å®¹æ€§"></a>å…¼å®¹æ€§</h3><p>å„æµè§ˆå™¨ç›®å‰éƒ½å…¼å®¹ï¼ˆåŒ…æ‹¬IE6,7,8ï¼‰<code>cssText</code>çš„æ–¹å¼è®¾ç½®æ ·å¼ï¼Œä½†æ˜¯åœ¨IEä¸‹ï¼Œç´¯åŠ çš„æ—¶å€™å›ä¸¢å¤±ä¹‹å‰çš„æ ·å¼ä¸­æœ€åä¸€ä¸ª<code>;</code>ï¼Œ æ‰€æœ‰éœ€è¦åšä¸€ä¸‹å…¼å®¹ï¼Œå¯ä»¥é‡‡ç”¨æ­£åˆ™çš„æ–¹å¼å¯¹è·å–åˆ°çš„å·²æœ‰æ ·å¼è¿›è¡ŒåŒ¹é…ã€‚<br>è·å–å·²æœ‰å±æ€§å¯ä»¥ç”¨<code>window.getComputedStyle</code>ï¼ŒIEæµè§ˆå™¨ç”¨<code>document.currentStyle</code>ï¼Œæ­¤APIä»…ç”¨æ¥è¦†å†™æ ·å¼å³å¯ã€‚</p><h3 id="ä½¿ç”¨ç¤ºä¾‹"><a href="#ä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ä½¿ç”¨ç¤ºä¾‹"></a>ä½¿ç”¨ç¤ºä¾‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è·å–åŸæœ‰æ ·å¼, IE ç”¨ domå…ƒç´ .currentStyle ç«ç‹è°·æ­Œç”¨window.getComputedStyle(dom, null)</span></span><br><span class="line"><span class="keyword">const</span> getStyle = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">if</span>(<span class="built_in">window</span>.document.currentStyle) &#123;</span><br><span class="line"><span class="keyword">return</span><span class="function">(<span class="params">dom, attr</span>) =&gt;</span> dom.currentStyle[attr];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"><span class="keyword">return</span><span class="function">(<span class="params">dom, attr</span>) =&gt;</span> getComputedStyle(dom, <span class="literal">false</span>)[attr];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> element = <span class="built_in">document</span>.querySelecter(<span class="string">'#target'</span>);</span><br><span class="line"><span class="keyword">let</span> widthExists = getStyle(element, <span class="string">'width'</span>);</span><br><span class="line"><span class="comment">// å»é™¤px</span></span><br><span class="line"><span class="keyword">let</span> width = <span class="built_in">Number</span>(widthExists.replace(<span class="regexp">/\%/g</span>, <span class="string">''</span>));</span><br><span class="line">element.style.cssText += <span class="string">`;width: <span class="subst">$&#123;widthExists + <span class="number">200</span>&#125;</span>px;`</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œç”¨åˆ°äº†<code>getComputedStyleå’ŒcurrentStyle</code>ï¼Œå…¶ä¸­<code>currentStyle</code>æ˜¯IEæµè§ˆå™¨çš„APIï¼Œ<code>getComputedStyle</code>æ˜¯googleç­‰ä¸»æµæµè§ˆå™¨éƒ½æ”¯æŒçš„è·å–å·²æœ‰æ ·å¼çš„æ¥å£ã€‚<br>è¯¥æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è·å–æ ·å¼çš„domèŠ‚ç‚¹ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸€èˆ¬å¯è®¾ç½®ä¸º <code>null</code>æˆ–<code>fasle</code>ï¼Œä»…åœ¨è·å–ä¼ªç±»å…ƒç´ æ—¶ä¼ å…¥ä¼ªç±»çš„å€¼ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªåªè¯»çš„å¯¹è±¡ï¼Œé‡Œé¢åŒ…å«äº†è¯¥domå…ƒç´ çš„æ ·å¼ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-tag">h3</span><span class="selector-pseudo">::after</span> &#123;</span></span><br><span class="line">        content: "rocks!";</span><br><span class="line">    &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>generated content<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">let</span> h3 = <span class="built_in">document</span>.querySelector(<span class="string">'h3'</span>),</span></span><br><span class="line"><span class="actionscript">    result = getComputedStyle(h3, <span class="string">'::after'</span>).content;</span></span><br><span class="line"><span class="javascript">    alert(<span class="string">`the generated content is: <span class="subst">$&#123;result&#125;</span>`</span>);</span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(<span class="string">`the generated content is: <span class="subst">$&#123;result&#125;</span>`</span>);</span></span><br><span class="line"><span class="actionscript"><span class="comment">// the generated content is: "rocks!"</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content><summary type="html">
    
      ä½¿ç”¨cssTextæ‰¹é‡ä¿®æ”¹domæ ·å¼, æ€§èƒ½å’Œå…¼å®¹æ€§éƒ½è¶…çº§æ£’ï¼
    
    </summary><category term="å‰ç«¯" scheme="https://mhynet.cn/categories/%E5%89%8D%E7%AB%AF/"/><category term="css" scheme="https://mhynet.cn/tags/css/"/><category term="javascript" scheme="https://mhynet.cn/tags/javascript/"/></entry><entry><title>vpsæ­å»ºæŒ‡å—</title><link href="https://mhynet.cn/vps-deploy-guide.html"/><id>https://mhynet.cn/vps-deploy-guide.html</id><published>2019-09-23T08:00:56.000Z</published><updated>2020-01-13T04:05:08.200Z</updated><content type="html"><![CDATA[<p>ä¸Šå‘¨å‘ç°æˆ‘çš„vpsåˆè¢«ç¦äº†ï¼Œåˆå¾—é‡æ–°éƒ¨ç½²ã€‚<br>æ¯æ¬¡éƒ¨ç½²vpséƒ½è¦googleæœç´¢ç›¸å…³å‘½ä»¤ï¼Œç‰¹åˆ«éº»çƒ¦ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹æ­å»ºvpsçš„ç®€å•æ­¥éª¤å§ã€‚</p><a id="more"></a><p>å®‰è£…shadowsockså‘½ä»¤<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate -O shadowsocks-all.sh https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks-all.sh</span><br><span class="line"></span><br><span class="line">chmod +x shadowsocks-all.sh</span><br><span class="line"></span><br><span class="line">./shadowsocks-all.sh 2&gt;&amp;1 | tee shadowsocks-all.log</span><br></pre></td></tr></table></figure></p><p>å®‰è£…è¿‡ç¨‹ä¸­æ ¹æ®å‘½ä»¤è¡Œäº¤äº’é€‰æ‹©æœåŠ¡å™¨ç±»å‹ï¼ˆå¦‚Shadowsocks-libevï¼‰ã€ç«¯å£ã€å¯†ç ã€åŠ å¯†æ–¹æ³•ç­‰ã€‚<br>å¦‚Shadowsocks-libevç±»å‹çš„æœåŠ¡çš„é…ç½®æ–‡ä»¶åœ¨ <code>/etc/shadowsocks-libev/config.json</code>ï¼Œå¯ä»¥ç¼–è¾‘é…ç½®ã€‚</p><p>æŸ¥çœ‹çŠ¶æ€<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/etc/i</span>nit.d<span class="regexp">/shadowsocks-libev status</span></span><br></pre></td></tr></table></figure></p><p>é‡å¯æœåŠ¡<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/etc/i</span>nit.d<span class="regexp">/shadowsocks-libev restart</span></span><br></pre></td></tr></table></figure></p><p>å…³é—­æœåŠ¡<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/shadowsocks-libev <span class="built_in">stop</span></span><br></pre></td></tr></table></figure></p><p>å¼€å¯æœåŠ¡<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/etc/i</span>nit.d<span class="regexp">/shadowsocks-libev start</span></span><br></pre></td></tr></table></figure></p><p>å‚è€ƒ:<br><a href="https://zoomyale.com/2016/vultr_and_ss/" target="_blank" rel="noopener">ç§‘å­¦ä¸Šç½‘çš„ç»ˆæå§¿åŠ¿ï¼šåœ¨ Vultr VPS ä¸Šæ­å»º Shadowsocks</a><br><a href="https://www.vps234.com/hostwinds-purchase-tutorial/" target="_blank" rel="noopener">ç¾å›½ VPS Hostwinds è´­ä¹°æµç¨‹æ–°æ‰‹æ•™ç¨‹</a><br><a href="https://teddysun.com/489.html" target="_blank" rel="noopener">ä¸€é”®å®‰è£…æœ€æ–°å†…æ ¸å¹¶å¼€å¯ BBR è„šæœ¬</a><br><a href="https://teddysun.com/276.html" target="_blank" rel="noopener">æ–°è´­VPSåçš„è®¾ç½®åŠç½‘ç«™è¿ç§»æ­¥éª¤</a><br><a href="https://www.10besty.com/best-vps-hosting-services/" target="_blank" rel="noopener">2019å¹´æœ€å¥½çš„å›½å¤–VPSæ¨è</a></p>]]></content><summary type="html">
    
      vpsæ­å»ºæŒ‡å—ï¼Œå®ç°ç§‘å­¦ä¸Šç½‘
    
    </summary><category term="vps" scheme="https://mhynet.cn/categories/vps/"/><category term="vps" scheme="https://mhynet.cn/tags/vps/"/></entry><entry><title>vue+elementåå°ç®¡ç†æœç´¢è¡¨å•ç¼“å­˜</title><link href="https://mhynet.cn/vue-element-admin-search-query-cache.html"/><id>https://mhynet.cn/vue-element-admin-search-query-cache.html</id><published>2019-06-22T02:41:53.000Z</published><updated>2020-01-13T04:05:08.200Z</updated><content type="html"><![CDATA[<p>åœ¨åå°ç®¡ç†ç³»ç»Ÿä¸­ç»å¸¸ä¼šæœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œä»åˆ—è¡¨é¡µè·³è½¬åˆ°è¯¦æƒ…é¡µå†è¿”å›åˆ—è¡¨åå¸Œæœ›ä¿æŒä¹‹å‰çš„æŸ¥è¯¢æ¡ä»¶ï¼Œæ­¤ç±»éœ€æ±‚ä¸€èˆ¬æœ‰ä»¥ä¸‹å‡ ç§å¤„ç†æ–¹å¼å¯ä»¥å‚è€ƒã€‚</p><a id="more"></a><h2 id="æ–°é¡µé¢æ‰“å¼€è¯¦æƒ…é¡µ"><a href="#æ–°é¡µé¢æ‰“å¼€è¯¦æƒ…é¡µ" class="headerlink" title="æ–°é¡µé¢æ‰“å¼€è¯¦æƒ…é¡µ"></a>æ–°é¡µé¢æ‰“å¼€è¯¦æƒ…é¡µ</h2><p>å·æ‡’çš„åšæ³•æ˜¯æ‰“å¼€è¯¦æƒ…é¡µæ—¶åœ¨æ–°çª—å£æ‰“å¼€ï¼Œè¿™æ ·å°±å¯ä»¥ä¿æŒåˆ—è¡¨é¡µçš„æœç´¢å‚æ•°äº†ï¼Œä½†æ˜¯è¿™æ ·å¾€å¾€ä¼šæ‰“å¼€å¾ˆå¤šçš„æ–°é¡µé¢ï¼Œç”¨æˆ·éœ€è¦åœ¨å¤šä¸ªé¡µé¢ç›´æ¥æ¥å›åˆ‡æ¢æ“ä½œç¹çï¼Œè€Œä¸”æœ‰ä¸ªå…³é”®çš„é—®é¢˜æ˜¯åˆ‡æ¢åˆ°åˆ—è¡¨é¡µæ ‡ç­¾åæ•°æ®å¹¶ä¸æ˜¯æœ€æ–°çš„ï¼Œå› ä¸ºåˆšæ‰åœ¨è¯¦æƒ…é¡µå·²ç»ç¼–è¾‘è¿‡æ•°æ®äº†ã€‚æˆ‘è´Ÿè´£å¼€å‘ç»´æŠ¤çš„åå°ç®¡ç†ç³»ç»Ÿåœ¨æ–°å»ºå’Œç¼–è¾‘æ—¶æ˜¯åœ¨ä¸åŒçš„è·¯ç”±ä¸‹è°ƒç”¨åŒä¸€ä¸ªè¯¦æƒ…é¡µç»„ä»¶æ¥å®ç°çš„ï¼Œæ‰€ä»¥åœ¨ç¼–è¾‘å’Œæ–°å»ºè¯·æ±‚å®Œæˆä¹‹åè¯¦æƒ…é¡µæ˜¯å¦ç›´æ¥å…³é—­è¿˜æ˜¯è®©ç”¨æˆ·æ‰‹åŠ¨å…³é—­æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œæ–°å»ºé¡µå¦‚æœç•™ç»™ç”¨æˆ·å¤„ç†ä¼šè¿ç»­åˆ›å»ºå¤šæ¡ç›¸åŒæ•°æ®çš„æƒ…å†µå‘ç”Ÿã€‚è€Œä¸”è¿ç»­æ‰“å¼€å¤šä¸ªé¡µé¢æ ‡ç­¾é¡µè¿èƒŒäº†å•é¡µé¢åº”ç”¨çš„åˆè¡·ï¼Œ åŸºäºè¿™äº›é—®é¢˜ï¼Œæˆ‘æ”¾å¼ƒäº†è¿™ç§æ–¹å¼ã€‚<br>åŸºäºvueæŠ€æœ¯æ ˆï¼Œåœ¨æ–°æ ‡ç­¾é¡µæ‰“å¼€è¯¦æƒ…é¡µä¸»è¦æœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼Œä¸€ç§æ˜¯ <code>router-link</code>æ ‡ç­¾åŠ <code>target=&quot;_blank&quot;</code>å±æ€§ï¼Œå…¶åŸç†æ˜¯<code>a</code>æ ‡ç­¾çš„<code>target</code>å±æ€§ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span><span class="attr">:to</span>=<span class="string">"&#123;name: 'detail'&#125;"</span><span class="attr">target</span>=<span class="string">"_blank"</span>&gt;</span><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>å¦ä¸€ç§æ–¹å¼æ˜¯jsæ§åˆ¶ï¼Œå…¶ç»‘å®šçš„DOMå…ƒç´ æ¸²æŸ“ä¹‹åä¸å†æ˜¯<code>a</code>æ ‡ç­¾ï¼Œè€Œæ˜¯ä¸€ä¸ª<code>button</code>ï¼Œé¡µé¢è·³è½¬ä¸»è¦æ˜¯åŸºäº<code>window</code>å¯¹è±¡çš„åŠŸèƒ½å®ç°çš„ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"handleToDetail(params)"</span>&gt;</span>detail<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span><span class="keyword">default</span>&#123;</span></span><br><span class="line">  methods: &#123;</span><br><span class="line"><span class="actionscript"><span class="comment">// å‚æ•°å¯ä»¥è‡ªå®šä¹‰,ä¸€èˆ¬åŒ…å«ä¸»é”®idç­‰æ€§è´¨çš„å‚æ•°</span></span></span><br><span class="line">    handleToDetail(params) &#123;</span><br><span class="line"><span class="actionscript"><span class="keyword">const</span> routerData = <span class="keyword">this</span>.$router.resolve(&#123;name: <span class="string">'detail'</span>, query: &#123;params: params&#125;&#125;)</span></span><br><span class="line"><span class="javascript"><span class="built_in">window</span>.open(routerData.href, <span class="string">"_blank"</span>)</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>å…¶ä¸­çš„<code>vue-router</code>ç‰¹æ€§ä¸å¤šè¯´ï¼Œå…·ä½“å¯ä»¥æŸ¥é˜…<a href="https://router.vuejs.org/zh/" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a>ã€‚</p><h2 id="queryæºå¸¦æŸ¥è¯¢å‚æ•°"><a href="#queryæºå¸¦æŸ¥è¯¢å‚æ•°" class="headerlink" title="queryæºå¸¦æŸ¥è¯¢å‚æ•°"></a>queryæºå¸¦æŸ¥è¯¢å‚æ•°</h2><p>å¦ä¸€ç§å®ç°æ–¹å¼æ˜¯åœ¨è·¯ç”±è·³è½¬æ—¶åœ¨è·¯ç”±çš„<code>query</code>ä¸­æŠŠå‚æ•°æºå¸¦è¿‡å»ï¼Œè¿”å›æ—¶å†å¸¦å›æ¥ï¼Œåˆ—è¡¨é¡µåœ¨<code>mounted</code>ç”Ÿå‘½å‘¨æœŸå†…å¯¹<code>query</code>è¿›è¡Œå¤„ç†ï¼Œå¦‚æœ<code>query</code>ä¸­æºå¸¦äº†æŸ¥è¯¢å‚æ•°åˆ™ä½¿ç”¨è¯¥æŸ¥è¯¢å‚å¯¹æ•°æ®è¿›è¡Œèµ‹å€¼ç„¶åæŸ¥è¯¢å³å¯ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form</span><span class="attr">:model</span>=<span class="string">"params"</span><span class="attr">inline</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-from-item</span><span class="attr">prop</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-input</span><span class="attr">v-model</span>=<span class="string">"params.title"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-from-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-from-item</span><span class="attr">prop</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-input</span><span class="attr">v-model</span>=<span class="string">"params.title"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-from-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-from-item</span><span class="attr">prop</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-input</span><span class="attr">v-model</span>=<span class="string">"params.title"</span>&gt;</span><span class="tag">&lt;/<span class="name">el-input</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-from-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"handleToDetail"</span>&gt;</span>detail<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span><span class="keyword">default</span> &#123;</span></span><br><span class="line">  data() &#123;</span><br><span class="line"><span class="actionscript"><span class="keyword">return</span> &#123;</span></span><br><span class="line">      params: &#123;</span><br><span class="line"><span class="actionscript">        id: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">        title: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">        desc: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">        imgUrl: <span class="string">''</span></span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line"><span class="actionscript"><span class="keyword">this</span>.getSearchQueryIfExists()</span></span><br><span class="line"><span class="actionscript"><span class="keyword">this</span>.handleSearch()</span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line"><span class="actionscript"><span class="comment">// è·¯ç”±è·³è½¬æ—¶æŠŠæœç´¢è¡¨å•å‚æ•°è½¬æ¢æˆå­—ç¬¦ä¸²èµ‹å€¼ç»™searchQuyeryæºå¸¦è¿‡å» ï¼Œè·³è½¬å›æ¥æ—¶ç›´æ¥å¸¦å›æ¥</span></span></span><br><span class="line">    handleToDetail() &#123;</span><br><span class="line"><span class="javascript"><span class="keyword">const</span> params = <span class="built_in">JSON</span>.stringify(<span class="keyword">this</span>.params)</span></span><br><span class="line"><span class="actionscript"><span class="keyword">this</span>.$router.push(&#123;name: <span class="string">'detail'</span>, query: &#123; id: <span class="keyword">this</span>.params.id, searchQuyery: params &#125;&#125;)</span></span><br><span class="line">    &#125;,</span><br><span class="line"><span class="actionscript"><span class="comment">// è¿›å…¥åˆ—è¡¨æ—¶ï¼Œå¦‚æœqueryä¸­å«æœ‰searchQuyeryå­—æ®µï¼Œåˆ™è½¬æ¢æˆå¯¹è±¡èµ‹å€¼ç»™æŸ¥è¯¢å¯¹è±¡å‚æ•°å³å¯</span></span></span><br><span class="line">    getSearchQueryIfExists() &#123;</span><br><span class="line"><span class="actionscript"><span class="keyword">const</span> &#123; query = &#123;&#125; &#125; = <span class="keyword">this</span>.$router.query</span></span><br><span class="line"><span class="actionscript"><span class="keyword">if</span>(query.hasOwnProperty(<span class="string">'searchQuyery'</span>)) &#123;</span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> stashQuery = <span class="built_in">JSON</span>.parse(query.searchQuyery)</span></span><br><span class="line"><span class="actionscript"><span class="keyword">this</span>.params = stashQuery</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"><span class="actionscript"><span class="comment">// å‘é€æŸ¥è¯¢httpè¯·æ±‚</span></span></span><br><span class="line">  handleSearch() &#123;</span><br><span class="line"><span class="actionscript"><span class="comment">// ã€‚ã€‚ã€‚ã€‚</span></span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>è¿™ç§å®ç°æ–¹å¼å¯ä»¥åŸºæœ¬æ»¡è¶³è¦æ±‚ï¼Œåœ¨é¡µé¢è¾ƒå°‘æˆ–è€…é¡¹ç›®ä¸­æ²¡æœ‰å¼•å…¥vuexæ—¶å¯ä»¥ä½¿ç”¨ã€‚ç¼ºç‚¹æ˜¯éœ€è¦ç¼“å­˜çš„é¡µé¢è¾ƒå¤šæ—¶ï¼Œéœ€è¦é‡å¤è¿›è¡Œå¤„ç†ï¼Œæ¯”è¾ƒç¹çã€‚</p><h2 id="ä½¿ç”¨vuexç¼“å­˜æŸ¥è¯¢å‚æ•°"><a href="#ä½¿ç”¨vuexç¼“å­˜æŸ¥è¯¢å‚æ•°" class="headerlink" title="ä½¿ç”¨vuexç¼“å­˜æŸ¥è¯¢å‚æ•°"></a>ä½¿ç”¨vuexç¼“å­˜æŸ¥è¯¢å‚æ•°</h2><p>å¦‚æœéœ€è¦ç¼“å­˜çš„é¡µé¢è¾ƒå¤šï¼Œä¸”ç³»ç»Ÿä¸­å·²ç»å¼•å…¥äº†<code>vuex</code>ï¼Œåˆ™å¯ä»¥ä½¿ç”¨<code>vuex</code>ç¼“å­˜çš„æ–¹å¼æ¥å®ç°æŸ¥è¯¢å‚æ•°ç¼“å­˜ã€‚<br>é¦–å…ˆéœ€è¦æŠŠæŸ¥è¯¢å‚æ•°å†™å…¥<code>vuex</code>ä¸­, åœ¨<code>store</code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªç”¨äºç¼“å­˜è·¯ç”±æŸ¥è¯¢å‚æ•°çš„æ–‡ä»¶ï¼Œä¾‹å¦‚<code>routerCache.js</code><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// routerCache.js</span></span><br><span class="line"><span class="keyword">const</span> routeCache = &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    cachedRoutes: &#123;&#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    SET_CACHED_ROUTES: <span class="function">(<span class="params">state, route</span>) =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">const</span> &#123; name, query &#125; = route</span><br><span class="line">      state.cachedRoutes[name] = query</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    setCachedRoutes(&#123; commit &#125;, route) &#123;</span><br><span class="line">      commit(<span class="string">'SET_CACHED_ROUTES'</span>, route)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span><span class="keyword">default</span> routeCache</span><br></pre></td></tr></table></figure></p><p>åœ¨<code>getter</code>ä¸­å¼•å…¥ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// getter.js</span></span><br><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">  cachedRoutes: <span class="function"><span class="params">state</span> =&gt;</span> state.routeCache.cachedRoutes,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span><span class="keyword">default</span> getters</span><br></pre></td></tr></table></figure></p><p>å…¶ä¸­ï¼Œ<code>name</code>æ˜¯è·¯ç”±çš„<code>name</code>å±æ€§å€¼ï¼ŒæŸ¥è¯¢å‚æ•°<code>query</code>ä¿å­˜åœ¨<code>name</code>ä¸­ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨è·¯ç”±çš„<code>path</code>åšä¸ºé”®ï¼ŒåŒºåˆ«åœ¨äºæ˜¯å¦åŒºåˆ†åŠ¨æ€è·¯ç”±ã€‚<code>query</code>å¯ä»¥æ˜¯å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯JSONåŒ–çš„å­—ç¬¦ä¸²ï¼Œå»ºè®®ä½¿ç”¨JSONå­—ç¬¦ä¸²è¿›è¡Œä¿å­˜ã€‚<br>æ¥ä¸‹æ¥æ˜¯åœ¨æŸ¥è¯¢æ—¶è°ƒç”¨<code>actions</code>ä¸­çš„<code>setCachedRoutes()</code>æ–¹æ³•ä¿å­˜é¡µé¢æŸ¥è¯¢å‚æ•°å’Œè¿›å…¥é¡µé¢åè·å–<code>getter</code>ä¸­ç¼“å­˜çš„å€¼ã€‚è¿™éƒ¨åˆ†æ¶‰åŠ<code>vuex</code>çš„ä½¿ç”¨æ–¹å¼ï¼Œä¸å¤ªæ¸…æ¥šå¯ä»¥æŸ¥é˜…<a href="https://vuex.vuejs.org/zh/guide/" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a>ã€‚è¿™éƒ¨åˆ†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>mixin</code>è¿›è¡Œå°è£…ï¼Œæš´éœ²å‡ºä¸¤ä¸ªæ–¹æ³•æ¥ä¿å­˜å’Œè·å–ç¼“å­˜å³å¯ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mixins/queryCache.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapActions, mapGetters &#125; <span class="keyword">from</span><span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span><span class="keyword">default</span> &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">      searchKey: <span class="string">''</span><span class="comment">// æ¯ä¸ªé¡µé¢æŸ¥è¯¢è¡¨å•`model`ç»‘å®šçš„å€¼å¯èƒ½ä¸ä¸€æ ·ï¼Œä½¿ç”¨æ­¤å˜é‡æ¥æ¥æ”¶æŸ¥è¯¢å¯¹è±¡çš„ key å€¼</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    ...mapGetters([<span class="string">'cachedRoutes'</span>])</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    ...mapActions([<span class="string">'setCachedRoutes'</span>]),</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è®¾ç½®è·¯ç”±ç¼“å­˜ç›¸å…³é…ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: queryKey é¡µé¢æœç´¢è¡¨å•å¯¹è±¡çš„key</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    setSearchQuery(queryKey) &#123;</span><br><span class="line"><span class="keyword">const</span> name = <span class="keyword">this</span>.$route.name</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span><span class="keyword">this</span>.setCachedRoutes === <span class="string">'function'</span>) &#123;</span><br><span class="line"><span class="keyword">this</span>.setCachedRoutes(&#123; <span class="attr">name</span>: name, <span class="attr">query</span>: <span class="built_in">JSON</span>.stringify(<span class="keyword">this</span>[queryKey]) &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è·å–è·¯ç”±ç¼“å­˜ç›¸å…³é…ç½®</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span>: queryKey é¡µé¢æœç´¢è¡¨å•å¯¹è±¡çš„key</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    getSearchQuery(queryKey) &#123;</span><br><span class="line"><span class="comment">// å¦‚æœä½¿ç”¨ è·¯ç”± çš„ nameå±æ€§ç¼“å­˜çš„è¯ï¼Œè¿™é‡Œå°±å–å½“å‰é¡µé¢è·¯ç”±çš„ nameå€¼ï¼Œå¦‚æœä½¿ç”¨äº† path ç¼“å­˜æ›¿æ¢å³å¯</span></span><br><span class="line"><span class="keyword">const</span> name = <span class="keyword">this</span>.$route.name</span><br><span class="line"><span class="keyword">const</span> cachedRoutes = <span class="keyword">this</span>.cachedRoutes || &#123;&#125;</span><br><span class="line"><span class="keyword">if</span> (cachedRoutes.hasOwnProperty(name)) &#123;</span><br><span class="line"><span class="keyword">const</span> target = <span class="built_in">JSON</span>.parse(cachedRoutes[name])</span><br><span class="line"><span class="keyword">this</span>[queryKey] = <span class="built_in">Object</span>.assign(&#123;&#125;, targetï¼‰</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¦‚æœéœ€è¦ç¼“å­˜æŸ¥è¯¢å‚æ•°å¯¹è±¡ä¹‹å¤–çš„æ–¹æ³•ï¼Œåˆ™éœ€è¦åœ¨<code>getSearchQuery</code>å’Œ<code>setSearchQuery</code>ä¸­æ·»åŠ ç‰¹æ®Šæƒ…å†µä¸‹çš„åˆ¤æ–­é€»è¾‘å³å¯ã€‚å…¶ä¸­<code>setSearchQuery</code>å¯ä»¥åœ¨ç‚¹å‡»æœç´¢æŒ‰é’®æˆ–å‘é€æŸ¥è¯¢è¯·æ±‚æ—¶è¿›è¡Œè°ƒç”¨ï¼ŒåŒºåˆ«åœ¨æ˜¯å¦éœ€è¦ç¼“å­˜åˆ†é¡µæŸ¥è¯¢ç›¸å…³å‚æ•°ã€‚<code>getSearchQuery</code>å¿…é¡»åœ¨<code>created</code>æˆ–<code>mounted</code>ç”Ÿå‘½å‘¨æœŸä¸­æ‰ç”¨ï¼Œå°†ç¼“å­˜çš„æ•°æ®èµ‹å€¼ç»™æŸ¥è¯¢å¯¹è±¡ä¹‹åè°ƒç”¨é¡µé¢çš„æŸ¥è¯¢è¯·æ±‚ï¼Œè¿™æ ·å°±å®ç°äº†è·¯ç”±è·³è½¬çš„æŸ¥è¯¢æ•°æ®ç¼“å­˜ã€‚<br>é¡µé¢ä¸­è°ƒç”¨æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> CacheQuery <span class="keyword">from</span><span class="string">'../mixins/queryCache'</span><span class="comment">// å…·ä½“è·¯å¾„æŒ‰é¡¹ç›®å®é™…è·¯å¾„</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span><span class="keyword">default</span> &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    reutrn &#123;</span><br><span class="line"><span class="comment">// æŸ¥è¯¢è¡¨å•æ•°æ®å¯¹è±¡</span></span><br><span class="line">      params: &#123;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;ï¼Œ</span><br><span class="line">  mounted() &#123;</span><br><span class="line"><span class="comment">// è·å–vuexä¸­çš„ç¼“å­˜ï¼Œèµ‹å€¼</span></span><br><span class="line"><span class="keyword">this</span>.getSearchQuery(<span class="string">'params'</span>)</span><br><span class="line"><span class="comment">// ç„¶åæŒ‰ç¼“å­˜çš„å‚æ•°æŸ¥è¯¢</span></span><br><span class="line"><span class="keyword">this</span>.getList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line"><span class="comment">// æœç´¢ç‚¹å‡»äº‹ä»¶ç›‘å¬</span></span><br><span class="line">    handleSearch() &#123;</span><br><span class="line"><span class="comment">// ç¼“å­˜æœç´¢å‚æ•°</span></span><br><span class="line"><span class="keyword">this</span>.setSearchQuery(<span class="string">'params'</span>)</span><br><span class="line"><span class="comment">// æŸ¥è¯¢æ•°æ®</span></span><br><span class="line"><span class="keyword">this</span>.getList()</span><br><span class="line">    &#125;,</span><br><span class="line"><span class="keyword">async</span> getList() &#123;</span><br><span class="line"><span class="comment">// è·å–æ•°æ®å‘é€è¯·æ±‚</span></span><br><span class="line"><span class="keyword">let</span> resp = <span class="keyword">await</span> axios.get(<span class="string">'/api/get/list'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœè¦ç¼“å­˜åˆ†é¡µå‚æ•°ï¼Œå¯èƒ½ä¼šå‘ç°ä¸€ä¸ªé—®é¢˜ã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥è¯¢å‚æ•°å¯¹è±¡:</span></span><br><span class="line">searchParams: &#123;</span><br><span class="line">  id: <span class="string">''</span>,</span><br><span class="line">  title: <span class="string">''</span>,</span><br><span class="line">  status: <span class="string">''</span>,</span><br><span class="line">  current_page: <span class="number">1</span>, <span class="comment">// å½“å‰é¡µ</span></span><br><span class="line">  page_size: <span class="number">10</span>ï¼Œ <span class="comment">// æ¯é¡µå¤šå°‘æ•°æ®</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>åˆ†é¡µç»„ä»¶ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">el-pagination</span></span></span><br><span class="line"><span class="tag"><span class="attr">:total</span>=<span class="string">"page.total"</span></span></span><br><span class="line"><span class="tag"><span class="attr">:current-page</span>=<span class="string">"searchParams.page_index"</span></span></span><br><span class="line"><span class="tag">  @<span class="attr">current-change</span>=<span class="string">"handleCurrentChange"</span>/&gt;</span></span><br></pre></td></tr></table></figure></p><p>å¦‚æœæŸ¥è¯¢å‚æ•°ä¸­åŒ…å«äº†åˆ†é¡µç»„ä»¶ä¸­çš„ä¸¤ä¸ªå‚æ•°ï¼Œåœ¨è°ƒç”¨äº†<code>getSearchQuery</code>æ–¹æ³•å¯¹å…¶è¿›è¡Œèµ‹å€¼ä¹‹åï¼Œå³ä¾¿å‘é€è¯·æ±‚æ—¶çš„<code>current_page</code>æ˜¯2ï¼Œ<code>el-pagination</code>ç»„ä»¶ä¸­æ˜¾ç¤ºçš„ä»ç„¶æ˜¯åœ¨é¡µé¢çš„<code>data</code>ä¸­åˆå§‹åŒ–æ—¶çš„é»˜è®¤å€¼ï¼Œç ”ç©¶äº†elementåˆ†é¡µç»„ä»¶çš„æºç ï¼Œå‘ç°å…¶æ”¹å˜<code>current-page</code>åªèƒ½é€šè¿‡ç›‘å¬<code>current-change</code>æ¥å®ç°ï¼Œè€Œåœ¨ä¸Šæ–‡ä¸­ç¼“å­˜äº†æ•°æ®ä¹‹åç›´æ¥èµ‹å€¼æ˜¯æ— æ³•å®ç°å“åº”çš„, å¦‚ä¸‹å›¾:</p><p><img style="height: 200px; text-align: left" src="https://camo.githubusercontent.com/4374fd8950b1b788fe9642b70b36e9e9ef2b7627/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f363731393838352d373435666433626362366637306337302e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430"></p><p>åˆ†äº«å‘Šä¸€æ®µè½å•¦ï¼Œå¦‚æœæ‚¨æœ‰å…¶ä»–çš„å®ç°æ–¹å¼å¯ä»¥ç•™è¨€äº¤æµå•Šï¼Œæ„Ÿè°¢ï¼</p>]]></content><summary type="html">
    
      vue + elementåå°ç®¡ç†ç³»ç»Ÿï¼Œæœç´¢è¡¨è¾¾ç¼“å­˜å®ç°æ–¹æ¡ˆï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒé¡µé¢è·³è½¬ä¹‹åéœ€è¦é‡æ–°å¡«å†™å¤§é‡æœç´¢è¡¨å•äº†
    
    </summary><category term="å‰ç«¯" scheme="https://mhynet.cn/categories/%E5%89%8D%E7%AB%AF/"/><category term="javascript" scheme="https://mhynet.cn/tags/javascript/"/><category term="vue" scheme="https://mhynet.cn/tags/vue/"/><category term="element" scheme="https://mhynet.cn/tags/element/"/></entry><entry><title>pynongoä½¿ç”¨ç¬”è®°</title><link href="https://mhynet.cn/pynongo-notes.html"/><id>https://mhynet.cn/pynongo-notes.html</id><published>2019-06-11T03:38:12.000Z</published><updated>2020-01-13T04:05:08.199Z</updated><content type="html"><![CDATA[<p>å‰æ®µæ—¶é—´å­¦ä¹ äº†pythonçˆ¬è™«ï¼Œç„¶åçˆ¬å–äº†å¿…åº”å£çº¸ã€æ‹‰é’©ã€å°çº¢å”‡è§†é¢‘å’Œè¯„è®ºç­‰ï¼Œå…¶ä¸­ä¹Ÿä½¿ç”¨äº†mongodbæ•°æ®åº“å­˜å‚¨æ•°æ®ã€‚</p><p>å·¥ä½œç”µè„‘å’Œå®¶é‡Œç”µè„‘éƒ½å®ç°äº†å£çº¸æ¯åˆ†é’Ÿå®æ—¶æ›´æ–°ï¼Œæµ·é‡çš„èƒŒæ™¯å›¾ç‰‡ï¼ŒåŸºæœ¬ä¸é‡å¤ï¼Œæ¯å¤©ä¸­åˆä¼‘æ¯æ—¶å–œæ¬¢ç›¯ç€å±å¹•å‘å‘†ï¼Œå“ˆå“ˆğŸ˜ã€‚å…¶ä¸­é™¤äº†ç”¨åˆ°çš„é™¤äº†åŸºæœ¬çš„çˆ¬è™«è‡³å°‘ï¼Œè¿˜æœ‰pymongoå°†çˆ¬å–çš„æ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“ï¼Œä¸ä¼šå› ä¸ºå®˜æ–¹æ›´æ–°è€Œä¸¢å¤±æ—©æœŸçš„å›¾ç‰‡ä¿¡æ¯ï¼Œä¹Ÿç”¨åˆ°äº†shellè„šæœ¬å’Œcrontabå®šæ—¶ä»»åŠ¡ï¼Œæ¯å‘¨ä¸€ä¸­åˆå®šæ—¶çˆ¬å–ï¼Œç„¶åä¸‹è½½å›¾ç‰‡ï¼Œéå¸¸niceå•Šã€‚<br><a id="more"></a><br>æ›´å¤šè„šæœ¬å¯ä»¥å»<a href="https://github.com/mhy-web/python_demo" target="_blank" rel="noopener">github</a>çœ‹åˆ°ï¼Œè‡ªåŠ¨æ‰§è¡Œçš„shellè„šæœ¬ä¸ºé¡¹ç›®ç›®å½•ä¸‹çš„ <code>wallpaper.sh</code>æ–‡ä»¶ã€‚</p><p>è¿™é‡Œè®°å½•ä¸€ä¸‹pymongoä½¿ç”¨ç¬”è®°ï¼Œé¿å…ä¸‹æ¬¡ä½¿ç”¨æ—¶å†å»æ‰¾æ–‡æ¡£ã€‚<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å¼•å…¥pymongo</span></span><br><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºè¿æ¥</span></span><br><span class="line">client = pymongo.Conection(<span class="string">'127.0.0.1'</span>, <span class="number">27017</span>)</span><br><span class="line">client = pymongo.Conection(host=<span class="string">'127.0.0.1'</span>, port=<span class="number">27017</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿æ¥æ•°æ®åº“</span></span><br><span class="line">db = client.bing</span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line">db = client[<span class="string">'bing'</span>]</span><br><span class="line"><span class="comment"># å…¶ä¸­çš„`bing`æ˜¯æ‰€åˆ›å»ºçš„æ•°æ®åº“çš„åç§°ã€‚</span></span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line">dbName = <span class="string">'xhc'</span></span><br><span class="line">db = client[dbName]</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿æ¥é›†åˆ</span></span><br><span class="line">collection = db.video</span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line">collection = db[<span class="string">'video'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥çœ‹å…¨éƒ¨é›†åˆåç§°</span></span><br><span class="line">db.collection_names()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŸ¥æ‰¾é›†åˆçš„è®°å½•</span></span><br><span class="line">db.bing.find()</span><br><span class="line"><span class="keyword">for</span> doc <span class="keyword">in</span> db.test.find():</span><br><span class="line">  print(doc)</span><br><span class="line">db.bing.find_one(&#123;x: <span class="number">1</span>&#125;)</span><br><span class="line">db.bing.find_mangy(&#123;&#125;)</span><br><span class="line"></span><br><span class="line">db.bing.count_document(&#123;x: <span class="number">1</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ’å…¥æ•°æ®</span></span><br><span class="line">db.bing.insert_one(&#123;x: <span class="number">1</span>&#125;)</span><br><span class="line">db.bing.insert_many([&#123;<span class="string">'x'</span>: i&#125; <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>)])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›¿æ¢</span></span><br><span class="line">db.bing.replace_one(&#123;x: <span class="number">1</span>&#125;, &#123;y: <span class="number">1</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°</span></span><br><span class="line"><span class="comment"># update åé¢çš„æ“ä½œç¬¦åŒ mongodb åŸç”Ÿçš„æ“ä½œç¬¦</span></span><br><span class="line">db.bing.update_one(&#123;x: <span class="number">1</span>&#125;, &#123;<span class="string">'$inc'</span>: &#123;x: <span class="number">3</span>&#125;&#125;)</span><br><span class="line">db.bing.find_one_and_update(&#123;<span class="string">'_id'</span>: <span class="number">665</span>&#125;, &#123;<span class="string">'$inc'</span>: &#123;<span class="string">'count'</span>: <span class="number">1</span>&#125;, <span class="string">'$set'</span>: &#123;<span class="string">'done'</span>: <span class="literal">True</span>&#125;&#125;)</span><br><span class="line">db.bing.find_one_and_update(&#123;<span class="string">'_exists'</span>: <span class="literal">False</span>&#125;, &#123;<span class="string">'$inc'</span>: &#123;<span class="string">'count'</span>: <span class="number">1</span>&#125;&#125;)</span><br><span class="line">db.bing.find_one_and_update(</span><br><span class="line">  &#123; <span class="string">'_id'</span>: <span class="string">'userid'</span> &#125;,</span><br><span class="line">  &#123; <span class="string">'$inc'</span>: &#123;<span class="string">'seq'</span>: <span class="number">1</span>&#125;&#125;,</span><br><span class="line">  projection=&#123;<span class="string">'seq'</span>: <span class="literal">True</span>, <span class="string">'_id'</span>: <span class="literal">False</span>&#125;,</span><br><span class="line">  upsert=<span class="literal">True</span>,</span><br><span class="line">  return_document=ReturnDocument.AFTER</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤</span></span><br><span class="line">db.bing.delete_one(&#123;x: <span class="number">1</span>&#125;)</span><br><span class="line">db.bing.delete_many(&#123;<span class="string">'x'</span>: <span class="number">1</span>&#125;)</span><br><span class="line">db.bing.find_one_and_delete(&#123;<span class="string">'x'</span>: <span class="number">1</span>&#125;)</span><br><span class="line">db.bing.find_one_and_delete(&#123;<span class="string">'x'</span>: <span class="number">1</span>&#125;, sort=[(<span class="string">'_id'</span>, pymongo.DESCENDING)])</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°å»ºç´¢å¼•</span></span><br><span class="line">db.bing.create_index(<span class="string">"mike"</span>)</span><br></pre></td></tr></table></figure></p><p>æ›´å¤šå†…å®¹å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚<br>å‚è€ƒæ–‡æ¡£ï¼š <a href="http://api.mongodb.com/python/current/api/pymongo/collection.html#pymongo.collection.Collection.delete_one" target="_blank" rel="noopener">http://api.mongodb.com/python/current/api/pymongo/collection.html#pymongo.collection.Collection.delete_one</a></p>]]></content><summary type="html">
    
      ä½¿ç”¨pymongoæ“ä½œæ•°æ®åº“ï¼Œpythonçˆ¬è™«å¸¸ç”¨æ•°æ®åº“æ“ä½œè¯­å¥
    
    </summary><category term="åç«¯" scheme="https://mhynet.cn/categories/%E5%90%8E%E7%AB%AF/"/><category term="python" scheme="https://mhynet.cn/tags/python/"/><category term="mongodb" scheme="https://mhynet.cn/tags/mongodb/"/></entry><entry><title>elementUIè¡¨å•ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶å¹¶è·å–å­ç»„ä»¶éªŒè¯</title><link href="https://mhynet.cn/elementUI-component-validate.html"/><id>https://mhynet.cn/elementUI-component-validate.html</id><published>2019-04-20T03:04:54.000Z</published><updated>2020-01-09T06:58:58.346Z</updated><content type="html"><![CDATA[<p>æœ€è¿‘å·¥ä½œä¸­å¾ˆå¤šæ¬¡é‡åˆ°ä¸€ç§æƒ…å†µï¼Œè¡¨å•å…ƒç´ ä¸­æŸä¸ªå­—æ®µæ˜¯å¯¹è±¡ç»„æˆçš„æ•°ç»„ï¼Œéœ€è¦ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶æ¥éå†æ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„å…ƒç´ å¯¹è±¡ä¸­çš„è®¸å¤šå­—æ®µéœ€è¦å•ç‹¬å°è£…æˆè‡ªå®šä¹‰ç»„ä»¶ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨<code>v-model</code>æ–¹å¼æ¥å®ç°å“åº”å¼çš„è°ƒç”¨ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥åˆ©äºç»„ä»¶ç‹¬ç«‹è¿è¡Œç¯å¢ƒçš„ç‰¹æ€§ï¼Œæœ‰æ•ˆçš„åŒºåˆ†äº†çˆ¶ç»„ä»¶è¡¨å•ä¸­æ•°ç»„å­—æ®µä¸‹å„ä¸ªå¯¹è±¡çš„ç‹¬ç«‹ã€‚<br><a id="more"></a></p><p>å‡å¦‚çˆ¶ç»„ä»¶ä¸­çš„è¡¨å•æ•°æ®æ˜¯è¿™ç§æ ¼å¼çš„ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">  data() &#123;</span><br><span class="line"><span class="actionscript"><span class="keyword">return</span> &#123;</span></span><br><span class="line">      info: &#123;</span><br><span class="line"><span class="actionscript">        id: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">        start_time: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">        end_time: <span class="string">''</span>,</span></span><br><span class="line">        items: [&#123;</span><br><span class="line"><span class="actionscript">          title: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">          desc: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">          type: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">          img_url: <span class="string">''</span></span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line"><span class="actionscript">          title: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">          desc: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">          type: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">          img_url: <span class="string">''</span></span></span><br><span class="line">        &#125;]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>è¦ä½¿ç”¨elementUIçš„ <code>form</code>ç»„ä»¶æ¥å®ç°è¡¨å•çš„æ•°æ®æ¸²æŸ“ï¼Œå…¶ä¸­itemséƒ¨åˆ†æœ€åˆç†çš„æ–¹å¼æ˜¯æŠ½ç¦»å‡ºå•ç‹¬çš„ç»„ä»¶ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­éå†è¯¥æ•°ç»„å­—æ®µï¼Œæ¯ä¸€é¡¹å•ç‹¬æ¸²æŸ“è¯¥å­ç»„ä»¶ã€‚</p><h2 id="å­ç»„ä»¶å®šä¹‰"><a href="#å­ç»„ä»¶å®šä¹‰" class="headerlink" title="å­ç»„ä»¶å®šä¹‰"></a>å­ç»„ä»¶å®šä¹‰</h2><p>å‡è®¾å­ç»„ä»¶è¿™æ ·å®šä¹‰ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form</span><span class="attr">ref</span>=<span class="string">"item"</span><span class="attr">:model</span>=<span class="string">"content"</span><span class="attr">:rules</span>=<span class="string">"rules"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span><span class="attr">prop</span>=<span class="string">"title"</span><span class="attr">label</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-input</span><span class="attr">v-model</span>=<span class="string">"content.title"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span><span class="attr">prop</span>=<span class="string">"desc"</span><span class="attr">label</span>=<span class="string">"desc"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-input</span><span class="attr">v-model</span>=<span class="string">"content.desc"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span><span class="attr">prop</span>=<span class="string">"type"</span><span class="attr">label</span>=<span class="string">"type"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-input</span><span class="attr">v-model</span>=<span class="string">"content.type"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span><span class="attr">prop</span>=<span class="string">"img_url"</span><span class="attr">label</span>=<span class="string">"img"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-input</span><span class="attr">v-model</span>=<span class="string">"content.img_url"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span><span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">'Child'</span>,</span></span><br><span class="line">  props: &#123;</span><br><span class="line">    value: &#123;</span><br><span class="line"><span class="javascript">      type: <span class="built_in">Object</span>,</span></span><br><span class="line"><span class="actionscript"><span class="keyword">default</span>() &#123;</span></span><br><span class="line"><span class="actionscript"><span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">            title: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">            desc: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">            type: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">            img_url: <span class="string">''</span></span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    index: &#123;</span><br><span class="line"><span class="javascript">      type: <span class="built_in">Number</span>,</span></span><br><span class="line"><span class="actionscript"><span class="keyword">default</span>: <span class="literal">null</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line"><span class="actionscript"><span class="keyword">return</span> &#123;</span></span><br><span class="line">      content: &#123; ...this.value &#125;,</span><br><span class="line">      rules: &#123;</span><br><span class="line"><span class="actionscript">        title: [&#123;required: <span class="literal">true</span>, trigger: <span class="string">'blur'</span>&#125;],</span></span><br><span class="line"><span class="actionscript">        desc: [&#123;required: <span class="literal">true</span>, trigger: <span class="string">'blur'</span>&#125;],</span></span><br><span class="line"><span class="actionscript">        type: [&#123;required: <span class="literal">true</span>, trigger: <span class="string">'blur'</span>&#125;],</span></span><br><span class="line"><span class="actionscript">        img_url: [&#123;required: <span class="literal">true</span>, trigger: <span class="string">'blur'</span>&#125;],</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line"><span class="actionscript"><span class="comment">// å®šä¹‰è¯¥å˜é‡æ˜¯ä¸ºäº†ä¾¿äºç›‘å¬å¯¹è±¡çš„å˜åŒ–ï¼Œç‰¹åˆ«æ˜¯å¤šå±‚åµŒå¥—çš„å¯¹è±¡éå¸¸æœ‰æ•ˆ</span></span></span><br><span class="line">    contentStr() &#123;</span><br><span class="line"><span class="javascript"><span class="keyword">return</span><span class="built_in">JSON</span>.stringify(<span class="keyword">this</span>.content)</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line"><span class="actionscript"><span class="comment">// ç›‘å¬å¯¹è±¡æ¯ä¸ªå­—æ®µçš„æ”¹å˜ï¼Œå¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨deepå±æ€§ï¼Œå…·ä½“å¯ä»¥æŸ¥é˜…vueæ–‡æ¡£</span></span></span><br><span class="line">    contentStr(value) &#123;</span><br><span class="line"><span class="actionscript"><span class="keyword">this</span>.update()</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    update() &#123;</span><br><span class="line"><span class="actionscript"><span class="comment">// input äº‹ä»¶çˆ¶ç»„ä»¶å¯ä»¥ç›‘å¬åˆ°ï¼Œå…·ä½“ä¸‹æ–‡ä¼šä»‹ç»ï¼Œè¿™é‡Œæ˜¯æŠŠå­ç»„ä»¶çš„å˜æ›´é€šè¿‡äº‹ä»¶å‘Šè¯‰çˆ¶ç»„ä»¶ï¼Œå®ç°å­ç»„ä»¶å‘çˆ¶ç»„ä»¶çš„æ•°æ®ä¼ é€’</span></span></span><br><span class="line"><span class="actionscript"><span class="keyword">this</span>.$emit(<span class="string">'input'</span>, <span class="keyword">this</span>.content)</span></span><br><span class="line">    &#125;,</span><br><span class="line">    formValidate() &#123;</span><br><span class="line"><span class="javascript"><span class="keyword">let</span> flag = <span class="literal">false</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">this</span>.$refs[<span class="string">'item'</span>].validate(<span class="function"><span class="params">valid</span> =&gt;</span> &#123;</span></span><br><span class="line">        flag = valid</span><br><span class="line"><span class="actionscript"><span class="comment">// å¦‚æœéœ€è¦è¿›è¡Œä¿¡æ¯æç¤º</span></span></span><br><span class="line">        if (!valid) &#123;</span><br><span class="line"><span class="javascript"><span class="keyword">this</span>.$message(<span class="string">`ç¬¬<span class="subst">$&#123;index&#125;</span>æ¡æ•°æ®æœªå¡«å†™å®Œ!`</span>)</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line"><span class="actionscript"><span class="keyword">return</span> flag</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>è‡ªå®šä¹‰ç»„ä»¶ä¸­propsä¸­çš„valueå±æ€§æ˜¯vueé»˜è®¤çš„ï¼Œå¯ä»¥æ¥æ”¶è°ƒç”¨æ—¶ç»‘å®šåœ¨<code>v-model</code>ä¸Šçš„å±æ€§ï¼Œå­ç»„ä»¶ä¸­ç»™<code>value</code>è®¾ç½®é»˜è®¤å€¼å¯ä»¥é¿å…ä¸€äº›åˆå§‹åŒ–æ—¶ç¼ºå°‘å­—æ®µçš„æŠ¥é”™ã€‚<br>ä¸ºäº†è®©<code>v-model</code>æ­£å¸¸å·¥ä½œï¼Œè¿™ä¸ªç»„ä»¶å†…å¿…é¡»ï¼š</p><ul><li>å°†å…¶<code>value</code>ç‰¹æ€§ç»‘å®šåˆ°ä¸€ä¸ªåä¸º<code>value</code>çš„propä¸Š</li><li>å°†å…¶<code>input</code>äº‹ä»¶è§¦å‘æ—¶ï¼Œå°†æ–°çš„å€¼é€šè¿‡è‡ªå®šä¹‰çš„<code>input</code>äº‹ä»¶æŠ›å‡º<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span><span class="attr">v-model</span>=<span class="string">"title"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ç­‰ä»·äº --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span><span class="attr">v-bind:value</span>=<span class="string">"title"</span><span class="attr">v-on:input</span>=<span class="string">"title = $event.target.value"</span>/&gt;</span></span><br></pre></td></tr></table></figure></li></ul><p>å­ç»„ä»¶éœ€è¦å®æ—¶çš„æŠŠæ•°æ®çš„å˜åŒ–å‘Šè¯‰çˆ¶ç»„ä»¶ï¼Œæ‰€ä»¥éœ€è¦wathæ•°æ®çš„å˜åŒ–ï¼Œå¦‚æœä¼ ç»™å­ç»„ä»¶çš„æ•°æ®åªæ˜¯ç®€å•çš„å¯¹è±¡ç±»å‹ï¼Œå³å¯¹è±¡çš„å­—æ®µéƒ½æ˜¯ç®€å•ç±»å‹ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨vueä¸­watchçš„é«˜çº§ç”¨æ³•ï¼Œ<br>å®šä¹‰handleræ–¹æ³•ï¼Œä½¿ç”¨immediaateå’Œdeepå±æ€§ï¼Œå…·ä½“å¯ä»¥å‚è€ƒ<a href="https://juejin.im/post/5ae91fa76fb9a07aa7677543" target="_blank" rel="noopener">Vue.jsä¸­ watch çš„é«˜çº§ç”¨æ³•</a>,æ›´æ ‡å‡†çš„ä½¿ç”¨æ–¹å¼å¯ä»¥æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ã€‚åœ¨æœ¬æ–‡ä¾‹å­ä¸­å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">  watch: &#123;</span><br><span class="line">    content:&#123;</span><br><span class="line">      handler(newVal, oldVal) &#123;</span><br><span class="line"><span class="actionscript"><span class="keyword">this</span>.$emit(<span class="string">'input'</span>, <span class="keyword">this</span>.content)</span></span><br><span class="line">      &#125;,</span><br><span class="line"><span class="actionscript">      deep: <span class="literal">true</span><span class="comment">// deepå±æ€§é»˜è®¤ä¸ºfalse, è¡¨ç¤ºååˆ†æ·±åº¦ç›‘å¬</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>ä»‹ç»å®Œäº†å­ç»„ä»¶ä¸­æ•°æ®çš„å¤„ç†ï¼Œæ¥ä¸‹æ¥è¯´ä¸€ä¸‹çˆ¶ç»„ä»¶ä¸­å¦‚ä½•ä½¿ç”¨ã€‚</p><h2 id="çˆ¶ç»„ä»¶è°ƒç”¨è‡ªå®šä¹‰ç»„ä»¶"><a href="#çˆ¶ç»„ä»¶è°ƒç”¨è‡ªå®šä¹‰ç»„ä»¶" class="headerlink" title="çˆ¶ç»„ä»¶è°ƒç”¨è‡ªå®šä¹‰ç»„ä»¶"></a>çˆ¶ç»„ä»¶è°ƒç”¨è‡ªå®šä¹‰ç»„ä»¶</h2><p>å‰é¢å·²ç»å®šä¹‰äº†è‡ªå®šä¹‰ç»„ä»¶ï¼Œå¯ä»¥æ”¯æŒæ•°æ®çš„åŒå‘ç»‘å®šï¼Œçˆ¶ç»„ä»¶è°ƒç”¨è‡ªå®šä¹‰å­ç»„ä»¶æ—¶å¯ä»¥åƒelementUIä¸­çš„è¡¨å•ç»„ä»¶ä¸€æ ·ä½¿ç”¨ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form</span><span class="attr">:model</span>=<span class="string">"info"</span><span class="attr">ref</span>=<span class="string">"form"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ä¸ºç®€åŒ–ç±»å‹ï¼Œè¿™é‡Œæ— å…³çš„å­—æ®µéƒ½ä½¿ç”¨el-input --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span><span class="attr">prop</span>=<span class="string">"start_time"</span><span class="attr">lable</span>=<span class="string">"start time"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-input</span><span class="attr">v-model</span>=<span class="string">"info.start_time"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span><span class="attr">prop</span>=<span class="string">"end_time"</span><span class="attr">lable</span>=<span class="string">"end time"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-input</span><span class="attr">v-model</span>=<span class="string">"info.end_time"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- éå†æ•°ç»„ï¼Œå¾ªç¯è°ƒç”¨è‡ªå®šä¹‰å­ç»„ä»¶ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span><span class="attr">v-for</span>=<span class="string">"(content, index) in info.items"</span><span class="attr">v-show</span>=<span class="string">"(currentIndex - 1) === index"</span><span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">el-form-item</span><span class="attr">prop</span>=<span class="string">"item"</span><span class="attr">lable</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">st-item</span><span class="attr">v-model</span>=<span class="string">"info.items[index]"</span><span class="attr">:index</span>=<span class="string">"index"</span><span class="attr">:ref</span>=<span class="string">"index + '_item'"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">import</span> Item <span class="keyword">from</span><span class="string">'./item.vue'</span></span></span><br><span class="line"></span><br><span class="line"><span class="javascript"><span class="keyword">export</span><span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">  name: <span class="string">'Parents'</span>,</span></span><br><span class="line">  components: &#123;</span><br><span class="line"><span class="actionscript"><span class="string">'st-item'</span>: Item</span></span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line"><span class="actionscript"><span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">      currentIndex: <span class="number">0</span>, <span class="comment">// æ§åˆ¶æ˜¾ç¤ºå½“å‰çš„æ˜¯å“ªä¸ªitem</span></span></span><br><span class="line">      info: &#123;</span><br><span class="line"><span class="actionscript">        id: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">        start_time: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">        end_time: <span class="string">''</span>,</span></span><br><span class="line">        items: [&#123;</span><br><span class="line"><span class="actionscript">          title: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">          desc: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">          type: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">          img_url: <span class="string">''</span></span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line"><span class="actionscript">          title: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">          desc: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">          type: <span class="string">''</span>,</span></span><br><span class="line"><span class="actionscript">          img_url: <span class="string">''</span></span></span><br><span class="line">        &#125;]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h3 id="å­ç»„ä»¶è¡¨å•éªŒè¯"><a href="#å­ç»„ä»¶è¡¨å•éªŒè¯" class="headerlink" title="å­ç»„ä»¶è¡¨å•éªŒè¯"></a>å­ç»„ä»¶è¡¨å•éªŒè¯</h3><p>æ¥ä¸‹æ¥è¯´å¦‚ä½•åœ¨çˆ¶ç»„ä»¶æäº¤æ•°æ®æ—¶éªŒè¯å­ç»„ä»¶çš„æ˜¯å¦å·²é€šè¿‡éªŒè¯ã€‚<br>åˆšæ‰å­ç»„ä»¶ä¸­å®šä¹‰äº†ä¸€ä¸ªæ–¹æ³• <code>formValidate</code>, è¯¥æ–¹æ³•ä¼šå°†å­ç»„ä»¶çš„éªŒè¯ç»“æœè¿”å›ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­è°ƒç”¨è¯¥æ–¹æ³•å³å¯è·å¾—å­ç»„ä»¶çš„éªŒè¯ç»“æœã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  submit() &#123;</span><br><span class="line"><span class="comment">// è°ƒç”¨å­ç»„ä»¶éªŒè¯ï¼ŒéªŒè¯ç»“æœèµ‹å€¼ç»™isValidå˜é‡</span></span><br><span class="line"><span class="keyword">let</span> isValid = <span class="built_in">Object</span>.keys(<span class="keyword">this</span>.info.item).every(<span class="function"><span class="params">key</span> =&gt;</span><span class="keyword">this</span>.$refs[key + <span class="string">'_item'</span>].formValidate())</span><br><span class="line"><span class="keyword">if</span> (!isValid) &#123;</span><br><span class="line"><span class="keyword">return</span><span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">// ..</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å‚è€ƒæ–‡çŒ®ï¼š <a href="https://blog.csdn.net/ligang2585116/article/details/79475652" target="_blank" rel="noopener">https://blog.csdn.net/ligang2585116/article/details/79475652</a></p>]]></content><summary type="html">
    
      &lt;p&gt;æœ€è¿‘å·¥ä½œä¸­å¾ˆå¤šæ¬¡é‡åˆ°ä¸€ç§æƒ…å†µï¼Œè¡¨å•å…ƒç´ ä¸­æŸä¸ªå­—æ®µæ˜¯å¯¹è±¡ç»„æˆçš„æ•°ç»„ï¼Œéœ€è¦ä½¿ç”¨è‡ªå®šä¹‰ç»„ä»¶æ¥éå†æ•°ç»„ï¼Œæ¯ä¸ªæ•°ç»„å…ƒç´ å¯¹è±¡ä¸­çš„è®¸å¤šå­—æ®µéœ€è¦å•ç‹¬å°è£…æˆè‡ªå®šä¹‰ç»„ä»¶ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨&lt;code&gt;v-model&lt;/code&gt;æ–¹å¼æ¥å®ç°å“åº”å¼çš„è°ƒç”¨ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥åˆ©äºç»„ä»¶ç‹¬ç«‹è¿è¡Œç¯å¢ƒçš„ç‰¹æ€§ï¼Œæœ‰æ•ˆçš„åŒºåˆ†äº†çˆ¶ç»„ä»¶è¡¨å•ä¸­æ•°ç»„å­—æ®µä¸‹å„ä¸ªå¯¹è±¡çš„ç‹¬ç«‹ã€‚&lt;br&gt;
    
    </summary><category term="å‰ç«¯" scheme="https://mhynet.cn/categories/%E5%89%8D%E7%AB%AF/"/><category term="javascript" scheme="https://mhynet.cn/tags/javascript/"/><category term="vue" scheme="https://mhynet.cn/tags/vue/"/><category term="element" scheme="https://mhynet.cn/tags/element/"/></entry><entry><title>linuxå­¦ä¹ ç¬”è®°(5)</title><link href="https://mhynet.cn/linux-note-5.html"/><id>https://mhynet.cn/linux-note-5.html</id><published>2019-03-14T05:15:31.000Z</published><updated>2020-01-13T04:05:08.198Z</updated><content type="html"><![CDATA[<h2 id="at-ä¸€æ¬¡æ€§å®šæ—¶ä»»åŠ¡"><a href="#at-ä¸€æ¬¡æ€§å®šæ—¶ä»»åŠ¡" class="headerlink" title="at ä¸€æ¬¡æ€§å®šæ—¶ä»»åŠ¡"></a>at ä¸€æ¬¡æ€§å®šæ—¶ä»»åŠ¡</h2><p>atæœåŠ¡æ˜¯å¦å®‰è£…</p><blockquote><p>chkconfig â€“list | grep atd</p></blockquote><p>atæœåŠ¡é‡å¯</p><blockquote><p>service atd restart</p></blockquote><p>atçš„è®¿é—®æ§åˆ¶</p><blockquote><p>/etc/at.allow ç™½åå•<br>/etc/at.deny é»‘åå• ï¼ˆå¯¹rootä¸èµ·ä½œç”¨ï¼‰</p></blockquote><p>ç™½åå•æ¯”é»‘åå•ä¼˜å…ˆçº§é«˜ã€‚<br>å¦‚æœè¿™ä¸¤ä¸ªæ–‡ä»¶éƒ½ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆåªæœ‰rootç”¨æˆ·å¯ä»¥ä½¿ç”¨atå‘½ä»¤<br><a id="more"></a></p><p>atä½¿ç”¨æ–¹æ³•:</p><blockquote><p>at [é€‰é¡¹] æ—¶é—´</p></blockquote><p>é€‰é¡¹ï¼š</p><ul><li>-m: å½“atå·¥ä½œå®Œæˆåï¼Œæ— è®ºæ˜¯å¦å‘½ä»¤æœ‰è¾“å‡ºï¼Œéƒ½ç”¨emailé€šçŸ¥æ‰§è¡Œatå‘½ä»¤çš„ç”¨æˆ·</li><li>-cï¼šå·¥ä½œå·ï¼šæ˜¾ç¤ºè¯¥atå·¥ä½œçš„å®é™…å†…å®¹</li></ul><p>æ—¶é—´ï¼š<br>HH:MM  03:23<br>HH:MM: YYYY-MM=DD 02:32 2018-09-21<br>â€¦</p><p>eg:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åœ¨2åˆ†é’Ÿåæ‰§è¡Œè„šæœ¬hello.sh</span></span><br><span class="line">at now +2 minutes</span><br><span class="line">at &gt; /home/mhy/work/hello.sh &gt;&gt; /home/mhy/work/log_hello.log</span><br></pre></td></tr></table></figure></p><blockquote><p>atq #æŸ¥è¯¢å½“å‰æœåŠ¡å™¨ä¸Šçš„atå·¥ä½œã€</p></blockquote><blockquote><p>atrm [å·¥ä½œå·] # åˆ é™¤æŒ‡å®šçš„atä»»åŠ¡</p></blockquote><h2 id="crontab-å¾ªç¯å®šæ—¶ä»»åŠ¡"><a href="#crontab-å¾ªç¯å®šæ—¶ä»»åŠ¡" class="headerlink" title="crontab å¾ªç¯å®šæ—¶ä»»åŠ¡"></a>crontab å¾ªç¯å®šæ—¶ä»»åŠ¡</h2><h3 id="crondæœåŠ¡"><a href="#crondæœåŠ¡" class="headerlink" title="crondæœåŠ¡"></a>crondæœåŠ¡</h3><ul><li>æ“ä½œcrondæœåŠ¡<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /sbin/service</span></span><br><span class="line">service crond start <span class="comment">#å¯åŠ¨æœåŠ¡</span></span><br><span class="line">service crond stop <span class="comment">#å…³é—­æœåŠ¡</span></span><br><span class="line">service crond restart <span class="comment">#é‡å¯æœåŠ¡</span></span><br><span class="line">service crond reload <span class="comment">#é‡æ–°è½½å…¥é…ç½®</span></span><br><span class="line">service crond stats <span class="comment"># æŸ¥çœ‹crontabæœåŠ¡çŠ¶æ€</span></span><br></pre></td></tr></table></figure></li></ul><p>æ“ä½œcrondæœåŠ¡éœ€è¦rootæƒé™</p><ul><li><p>æŸ¥çœ‹crondæœåŠ¡æ˜¯å¦åœ¨è¿è¡Œï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --list | grep cron</span><br></pre></td></tr></table></figure></li><li><p>åŠ å…¥å¼€æœºè‡ªåŠ¨å¯åŠ¨</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æŸ¥çœ‹crondæœåŠ¡æ˜¯å¦å·²è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨</span></span><br><span class="line">ntsysv</span><br><span class="line"><span class="comment"># åŠ å…¥å¼€æœºè‡ªåŠ¨å¯åŠ¨</span></span><br><span class="line">chkconfig --level 35 crond on</span><br></pre></td></tr></table></figure></li></ul><h3 id="crontab-å‘½ä»¤"><a href="#crontab-å‘½ä»¤" class="headerlink" title="crontab å‘½ä»¤"></a>crontab å‘½ä»¤</h3><blockquote><p>crontab [é€‰é¡¹] (å‚æ•°)</p></blockquote><p>é€‰é¡¹ï¼š</p><ul><li>-e: ç¼–è¾‘å½“å‰ç”¨æˆ·crontabå®šæ—¶ä»»åŠ¡</li><li>-l: æŸ¥è¯¢å½“å‰ç”¨æˆ·crontabå®šæ—¶ä»»åŠ¡</li><li>-r: åˆ é™¤å½“å‰ç”¨æˆ·æ‰€æœ‰çš„crontabå®šæ—¶ä»»åŠ¡</li><li>-u&lt;ç”¨æˆ·å&gt;: æŒ‡å®šè¦è®¾å®šæ—¶ä»»åŠ¡çš„ç”¨æˆ·åç§°</li></ul><p>å‚æ•°ï¼š</p><ul><li>crontabæ–‡ä»¶ï¼š æŒ‡å®šåŒ…å«å¾…æ‰§è¡Œä»»åŠ¡çš„crontabæ–‡ä»¶</li></ul><p>ç»‘å®šå½“å‰ç™»å½•ç”¨æˆ·ï¼Œè¦ç¡®ä¿æ²¡æœ‰è¶…å‡ºå½“å‰ç”¨æˆ·æƒé™ã€‚</p><p>linuxä¸‹çš„ä»»åŠ¡è°ƒåº¦åˆ†ä¸ºä¸¤ç±»ï¼šç³»ç»Ÿä»»åŠ¡è°ƒåº¦å’Œç”¨æˆ·ä»»åŠ¡è°ƒåº¦ã€‚<br><strong>æ³¨æ„</strong>: å› ä¸ºç”¨æˆ·çš„å®šæ—¶ä»»åŠ¡æ˜¯å’Œç”¨æˆ·ç»‘å®šçš„ï¼Œæ‰€æœ‰ä½¿ç”¨<code>crontab -e</code>æ¥è®¾ç½®ï¼Œç³»ç»Ÿå®šæ—¶ä»»åŠ¡(rootæƒé™)æ˜¯ç¼–è¾‘<code>/etc/crontab</code>æ¥è®¾ç½®çš„ï¼Œ è€Œä¸”å¿…é¡»æŒ‡å®šç”¨æˆ·ã€‚</p><h3 id="ç³»ç»Ÿä»»åŠ¡è°ƒåº¦"><a href="#ç³»ç»Ÿä»»åŠ¡è°ƒåº¦" class="headerlink" title="ç³»ç»Ÿä»»åŠ¡è°ƒåº¦"></a>ç³»ç»Ÿä»»åŠ¡è°ƒåº¦</h3><p>ç³»ç»Ÿå‘¨æœŸæ€§æ‰€è¦æ‰§è¡Œçš„å·¥ä½œï¼Œæ¯”å¦‚å†™ç¼“å­˜æ•°æ®åˆ°ç¡¬ç›˜ã€æ—¥å¿—æ¸…ç†ç­‰ã€‚åœ¨<code>/etc</code>ç›®å½•ä¸‹æœ‰ä¸ªcrontabæ–‡ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯ç³»ç»Ÿä»»åŠ¡è°ƒåº¦çš„é…ç½®æ–‡ä»¶ã€‚<br><code>/etc/crontab</code>é»˜è®¤æœ‰ä»¥ä¸‹å†…å®¹ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">SHELL=/bin/bash</span><br><span class="line">PATH=/sbin:/bin:/usr/sbin:/usr/bin</span><br><span class="line">MAILTO=root</span><br><span class="line">HOME=/</span><br><span class="line"></span><br><span class="line"><span class="comment"># For details see man 4 crontabs</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Example of job definition:</span></span><br><span class="line"><span class="comment"># .---------------- minute (0 - 59)</span></span><br><span class="line"><span class="comment"># |  .------------- hour (0 - 23)</span></span><br><span class="line"><span class="comment"># |  |  .---------- day of month (1 - 31)</span></span><br><span class="line"><span class="comment"># |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span></span><br><span class="line"><span class="comment"># |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span></span><br><span class="line"><span class="comment"># |  |  |  |  |</span></span><br><span class="line"><span class="comment"># *  *  *  *  * user-name command to be executed</span></span><br></pre></td></tr></table></figure></p><p>eg:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">01 * * * * root run-parts /etc/cron.hourly</span><br><span class="line">02 4 * * * root run-parts /etc/cron.daily</span><br><span class="line">22 4 * * 0 root run-parts /etc/cron.weekly</span><br><span class="line">42 4 1 * * root run-parts /etc/cron.monthly</span><br></pre></td></tr></table></figure></p><p>å‰å››è¡Œæ˜¯ç”¨æ¥é…ç½®crondä»»åŠ¡è¿è¡Œçš„ç¯å¢ƒå˜é‡ï¼Œç¬¬ä¸€è¡ŒSHELLå˜é‡æŒ‡å®šäº†ç³»ç»Ÿè¦ä½¿ç”¨å“ªä¸ªshellï¼Œè¿™é‡Œæ˜¯bashï¼Œç¬¬äºŒè¡ŒPATHå˜é‡æŒ‡å®šäº†ç³»ç»Ÿæ‰§è¡Œå‘½ä»¤çš„è·¯å¾„ï¼Œç¬¬ä¸‰è¡ŒMAILTOå˜é‡æŒ‡å®šäº†crondçš„ä»»åŠ¡æ‰§è¡Œä¿¡æ¯å°†é€šè¿‡ç”µå­é‚®ä»¶å‘é€ç»™rootç”¨æˆ·ï¼Œå¦‚æœMAILTOå˜é‡çš„å€¼ä¸ºç©ºï¼Œåˆ™è¡¨ç¤ºä¸å‘é€ä»»åŠ¡æ‰§è¡Œä¿¡æ¯ç»™ç”¨æˆ·ï¼Œç¬¬å››è¡Œçš„HOMEå˜é‡æŒ‡å®šäº†åœ¨æ‰§è¡Œå‘½ä»¤æˆ–è€…è„šæœ¬æ—¶ä½¿ç”¨çš„ä¸»ç›®å½•ã€‚<br>é€šè¿‡/etc/crontabé…ç½®æ–‡ä»¶æ¥è®¾ç½®å®šæ—¶ä»»åŠ¡æ˜¯æ¯”è¾ƒå¥½çš„æ–¹å¼ã€‚</p><ul><li>æ‰§è¡Œç³»ç»Ÿçš„å®šæ—¶ä»»åŠ¡çš„æ–¹æ³•æœ‰ä¸¤ç§ï¼š</li></ul><ol><li>æŠŠéœ€è¦å®šæ—¶æ‰§è¡Œçš„è„šæ­¥å¤åˆ¶åˆ°<code>/etc/cron.{daily,weekly,montyly}</code>ç›®å½•çš„ä»»æ„ä¸€ä¸ª</li><li>ä¿®æ”¹<code>/etc/crontab</code>é…ç½®æ–‡ä»¶</li></ol><h3 id="ç”¨æˆ·ä»»åŠ¡è°ƒåº¦"><a href="#ç”¨æˆ·ä»»åŠ¡è°ƒåº¦" class="headerlink" title="ç”¨æˆ·ä»»åŠ¡è°ƒåº¦"></a>ç”¨æˆ·ä»»åŠ¡è°ƒåº¦</h3><p>ç”¨æˆ·å®šæœŸæ‰§è¡Œçš„å·¥ä½œï¼Œæ¯”å¦‚æ•°æ®å¤‡ä»½ã€å®šæ—¶é‚®ä»¶æé†’ç­‰ã€‚ ç”¨æˆ·å¯ä»¥ä½¿ç”¨crontabå·¥å…·æ¥å®šåˆ¶è‡ªå·±çš„è®¡åˆ’ä»»åŠ¡ã€‚æ‰€æœ‰æ°¸ä¸å®šä¹‰crontabæ–‡ä»¶éƒ½ä¿å­˜åœ¨<code>/var/spool/cron</code>ç›®å½•ä¸­ã€‚å…¶æ–‡ä»¶åä¸ç”¨æˆ·åä¸€è‡´ï¼Œä½¿ç”¨è€…æƒé™æ–‡ä»¶å¦‚ä¸‹ï¼š<br><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/etc/</span>cron.deny è¯¥æ–‡ä»¶ä¸­æ‰€æœ‰ç”¨æˆ·ä¸å…è®¸ä½¿ç”¨crontabå‘½ä»¤ï¼ˆé»‘åå•ï¼‰</span><br><span class="line"><span class="regexp">/etc/</span>cron.allow è¯¥æ–‡ä»¶ä¸­æ‰€åˆ—ç”¨æˆ·å…è®¸ä½¿ç”¨crontabå‘½ä»¤ ï¼ˆç™½åå•ï¼‰</span><br><span class="line"><span class="regexp">/etc/</span>spool<span class="regexp">/cron/</span> æ‰€æœ‰ç”¨æˆ·crontabæ–‡ä»¶å­˜æ”¾çš„ç›®å½•ï¼Œä»¥ç”¨æˆ·åå‘½å</span><br></pre></td></tr></table></figure></p><p><strong>ç™½åå•æ¯”é»‘åå•ä¼˜å…ˆçº§é«˜</strong>ï¼Œ ç™½åå•çš„ç”¨æˆ·ä¸€å®šæœ‰æƒé™ï¼Œé»‘åå•çš„ç”¨æˆ·å¦‚æœåœ¨ç™½åå•ï¼Œåˆ™æœ‰æƒé™ï¼›å¦‚æœé»‘åå•çš„ç”¨æˆ·ä¸åœ¨ç™½åå•ï¼Œåˆ™æ²¡æœ‰æƒé™ã€‚<br>æ‰€ä»¥åªéœ€è¦æŠŠéœ€è¦é™åˆ¶æƒé™çš„ç”¨æˆ·åŠ å…¥åˆ°é»‘åå•å°±å¯ä»¥äº†ï¼Œç™½åå•ä¸éœ€è¦å•ç‹¬æ·»åŠ ç”¨æˆ·ï¼Œé™¤äº†ä¼˜å…ˆçº§å¤–ï¼Œæœ‰æƒé™çš„ç”¨æˆ·ä¸€èˆ¬éƒ½æ¯”é™åˆ¶æƒé™çš„ç”¨æˆ·å¤šï¼ŒåŠ é»‘åå•æ¯”è¾ƒæ–¹ä¾¿ã€‚</p><h3 id="crontabæ–‡ä»¶çš„å«ä¹‰"><a href="#crontabæ–‡ä»¶çš„å«ä¹‰" class="headerlink" title="crontabæ–‡ä»¶çš„å«ä¹‰"></a>crontabæ–‡ä»¶çš„å«ä¹‰</h3><p>ç”¨æˆ·æ‰€å»ºç«‹çš„crontabæ–‡ä»¶ä¸­ï¼Œæ¯ä¸€è¡Œéƒ½ä»£è¡¨ä¸€æ¡ä»»åŠ¡ï¼Œæ¯è¡Œçš„æ¯ä¸ªå­—æ®µä»£è¡¨ä¸€é¡¹è®¾ç½®ï¼Œå®ƒçš„æ ¼å¼ä¸€å…±åˆ†ä¸ºå…­ä¸ªå­—æ®µï¼Œå‰äº”æ®µæ˜¯æ—¶é—´è®¾å®šæ®µï¼Œç¬¬å…­æ®µæ˜¯è¦æ‰§è¡Œçš„å‘½ä»¤æ®µï¼Œæ ¼å¼å¦‚ä¸‹ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * * [æ‰§è¡Œçš„ä»»åŠ¡]</span><br></pre></td></tr></table></figure></p><p>é¡ºåºï¼š <code>miniute hour day month week command</code><br>å…¶ä¸­ï¼š</p><ul><li>minute:  ä¸€å°æ—¶å½“ä¸­çš„ç¬¬å‡ åˆ†é’Ÿ, èŒƒå›´0-59ä¹‹é—´çš„ä»»æ„æ•´æ•°</li><li>hour: ä¸€å¤©å½“ä¸­çš„ç¬¬å‡ ä¸ªå°æ—¶, èŒƒå›´æ˜¯0-23ä¹‹é—´çš„ä»»æ„æ•´æ•°</li><li>day: ä¸€ä¸ªæœˆå½“ä¸­çš„ç¬¬å‡ å¤©, èŒƒå›´æ˜¯1-31ä¹‹é—´çš„ä»»æ„æ•´æ•°</li><li>month: ä¸€å¹´å½“ä¸­çš„ç¬¬å‡ ä¸ªæœˆ, èŒƒå›´æ˜¯1-12ä¹‹é—´çš„ä»»æ„æ•´æ•°</li><li>week: ä¸€å‘¨å½“ä¸­çš„æ˜ŸæœŸå‡ , èŒƒå›´æ˜¯0-7(0å’Œ7éƒ½ä»£è¡¨æ˜ŸæœŸæ—¥)ä¹‹é—´çš„ä»»æ„æ•´æ•°</li><li>command: è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œå¯ä»¥æ˜¯ç³»ç»Ÿå‘½ä»¤ï¼Œä¹Ÿå¯ä»¥æ˜¯è‡ªå·±ç¼–å†™çš„è„šæœ¬æ–‡ä»¶</li></ul><p>ä»¥ä¸Šå„ä¸ªå­—æ®µä¸­ï¼Œ è¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ç‰¹æ®Šå­—ç¬¦ï¼š</p><ul><li>æ˜Ÿå·<code>*</code>: ä»£è¡¨æ‰€æœ‰å¯èƒ½çš„å€¼ï¼Œæ¯”å¦‚minuteå­—æ®µä¸º<code>*</code>ä»£è¡¨æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡</li><li>é€—å·<code>,</code>: é€—å·éš”å¼€çš„å€¼æŒ‡å®šä¸€ä¸ªåˆ—è¡¨èŒƒå›´ï¼Œæ¯”å¦‚: <code>1,2,3,5,6</code>,åˆ—è¡¨ä¸­çš„æ¯ä¸ªæ—¶é—´ç‚¹æ‰§è¡Œä¸€æ¬¡</li><li>ä¸­æ <code>-</code>: å¯ä»¥ç”¨æ•´æ•°ä¹‹é—´çš„ä¸­æ è¡¨ç¤ºä¸€ä¸ªæ•´æ•°èŒƒå›´ï¼Œå¦‚ï¼š<code>2-5</code>è¡¨ç¤º<code>2,3,4,5</code></li><li>æ­£æ–œçº¿<code>/</code>: æ­£æ–œçº¿æŒ‡å®šæ—¶é—´çš„é—´éš”é¢‘ç‡ï¼Œ å¦‚<code>0-23/2</code>è¡¨ç¤ºæ¯ä¸¤ä¸ªå°æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œminuteå­—æ®µçš„<code>*/10</code>è¡¨ç¤ºæ¯ååˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡</li></ul><p><strong>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è®¾ç½®å®šæ—¶ä»»åŠ¡:</strong><br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br><span class="line"><span class="comment">#è¿›å…¥crontabç¼–è¾‘ç•Œé¢ã€‚ä¼šæ‰“å¼€vimç¼–è¾‘ï¼ŒæŒ‰åˆšæ‰çš„æ ¼å¼è®¾ç½®å®šæ—¶ä»»åŠ¡</span></span><br></pre></td></tr></table></figure></p><p>crontabå®šæ—¶ä»»åŠ¡å®ä¾‹ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">* * * * * <span class="built_in">command</span><span class="comment"># æ¯ä¸€åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡</span></span><br><span class="line">3,15 * * * * <span class="built_in">command</span><span class="comment"># æ¯å°æ—¶å†…åœ¨ç¬¬3å’Œç¬¬5åˆ†é’Ÿæ‰§è¡Œ</span></span><br><span class="line">3,15 8-11 * * * <span class="built_in">command</span><span class="comment"># ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬15åˆ†é’Ÿæ‰§è¡Œ</span></span><br><span class="line">3ï¼Œ15 8-11 */2 * * <span class="built_in">command</span><span class="comment">#æ¯éš”ä¸¤å¤©çš„ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬5åˆ†é’Ÿæ‰§è¡Œ</span></span><br><span class="line">3ï¼Œ15 8-11 * * 1 <span class="built_in">command</span><span class="comment">#æ¯ä¸ªæ˜ŸæœŸä¸€çš„ä¸Šåˆ8ç‚¹åˆ°11ç‚¹çš„ç¬¬3å’Œç¬¬5åˆ†é’Ÿæ‰§è¡Œ</span></span><br><span class="line">30 21 * * * service /etc/init.d/smb restart <span class="comment">#æ¯æ™šçš„21:30é‡å¯smb</span></span><br><span class="line">45 4 1,10,22 * * /etc/init.d/smb restart  <span class="comment">#æ¯æœˆçš„1ã€10ã€22æ—¥é‡å¯smb</span></span><br><span class="line">30 4 * * 6,7 /etc/init.d/nginx restart <span class="comment">#æ²¡å‘¨å…­æ—¥çš„4:30é‡å¯nginx</span></span><br><span class="line">0,30 18-23 * * *  /etc/init.d/nginx restart  <span class="comment">#æ¯å¤©18:00è‡³23:00ä¹‹é—´æ¯éš”30åˆ†é’Ÿé‡å¯nginx, æ³¨æ„ï¼Œminuteçš„èŒƒå›´æ˜¯0-59ï¼Œæ¯éš”30åˆ†é’Ÿçš„å†™æ³•*/30å’Œ0,30çš„åŒºåˆ«</span></span><br><span class="line">0 23 * * 6 /etc/init.d/nginx restart <span class="comment">#æ¯å‘¨å…­æ™š11:00é‡å¯nginx</span></span><br><span class="line">0 */1 * * * /etc/init.d/nginx restart <span class="comment">#æ¯ä¸€å°æ—¶é‡å¯nginx</span></span><br><span class="line">0 23-7 * * * /etc /init.d/nginx restart <span class="comment">#æ™šä¸Š11ç‚¹åˆ°æ—©ä¸Š7ç‚¹ä¹‹é—´ï¼Œæ¯éš”ä¸€å°æ—¶é‡å¯nginx</span></span><br><span class="line">0 11 4 * 1-3 /etc/init.d/nginx restart <span class="comment">#æ¯æœˆçš„4å·ä¸æ¯å‘¨ä¸€åˆ°å‘¨ä¸‰çš„11ç‚¹é‡å¯nginx</span></span><br><span class="line">0 * * * * root run-parts /etc/cron.hourly <span class="comment">#æ¯å°æ—¶æ‰§è¡Œ/etc/cron.hourlyç›®å½•å†…çš„è„šæœ¬</span></span><br></pre></td></tr></table></figure></p><p>å…¶ä»–å‘½ä»¤ï¼š</p><blockquote><p>crontab -l # æŸ¥è¯¢crontabä»»åŠ¡</p></blockquote><blockquote><p>crontab -r # æ¸…é™¤å½“å‰ç”¨æˆ·çš„æ‰€æœ‰crontabä»»åŠ¡</p></blockquote><p>æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>å…­ä¸ªé€‰é¡¹éƒ½ä¸èƒ½ä¸ºç©ºï¼Œå¿…é¡»å¡«å†™ï¼Œå¦‚æœä¸ç¡®å®šä½¿ï¼Œç”¨<code>*</code>ä»£æ›¿ä»»æ„æ—¶é—´</li><li>crontabå®šæ—¶ä»»åŠ¡ï¼Œæœ€å°æœ‰æ•ˆæ—¶é—´æ˜¯åˆ†é’Ÿï¼Œæœ€å¤§æ—¶é—´èŒƒå›´æ˜¯æœˆ</li><li>åœ¨å®šä¹‰æ—¶é—´æ—¶ï¼Œæ—¥æœŸå’Œæ˜ŸæœŸæœ€å¥½ä¸è¦åœ¨ä¸€æ¡å®šæ—¶ä»»åŠ¡ä¸­å‡ºç°ï¼Œå› ä¸ºä»–ä»¬éƒ½æ˜¯ä»¥å¤©ä¸ºå•ä½ï¼Œä¸åˆ©äºç®¡ç†å‘˜ç®¡ç†</li><li>åœ¨å®šæ—¶ä»»åŠ¡ä¸­ï¼Œä¸ç®¡æ˜¯ç›´æ¥å†™å‘½ä»¤ï¼Œè¿˜æ˜¯åœ¨è„šæœ¬ä¸­å†™å‘½ä»¤ï¼Œæœ€å¥½éƒ½ç”¨ç»å¯¹è·¯å¾„</li></ul><h2 id="anacroné…ç½®"><a href="#anacroné…ç½®" class="headerlink" title="anacroné…ç½®"></a>anacroné…ç½®</h2><p>anacronä¼šè‡ªåŠ¨æ‰§è¡Œå› ä¸ºå…³æœºç­‰æ•…éšœæ²¡æœ‰æ‰§è¡Œçš„å®šæ—¶ä»»åŠ¡ï¼Œåªä¼šæ£€æµ‹<code>/etc/cron.{daily,weekly,montyly}</code>ç›®å½•ï¼Œè€Œä¸ä¼šæ£€æµ‹<code>crontab -e</code>è®¾ç½®çš„å®šæ—¶ä»»åŠ¡</p><h3 id="anacronæ£€æµ‹å‘¨æœŸ"><a href="#anacronæ£€æµ‹å‘¨æœŸ" class="headerlink" title="anacronæ£€æµ‹å‘¨æœŸ"></a>anacronæ£€æµ‹å‘¨æœŸ</h3><ul><li>anacronä¼šä½¿ç”¨ä¸€å¤©ï¼Œä¸ƒå¤©ï¼Œä¸€ä¸ªæœˆä½œä¸ºæ£€æµ‹å‘¨æœŸ</li><li>åœ¨ç³»ç»Ÿçš„<code>/var/spool/anacron</code>ç›®å½•ä¸­å­˜åœ¨<code>cron.{daily,weekly,montyly}</code>æ–‡ä»¶ï¼Œç”¨äºè®°å½•ä¸Šæ¬¡æ‰§è¡Œcrontabçš„æ—¶é—´</li><li>å’Œå½“å‰æ—¶é—´åšæ¯”è¾ƒï¼Œå¦‚æœä¸¤ä¸ªæ—¶é—´çš„å·®å€¼è¶…è¿‡äº†anacronçš„æŒ‡å®šæ—¶é—´å·®å€¼ï¼Œè¯æ˜æœ‰cronä»»åŠ¡å‘—æ¼æ‰§è¡Œ</li></ul><h4 id="etc-anacrontabé…ç½®æ–‡ä»¶"><a href="#etc-anacrontabé…ç½®æ–‡ä»¶" class="headerlink" title="/etc/anacrontabé…ç½®æ–‡ä»¶"></a><code>/etc/anacrontab</code>é…ç½®æ–‡ä»¶</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># /etc/anacrontab: configuration file for anacron</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># See anacron(8) and anacrontab(5) for details.</span></span><br><span class="line"></span><br><span class="line">SHELL=/bin/sh</span><br><span class="line">PATH=/sbin:/bin:/usr/sbin:/usr/bin</span><br><span class="line">MAILTO=root</span><br><span class="line"><span class="comment"># the maximal random delay added to the base delay of the jobs</span></span><br><span class="line">RANDOM_DELAY=45</span><br><span class="line"><span class="comment"># the jobs will be started during the following hours only</span></span><br><span class="line">START_HOURS_RANGE=3-22</span><br><span class="line"></span><br><span class="line"><span class="comment">#period in days   delay in minutes   job-identifier   command</span></span><br><span class="line">1   5   cron.daily      nice run-parts /etc/cron.daily</span><br><span class="line">7   25  cron.weekly     nice run-parts /etc/cron.weekly</span><br><span class="line">@monthly 45 cron.monthly        nice run-parts /etc/cron.monthly</span><br></pre></td></tr></table></figure><h4 id="cron-dailyå·¥ä½œæ‰§è¡Œè¿‡ç¨‹"><a href="#cron-dailyå·¥ä½œæ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="cron.dailyå·¥ä½œæ‰§è¡Œè¿‡ç¨‹"></a>cron.dailyå·¥ä½œæ‰§è¡Œè¿‡ç¨‹</h4><ul><li>é¦–å…ˆè¯»å–<code>/var/spool/anacron/cron.daily</code>ä¸­çš„ä¸Šä¸€æ¬¡anacronæ‰§è¡Œçš„æ—¶é—´</li><li>å’Œå½“å‰æ—¶é—´åšæ¯”è¾ƒï¼Œå¦‚æœä¸¤ä¸ªæ—¶é—´çš„å·®å€¼è¶…è¿‡ä¸€å¤©ï¼Œå°±æ‰§è¡Œcron.dailyå·¥ä½œ</li><li>æ‰§è¡Œè¿™ä¸ªå·¥ä½œåªèƒ½åœ¨03:00-22:00ä¹‹é—´</li><li>æ‰§è¡Œå·¥ä½œæ—¶å¼ºåˆ¶å»¶è¿Ÿæ—¶é—´ä¸º5åˆ†é’Ÿï¼Œå†éšæœºå»¶è¿Ÿ0-45åˆ†é’Ÿæ—¶é—´</li><li>ä½¿ç”¨<code>nice</code>å‘½ä»¤æŒ‡å®šé»˜è®¤ä¼˜å…ˆçº§ï¼Œä½¿ç”¨<code>run-parts</code>è„šæœ¬æ‰§è¡Œ<code>/etc/cron.daily</code>ç›®å½•ä¸­çš„æ‰€æœ‰å¯æ‰§è¡Œæ–‡ä»¶</li></ul><h3 id="crontabå®ä¾‹"><a href="#crontabå®ä¾‹" class="headerlink" title="crontabå®ä¾‹"></a>crontabå®ä¾‹</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ£€æŸ¥crondæœåŠ¡æ˜¯å¦å®‰è£…</span></span><br><span class="line">yum list cronie &amp;&amp; systemctl status crond</span><br><span class="line"><span class="comment"># æ£€æŸ¥crontabå·¥å…·æ˜¯å¦å®‰è£…</span></span><br><span class="line">yum list crontabs &amp;&amp; <span class="built_in">which</span> crontab &amp;&amp; crontab -l</span><br></pre></td></tr></table></figure><p><em>systemctl æ˜¯ç±»ä¼¼serviceçš„ä¸€ä¸ªå‘½ä»¤ï¼Œå¯ä»¥ä»£æ›¿</em></p><ul><li>cronæ—¥å¿—<br>cronæ—¥å¿—ä¿å­˜åœ¨<code>/var/log/cron</code><br>æŸ¥çœ‹æ—¥å¿—ï¼š<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail -n 2 /var/<span class="built_in">log</span>/cron</span><br></pre></td></tr></table></figure></li></ul><p>æ¸…ç†æ—¥å¿—ç³»ç»Ÿ<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å®šæ—¶ä»»åŠ¡æ¸…ç†æ—¥å¿—</span></span><br><span class="line">/dev/null &gt; /var/<span class="built_in">log</span>/shadowsocks.log</span><br></pre></td></tr></table></figure></p>]]></content><summary type="html">
    
      linuxå­¦ä¹ ä¹‹å®šæ—¶ä»»åŠ¡
    
    </summary><category term="åç«¯" scheme="https://mhynet.cn/categories/%E5%90%8E%E7%AB%AF/"/><category term="linux" scheme="https://mhynet.cn/tags/linux/"/><category term="bash" scheme="https://mhynet.cn/tags/bash/"/><category term="crontab" scheme="https://mhynet.cn/tags/crontab/"/></entry><entry><title>[è½¬è½½]mongodbå¸¸ç”¨æŸ¥è¯¢è¯­å¥</title><link href="https://mhynet.cn/mongodb-searchs.html"/><id>https://mhynet.cn/mongodb-searchs.html</id><published>2019-01-04T03:36:21.000Z</published><updated>2020-01-13T04:05:08.199Z</updated><content type="html"><![CDATA[<p>è®°å½•ä¸€ä¸‹MongoDBå¸¸ç”¨è¯­å¥ï¼Œé¡ºå¸¦ä¸SQLåšä¸ªç®€å•çš„å¯¹æ¯”ã€‚</p><a id="more"></a><p>1ã€æŸ¥è¯¢(find)</p><p>ï¼ˆ1ï¼‰æŸ¥è¯¢æ‰€æœ‰ç»“æœ<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * <span class="keyword">from</span> article</span><br><span class="line">db.article.<span class="builtin-name">find</span>()</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ2ï¼‰æŒ‡å®šè¿”å›å“ªäº›é”®<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select title, author <span class="keyword">from</span> article</span><br><span class="line">db.article.<span class="builtin-name">find</span>(&#123;&#125;, &#123;<span class="string">"title"</span>: 1, <span class="string">"author"</span>: 1&#125;)</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ3ï¼‰whereæ¡ä»¶<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> article <span class="keyword">where</span> title = <span class="string">"mongodb"</span></span><br><span class="line">db.article.find(&#123;<span class="string">"title"</span>: <span class="string">"mongodb"</span>&#125;)</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ4ï¼‰andæ¡ä»¶<br><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> article <span class="keyword">where</span> title = <span class="string">"mongodb"</span> and author = <span class="string">"god"</span></span><br><span class="line">db.article.find(&#123;<span class="string">"title"</span>: <span class="string">"mongodb"</span>, <span class="string">"author"</span>: <span class="string">"god"</span>&#125;)</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ5ï¼‰oræ¡ä»¶<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * <span class="keyword">from</span> article where title = <span class="string">"mongodb"</span><span class="keyword">or</span> author = <span class="string">"god"</span></span><br><span class="line">db.article.<span class="builtin-name">find</span>(&#123;<span class="string">"<span class="variable">$or</span>"</span>: [&#123;<span class="string">"title"</span>: <span class="string">"mongodb"</span>&#125;, &#123;<span class="string">"author"</span>: <span class="string">"god"</span>&#125;]&#125;)</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ6ï¼‰æ¯”è¾ƒæ¡ä»¶<br><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> article <span class="keyword">where</span><span class="keyword">read</span> &gt;= <span class="number">100</span>;</span><br><span class="line">db.article.find(&#123;"read": &#123;"$gt": <span class="number">100</span>&#125;&#125;)</span><br></pre></td></tr></table></figure></p><p>$gt(&gt;)ã€$gte(&gt;=)ã€$lt(&lt;)ã€$lte(&lt;=)<br><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> article <span class="keyword">where</span><span class="keyword">read</span> &gt;= <span class="number">100</span><span class="keyword">and</span><span class="keyword">read</span> &lt;= <span class="number">200</span></span><br><span class="line">db.article.find(&#123;"read": &#123;"$gte": <span class="number">100</span>, "lte": <span class="number">200</span>&#125;&#125;)</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ7ï¼‰inæ¡ä»¶<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * <span class="keyword">from</span> article where author <span class="keyword">in</span> (<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>)</span><br><span class="line">db.article.<span class="builtin-name">find</span>(&#123;<span class="string">"author"</span>: &#123;<span class="string">"<span class="variable">$in</span>"</span>: [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>]&#125;&#125;)</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ8ï¼‰like<br><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> article <span class="keyword">where</span> title <span class="keyword">like</span> "%mongodb%"</span><br><span class="line">db.article.find(&#123;"title": /mongodb/&#125;)</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ9ï¼‰count<br><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span><span class="built_in">count</span>(*) <span class="keyword">from</span> article</span><br><span class="line">db.article.<span class="built_in">count</span>()</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ10ï¼‰ä¸ç­‰äº<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * <span class="keyword">from</span> article where author != <span class="string">"a"</span></span><br><span class="line">db.article.<span class="builtin-name">find</span>(&#123; <span class="string">"author"</span>: &#123; <span class="string">"<span class="variable">$ne</span>"</span>: <span class="string">"a"</span> &#125;&#125;)</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ11ï¼‰æ’åº<br>å‡åºï¼š<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * <span class="keyword">from</span> article where<span class="built_in"> type </span>= <span class="string">"mongodb"</span> order by read desc</span><br><span class="line">db.article.<span class="builtin-name">find</span>(&#123;<span class="string">"type"</span>: <span class="string">"mongodb"</span>&#125;).sort(&#123;<span class="string">"read"</span>: -1&#125;)</span><br></pre></td></tr></table></figure></p><p>é™åºï¼š<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * <span class="keyword">from</span> article where<span class="built_in"> type </span>= <span class="string">"mongodb"</span> order by read asc</span><br><span class="line">db.article.<span class="builtin-name">find</span>(&#123;<span class="string">"type"</span>: <span class="string">"mongodb"</span>&#125;).sort(&#123;<span class="string">"read"</span>: 1&#125;)</span><br></pre></td></tr></table></figure></p><p>findOne()ï¼šé™¤äº†åªè¿”å›ä¸€ä¸ªæŸ¥è¯¢ç»“æœå¤–ï¼Œä½¿ç”¨æ–¹æ³•ä¸find()ä¸€æ ·ã€‚<br>2ã€åˆ›å»ºï¼ˆinsertï¼‰<br><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span><span class="keyword">into</span> article(title, author, content) <span class="keyword">values</span>("mongodb", "tg", "haha")</span><br><span class="line">db.article.<span class="keyword">insert</span>(&#123;"title": "mongodb", "author": "tg", "content": "haha"&#125;)</span><br></pre></td></tr></table></figure></p><p>3ã€æ›´æ–°ï¼ˆupdateï¼‰</p><p>ï¼ˆ1ï¼‰update()</p><p>è¯­æ³•ï¼š<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">db</span>.collecion.<span class="keyword">update</span>(<span class="keyword">query</span>, <span class="keyword">update</span>[, options] )</span><br></pre></td></tr></table></figure></p><p>query : å¿…é€‰ï¼ŒæŸ¥è¯¢æ¡ä»¶ï¼Œç±»ä¼¼findä¸­çš„æŸ¥è¯¢æ¡ä»¶ã€‚<br>update : å¿…é€‰ï¼Œupdateçš„å¯¹è±¡å’Œä¸€äº›æ›´æ–°çš„æ“ä½œç¬¦ï¼ˆå¦‚$,$incâ€¦ï¼‰ç­‰<br>optionsï¼šå¯é€‰ï¼Œä¸€äº›æ›´æ–°é…ç½®çš„å¯¹è±¡ã€‚<br>upsertï¼šå¯é€‰ï¼Œè¿™ä¸ªå‚æ•°çš„æ„æ€æ˜¯ï¼Œå¦‚æœä¸å­˜åœ¨updateçš„è®°å½•ï¼Œæ˜¯å¦æ’å…¥objNew,trueä¸ºæ’å…¥ï¼Œé»˜è®¤æ˜¯falseï¼Œä¸æ’å…¥ã€‚<br>multiï¼šå¯é€‰ï¼Œmongodb é»˜è®¤æ˜¯false,åªæ›´æ–°æ‰¾åˆ°çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°ä¸ºtrue,å°±æŠŠæŒ‰æ¡ä»¶æŸ¥å‡ºæ¥å¤šæ¡è®°å½•å…¨éƒ¨æ›´æ–°ã€‚<br>writeConcernï¼šå¯é€‰ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚</p><p>ç®€å•æ›´æ–°ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update article <span class="built_in">set</span> title = <span class="string">"mongodb"</span><span class="built_in">where</span><span class="built_in">read</span> &gt; 100</span><br><span class="line">db.article.update(&#123;<span class="string">"read"</span>: &#123;<span class="string">"<span class="variable">$gt</span>"</span>: 100&#125;&#125;, &#123;<span class="string">"<span class="variable">$set</span>"</span>: &#123; <span class="string">"title"</span>: <span class="string">"mongodb"</span>&#125;&#125;)</span><br></pre></td></tr></table></figure></p><p>ï¼ˆ2ï¼‰save()<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.article</span><span class="selector-class">.save</span>(&#123;<span class="attribute">_id</span>: <span class="number">123</span>, title: <span class="string">"mongodb"</span>&#125;)</span><br></pre></td></tr></table></figure></p><p>æ‰§è¡Œä¸Šé¢çš„è¯­å¥ï¼Œå¦‚æœé›†åˆä¸­å·²ç»å­˜åœ¨ä¸€ä¸ª_idä¸º123çš„æ–‡æ¡£ï¼Œåˆ™æ›´æ–°å¯¹åº”å­—æ®µ;å¦åˆ™æ’å…¥ã€‚</p><p>æ³¨ï¼šå¦‚æœæ›´æ–°å¯¹è±¡ä¸å­˜åœ¨_idï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆå¹¶ä½œä¸ºæ–°çš„æ–‡æ¡£æ’å…¥ã€‚</p><p>ï¼ˆ3ï¼‰æ›´æ–°æ“ä½œç¬¦</p><p>MongoDBæä¾›ä¸€äº›å¼ºå¤§çš„æ›´æ–°æ“ä½œç¬¦ã€‚</p><p>æ›´æ–°ç‰¹å®šå­—æ®µï¼ˆ$setï¼‰ï¼š<br><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> game <span class="built_in">set</span><span class="built_in">count</span> = <span class="number">10000</span><span class="built_in">where</span> _id = <span class="number">123</span></span><br><span class="line">db.game.<span class="keyword">update</span>(&#123;<span class="string">"_id"</span>: <span class="number">123</span>&#125;, &#123; <span class="string">"$set"</span>: &#123;<span class="string">"count"</span>: <span class="number">10000</span>&#125;&#125;)</span><br></pre></td></tr></table></figure></p><p>åˆ é™¤ç‰¹å®šå­—æ®µï¼ˆ$unsetï¼‰ï¼š<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">db</span>.game.<span class="keyword">update</span>(&#123;<span class="string">"_id"</span>:123&#125;, &#123;<span class="string">"$unset"</span>: &#123;<span class="string">"author"</span>:1&#125;&#125;)</span><br></pre></td></tr></table></figure></p><p>æ³¨ï¼š$unsetæŒ‡å®šå­—æ®µçš„å€¼åªéœ€æ˜¯ä»»æ„åˆæ³•å€¼å³å¯ã€‚</p><p>é€’å¢æˆ–é€’å‡ï¼ˆ$incï¼‰<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">db</span>.game.<span class="keyword">update</span>(&#123;<span class="string">"_id"</span>: 123&#125;, &#123; <span class="string">"$inc"</span>: &#123;<span class="string">"count"</span>: 10&#125;&#125;) <span class="comment">// æ¯æ¬¡countéƒ½åŠ 10</span></span><br></pre></td></tr></table></figure></p><p>æ³¨æ„ï¼š$incå¯¹åº”çš„å­—æ®µå¿…é¡»æ˜¯æ•°å­—ï¼Œè€Œä¸”é€’å¢æˆ–é€’å‡çš„å€¼ä¹Ÿå¿…é¡»æ˜¯æ•°å­—ã€‚</p><p>æ•°ç»„è¿½åŠ ï¼ˆ$pushï¼‰ï¼š<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">db</span>.game.<span class="keyword">update</span>(&#123;<span class="string">"_id"</span>: 123&#125;, &#123; <span class="string">"$push"</span>: &#123;<span class="string">"score"</span>: 123&#125;&#125;)</span><br></pre></td></tr></table></figure></p><p>è¿˜å¯ä»¥ä¸€æ¬¡è¿½åŠ å¤šä¸ªå…ƒç´ ï¼š<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">db</span>.game.<span class="keyword">update</span>(&#123;<span class="string">"_id"</span>: 123&#125;, &#123;<span class="string">"$push"</span>: &#123;<span class="string">"score"</span>: [12,123]&#125;&#125;)</span><br></pre></td></tr></table></figure></p><p>æ³¨ï¼šè¿½åŠ å­—æ®µå¿…é¡»æ˜¯æ•°ç»„ã€‚å¦‚æœæ•°ç»„å­—æ®µä¸å­˜åœ¨ï¼Œåˆ™è‡ªåŠ¨æ–°å¢ï¼Œç„¶åè¿½åŠ ã€‚</p><p>ä¸€æ¬¡è¿½åŠ å¤šä¸ªå…ƒç´ ï¼ˆ$pushAllï¼‰ï¼š<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">db</span>.game.<span class="keyword">update</span>(&#123;<span class="string">"_id"</span>: 123&#125;, &#123;<span class="string">"$pushAll"</span>: &#123;<span class="string">"score"</span>: [12,123]&#125;&#125;)</span><br></pre></td></tr></table></figure></p><p>è¿½åŠ ä¸é‡å¤å…ƒç´ ï¼ˆ$addToSetï¼‰ï¼š<br>$addToSetç±»ä¼¼é›†åˆSetï¼Œåªæœ‰å½“è¿™ä¸ªå€¼ä¸åœ¨å…ƒç´ å†…æ—¶æ‰å¢åŠ ï¼š<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">db</span>.game.<span class="keyword">update</span>(&#123;<span class="string">"_id"</span>: 123&#125;, &#123;<span class="string">"$addToSet"</span>: &#123;<span class="string">"score"</span>: 123&#125;&#125;)</span><br></pre></td></tr></table></figure></p><p>åˆ é™¤å…ƒç´ ï¼ˆ$popï¼‰ï¼š<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">db</span>.game.<span class="keyword">update</span>(&#123;<span class="string">"_id"</span>: 123&#125;, &#123;<span class="string">"$pop"</span>: &#123;<span class="string">"score"</span>: 1&#125;&#125;)  <span class="comment">// åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line"><span class="keyword">db</span>.game.<span class="keyword">update</span>(&#123;<span class="string">"_id"</span>: 123&#125;, &#123;<span class="string">"$pop"</span>: &#123;<span class="string">"score"</span>: -1&#125;&#125;)  <span class="comment">// åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ </span></span><br></pre></td></tr></table></figure></p><p>æ³¨ï¼š$popæ¯æ¬¡åªèƒ½åˆ é™¤æ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼Œ1è¡¨ç¤ºåˆ é™¤æœ€åä¸€ä¸ªï¼Œ-1è¡¨ç¤ºåˆ é™¤ç¬¬ä¸€ä¸ªã€‚</p><p>åˆ é™¤ç‰¹å®šå…ƒç´ ï¼ˆ$pullï¼‰ï¼š<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">db</span>.game.<span class="keyword">update</span>(&#123;<span class="string">"_id"</span>: 123&#125;, &#123;<span class="string">"$pull"</span>: &#123;<span class="string">"score"</span>: 123&#125;&#125;)</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢çš„è¯­å¥è¡¨ç¤ºåˆ é™¤æ•°ç»„scoreå†…å€¼ç­‰äº123çš„å…ƒç´ ã€‚</p><p>åˆ é™¤å¤šä¸ªç‰¹å®šå…ƒç´ ï¼ˆ$pullAllï¼‰ï¼š<br><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">db</span>.game.<span class="keyword">update</span>(&#123;<span class="string">"_id"</span>: 123&#125;, &#123;<span class="string">"$pullAll"</span>: &#123;<span class="keyword">score</span>: [123,12]&#125;&#125;)</span><br></pre></td></tr></table></figure></p><p>ä¸Šé¢çš„è¯­å¥è¡¨ç¤ºåˆ é™¤æ•°ç»„å†…å€¼ç­‰äº123æˆ–12çš„å…ƒç´ ã€‚</p><p>æ›´æ–°åµŒå¥—æ•°ç»„çš„å€¼ï¼š</p><p>ä½¿ç”¨æ•°ç»„ä¸‹æ ‡ï¼ˆä»0å¼€å§‹ï¼‰ï¼š<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  addres<span class="variable">s:</span> [&#123;place: <span class="string">"nanji"</span>, <span class="keyword">te</span><span class="variable">l:</span><span class="number">123</span>&#125;, &#123;place: <span class="string">"dongbei"</span>, <span class="keyword">te</span><span class="variable">l:</span><span class="number">321</span>&#125;]</span><br><span class="line">&#125;</span><br><span class="line">db.game.<span class="keyword">update</span>(&#123;<span class="string">"_id"</span>: <span class="number">123</span>&#125;, &#123;<span class="string">"$set"</span>: &#123;<span class="string">"address.0.tel"</span>: <span class="number">213</span>&#125;&#125;)</span><br></pre></td></tr></table></figure></p><p>å¦‚æœä½ ä¸çŸ¥é“è¦æ›´æ–°æ•°ç»„å“ªé¡¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨$æ“ä½œç¬¦ï¼ˆ $è¡¨ç¤ºè‡ªèº«ï¼Œä¹Ÿå°±æ˜¯æŒ‰æŸ¥è¯¢æ¡ä»¶æ‰¾å‡ºçš„æ•°ç»„é‡Œé¢çš„é¡¹è‡ªèº«ï¼Œè€Œä¸”åªä¼šåº”ç”¨æ‰¾åˆ°çš„ç¬¬ä¸€æ¡æ•°ç»„é¡¹ï¼‰ï¼š<br><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.game.update(&#123;<span class="string">"address.place"</span>: <span class="string">"nanji"</span>&#125;, &#123;<span class="string">"<span class="variable">$set</span>"</span>: &#123;<span class="string">"address.<span class="variable">$</span>.tel"</span>: <span class="number">123</span>&#125;&#125;)</span><br></pre></td></tr></table></figure></p><p>åœ¨ä¸Šé¢çš„è¯­å¥ä¸­ï¼Œ$å°±æ˜¯æŸ¥è¯¢æ¡ä»¶<code>{&quot;address.place&quot;: &quot;nanji&quot;}</code>çš„æŸ¥è¯¢ç»“æœï¼Œä¹Ÿå°±æ˜¯<code>{place: &quot;nanji&quot;, tel: 123}</code>ï¼Œæ‰€ä»¥<code>{&quot;address.$.tel&quot;: 123}</code>ä¹Ÿå°±æ˜¯<code>{&quot;address.{place: &quot;nanji&quot;, tel: 123}.tel&quot;: 123}</code></p><p>4ã€åˆ é™¤ï¼ˆremoveï¼‰<br>åˆ é™¤æ‰€æœ‰æ–‡æ¡£ï¼š<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">delete <span class="keyword">from</span> article</span><br><span class="line">db.article.<span class="builtin-name">remove</span>()</span><br></pre></td></tr></table></figure></p><p>åˆ é™¤æŒ‡å®šæ–‡æ¡£ï¼š<br><figure class="highlight sas"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">delete</span><span class="meta">from</span> article <span class="meta">where</span><span class="meta">title</span> = <span class="string">"mongodb"</span></span><br><span class="line">db.article.<span class="meta">remove</span>(&#123;<span class="meta">title</span>: <span class="string">"mongodb"</span>&#125;)</span><br></pre></td></tr></table></figure></p><p>MongoDBç‰¹æœ‰çš„è¯­å¥</p><ol><li>æ•°ç»„æŸ¥è¯¢<br>ï¼ˆ1ï¼‰æ•°ç»„çš„æ™®é€šæŸ¥è¯¢<br>å‡å¦‚typeæ˜¯[â€œmongodbâ€, â€œjavascriptâ€]ï¼š<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.article.<span class="builtin-name">find</span>(&#123;<span class="string">"type"</span>: <span class="string">"mongodb"</span>&#125;)</span><br></pre></td></tr></table></figure></li></ol><p>ä¸Šé¢çš„è¯­å¥å¯ä»¥åŒ¹é…æˆåŠŸã€‚</p><p>ï¼ˆ2ï¼‰å¤šä¸ªå…ƒç´ çš„æŸ¥è¯¢<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.article.<span class="builtin-name">find</span>(&#123;<span class="string">"type"</span>: &#123;<span class="string">"<span class="variable">$all</span>"</span>: [<span class="string">"mongodb"</span>, <span class="string">"javascript"</span>]&#125;&#125;)</span><br></pre></td></tr></table></figure></p><p>åªæœ‰typeæ•°ç»„åŒæ—¶å­˜åœ¨mongodbå’Œjavascriptæ‰ä¼šåŒ¹é…ã€‚</p><p>ï¼ˆ3ï¼‰é™åˆ¶æ•°ç»„é•¿åº¦æŸ¥è¯¢<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.article.<span class="builtin-name">find</span>(&#123;<span class="string">"type"</span>: &#123;<span class="string">"<span class="variable">$size</span>"</span>: 2&#125;&#125;)</span><br></pre></td></tr></table></figure></p><p>åªæœ‰æ•°ç»„çš„é•¿åº¦æ˜¯2æ‰ä¼šåŒ¹é…</p><p>æ³¨ï¼štypeå¿…é¡»æ˜¯æ•°ç»„</p><p>ï¼ˆ4ï¼‰è¿”å›ç‰¹å®šæ•°é‡</p><p>å½“$sliceçš„å‚æ•°æ˜¯ä¸€ä¸ªæ—¶ï¼Œè¡¨ç¤ºè¿”å›çš„æ•°é‡;å½“æ˜¯ä¸€ä¸ªæ•°ç»„æ—¶ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºåç§»é‡ï¼Œç¬¬äºŒä¸ªè¡¨ç¤ºè¿”å›çš„æ•°é‡ï¼š<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">db.article.<span class="built_in">find</span>(&#123;<span class="string">"type"</span>: &#123;<span class="string">"$slice"</span>: <span class="number">1</span>&#125;&#125;) <span class="comment">// è¿”å›ç¬¬1ä¸ª</span></span><br><span class="line">db.article.<span class="built_in">find</span>(&#123;<span class="string">"type"</span>: &#123;<span class="string">"$slice"</span>: <span class="number">-1</span>&#125;&#125;)  <span class="comment">// è¿”å›æœ€åä¸€ä¸ª</span></span><br><span class="line">db.article.<span class="built_in">find</span>(&#123;<span class="string">"type"</span>: &#123;<span class="string">"$slice"</span>: [<span class="number">20</span>, <span class="number">10</span>]&#125;&#125;)  <span class="comment">// ä»ç¬¬21ä¸ªå¼€å§‹ï¼Œè¿”å›10ä¸ªï¼Œä¹Ÿå°±æ˜¯21ï½30</span></span><br></pre></td></tr></table></figure></p><p>æ³¨ï¼š$sliceé’ˆå¯¹çš„æ˜¯æ•°ç»„</p><p>ï¼ˆ5ï¼‰å…ƒç´ åŒ¹é…</p><p>å¦‚æœæ–‡æ¡£ä¸­æœ‰ä¸€ä¸ªå­—æ®µçš„å€¼æ˜¯æ•°ç»„ï¼Œå¯ä»¥ä½¿ç”¨$elemMatchæ¥åŒ¹é…æ•°ç»„å†…çš„å…ƒç´ ï¼š<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="attr">kown:</span><span class="string">[&#123;</span><span class="attr">a:</span><span class="number">2</span><span class="string">,</span><span class="attr">b:</span><span class="number">4</span><span class="string">&#125;,</span><span class="number">10</span><span class="string">,</span><span class="string">&#123;</span><span class="attr">a:</span><span class="number">4</span><span class="string">&#125;,</span><span class="string">&#123;b:10&#125;]</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">db.article.find(&#123;"kown":</span><span class="string">&#123;</span><span class="string">"$elemMatch"</span><span class="string">:</span><span class="string">&#123;a:</span><span class="number">1</span><span class="string">,</span><span class="attr">b:</span><span class="string">&#123;"$gt":</span><span class="number">2</span><span class="string">&#125;&#125;&#125;&#125;)</span></span><br></pre></td></tr></table></figure></p><p>åªæœ‰a=1ä¸”b&gt;2æ‰ä¼šåŒ¹é…ã€‚</p><ol start="2"><li><p>å–æ¨¡ï¼ˆ$modï¼‰<br>æ¯”å¦‚æˆ‘ä»¬è¦åŒ¹é… read % 5 == 1ï¼š</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.article.<span class="builtin-name">find</span>(&#123;<span class="string">"read"</span>: &#123;<span class="variable">$mod</span>: [5, 1]&#125;&#125;)</span><br></pre></td></tr></table></figure></li><li><p>æ˜¯å¦å­˜åœ¨ï¼ˆ$exists)<br>å¦‚æœæˆ‘ä»¬è¦åˆ¤æ–­loveå­—æ®µæ˜¯å¦å­˜åœ¨ï¼Œå¯ä»¥è¿™æ ·ï¼š</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.article.<span class="built_in">find</span>(&#123;<span class="string">"love"</span>: &#123;<span class="string">"$exists"</span>: <span class="literal">true</span>&#125;&#125;)  <span class="comment">// å¦‚æœå­˜åœ¨å­—æ®µloveï¼Œå°±è¿”å›</span></span><br></pre></td></tr></table></figure></li></ol><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ¤æ–­ä¸å­˜åœ¨ï¼š<br><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.article.<span class="built_in">find</span>(&#123;<span class="string">"love"</span>: &#123;<span class="string">"$exists"</span>: <span class="literal">false</span>&#125;&#125;) <span class="comment">// å¦‚æœä¸å­˜åœ¨å­—æ®µloveï¼Œå°±è¿”å›</span></span><br></pre></td></tr></table></figure></p><ol start="4"><li>æ­£åˆ™è¡¨è¾¾å¼</li></ol><p>mongodbæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼ï¼Œä½¿ç”¨æ–¹æ³•ä¸æ­£åˆ™å­—é¢é‡ä¸€æ ·ï¼š<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.article.<span class="keyword">find</span>(&#123;<span class="string">"title"</span>: <span class="regexp">/mongodb/i</span>&#125;)  <span class="comment">// iæ˜¯å¿½ç•¥å¤§å°å†™</span></span><br></pre></td></tr></table></figure></p><ol start="5"><li>ç±»å‹æŸ¥è¯¢<br>æˆ‘ä»¬å¯ä»¥æ ¹æ®å­—æ®µç±»å‹æ¥è¿”å›æ•°æ®ï¼š<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.article.<span class="builtin-name">find</span>(&#123;<span class="string">"comments"</span>: &#123;<span class="string">"<span class="variable">$type</span>"</span>: 4&#125;&#125;)</span><br></pre></td></tr></table></figure></li></ol><p>åªæœ‰å½“commentsçš„ç±»å‹æ˜¯æ•°ç»„æ‰åŒ¹é…</p><p>æ³¨ï¼šæ›´å¤šç±»å‹çš„æ•°å€¼å¯ä»¥å‚è€ƒè¿™é‡Œï¼šmongodb $type</p><ol start="6"><li>å†…åµŒæ–‡æ¡£<br>mongodbæ˜¯å…è®¸å†…åµŒæ–‡æ¡£çš„ï¼Œè€Œä¸”è¦æŸ¥è¯¢å†…åµŒæ–‡æ¡£ä¹Ÿå¾ˆç®€å•ï¼ˆä½¿ç”¨ç‚¹è¯­æ³•ï¼‰ï¼š<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  address: &#123; name: <span class="string">"nanji"</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line">db.article.<span class="builtin-name">find</span>(&#123;<span class="string">"address.name"</span>: <span class="string">"nanji"</span>&#125;)</span><br></pre></td></tr></table></figure></li></ol><p>ä¸Šé¢çš„è¯­å¥æ˜¯æŸ¥è¯¢commentsä¸­çš„authorã€‚</p><p>æ•°ç»„ä¹Ÿå¯ä»¥é‡‡å–ç‚¹è¯­æ³•:<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="symbol">  comments:</span> [&#123;<span class="string">title:</span><span class="string">"mongodb"</span>&#125;, &#123;<span class="string">title:</span><span class="string">"javascript"</span>&#125;]</span><br><span class="line">&#125;</span><br><span class="line">db.article.find(&#123;<span class="string">"comments.title"</span>: <span class="string">"mongodb"</span>&#125;)</span><br></pre></td></tr></table></figure></p><ol start="7"><li>å–å<br>$notæ˜¯å…ƒè¯­å¥ï¼Œå³å¯ä»¥ç”¨åœ¨ä»»ä½•å…¶ä»–æ¡ä»¶ä¹‹ä¸Šï¼š<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.article.<span class="builtin-name">find</span>(&#123;<span class="string">"author"</span>: &#123;<span class="string">"<span class="variable">$not</span>"</span>: /mongodb/i&#125;&#125;)</span><br></pre></td></tr></table></figure></li></ol><p>åªè¦ä½¿ç”¨$notæ“ä½œç¬¦ï¼Œå°±è¡¨ç¤ºå–åã€‚</p><p>MongoDBå¸¸ç”¨æ–¹æ³•</p><ol><li>æ§åˆ¶è¿”å›æ•°é‡ï¼ˆlimitï¼‰<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.article</span><span class="selector-class">.find</span>()<span class="selector-class">.limit</span>(10)</span><br></pre></td></tr></table></figure></li></ol><p>è¿”å›10æ¡æ•°æ®</p><ol start="2"><li>ç•¥è¿‡æ•°é‡<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.article</span><span class="selector-class">.find</span>()<span class="selector-class">.skip</span>(5)</span><br></pre></td></tr></table></figure></li></ol><p>ç•¥è¿‡å‰5æ¡æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä»ç¬¬6æ¡å¼€å§‹è¿”å›ã€‚</p><p>å¯ä»¥ç»“åˆlimit()å’Œskip()æ¥è¾¾åˆ°åˆ†é¡µæ•ˆæœï¼š<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * <span class="keyword">from</span> article limit <span class="number">10</span>, <span class="number">20</span></span><br><span class="line">db.article.find().skip(<span class="number">10</span>).limit(<span class="number">20</span>)</span><br></pre></td></tr></table></figure></p><ol start="3"><li>ç»Ÿè®¡</li></ol><p>è¿”å›åŒ¹é…æ•°æ®çš„é•¿åº¦ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.article</span><span class="selector-class">.find</span>()<span class="selector-class">.count</span>()</span><br></pre></td></tr></table></figure></p><ol start="4"><li><p>æ ¼å¼åŒ–<br>pretty()æ–¹æ³•å¯ä»¥ä»¥æ ¼å¼åŒ–çš„æ–¹å¼æ˜¾ç¤ºæ‰€æœ‰æ–‡æ¡£ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.article</span><span class="selector-class">.find</span>()<span class="selector-class">.pretty</span>()</span><br></pre></td></tr></table></figure></li><li><p>åˆ é™¤é›†åˆ<br>å½“ä½ è¦åˆ é™¤ä¸€ä¸ªé›†åˆä¸­çš„æ‰€æœ‰æ–‡æ¡£æ—¶ï¼Œç›´æ¥åˆ é™¤ä¸€ä¸ªé›†åˆæ•ˆç‡ä¼šæ›´é«˜ï¼š</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.article</span><span class="selector-class">.drop</span>()</span><br></pre></td></tr></table></figure></li></ol><p>åŸæ–‡: <a href="http://ghmagical.com/article/page/id/Bj7qgmJ3CJUE" target="_blank" rel="noopener">http://ghmagical.com/article/page/id/Bj7qgmJ3CJUE</a></p>]]></content><summary type="html">
    
      mongodbå¸¸ç”¨æŸ¥è¯¢è¯­å¥æ±‡æ€»
    
    </summary><category term="æ•°æ®åº“" scheme="https://mhynet.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/><category term="mongodb" scheme="https://mhynet.cn/tags/mongodb/"/><category term="æ•°æ®åº“" scheme="https://mhynet.cn/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/></entry><entry><title>expressä¹‹requestå’Œresponseå¯¹è±¡</title><link href="https://mhynet.cn/express_request_and_response.html"/><id>https://mhynet.cn/express_request_and_response.html</id><published>2018-12-25T13:37:53.000Z</published><updated>2020-01-13T04:05:08.195Z</updated><content type="html"><![CDATA[<p>expressæ˜¯åŸºäºNodeæ­å»ºwebåº”ç”¨çš„æ¡†æ¶ï¼Œä½¿ç”¨expresså¯ä»¥å¿«é€Ÿæ­å»ºä¸€ä¸ªç½‘ç«™ï¼Œexpressçš„å’Œæ ¸å¿ƒåŠŸèƒ½æœ‰ä»¥ä¸‹ä¸‰ç‚¹ï¼š</p><ul><li>å¯ä»¥è®¾ç½®ä¸­é—´ä»¶æ¥å“åº” HTTP è¯·æ±‚ã€‚</li><li>å®šä¹‰äº†è·¯ç”±è¡¨ç”¨äºæ‰§è¡Œä¸åŒçš„ HTTP è¯·æ±‚åŠ¨ä½œã€‚</li><li>å¯ä»¥é€šè¿‡å‘æ¨¡æ¿ä¼ é€’å‚æ•°æ¥åŠ¨æ€æ¸²æŸ“ HTML é¡µé¢ã€‚</li></ul><a id="more"></a><h2 id="request-å’Œ-response-å¯¹è±¡çš„å…·ä½“ä»‹ç»ï¼š"><a href="#request-å’Œ-response-å¯¹è±¡çš„å…·ä½“ä»‹ç»ï¼š" class="headerlink" title="request å’Œ response å¯¹è±¡çš„å…·ä½“ä»‹ç»ï¼š"></a>request å’Œ response å¯¹è±¡çš„å…·ä½“ä»‹ç»ï¼š</h2><h3 id="Request-å¯¹è±¡"><a href="#Request-å¯¹è±¡" class="headerlink" title="Request å¯¹è±¡"></a>Request å¯¹è±¡</h3><ul><li>request å¯¹è±¡è¡¨ç¤º HTTP è¯·æ±‚ï¼ŒåŒ…å«äº†è¯·æ±‚æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œå‚æ•°ï¼Œå†…å®¹ï¼ŒHTTP å¤´éƒ¨ç­‰å±æ€§ã€‚</li></ul><p>å¸¸è§å±æ€§æœ‰ï¼š</p><ul><li>req.appï¼šå½“callbackä¸ºå¤–éƒ¨æ–‡ä»¶æ—¶ï¼Œç”¨req.appè®¿é—®expressçš„å®ä¾‹</li><li>req.baseUrlï¼šè·å–è·¯ç”±å½“å‰å®‰è£…çš„URLè·¯å¾„</li><li>req.body / req.cookiesï¼šè·å¾—ã€Œè¯·æ±‚ä¸»ä½“ã€/ Cookies</li><li>req.fresh / req.staleï¼šåˆ¤æ–­è¯·æ±‚æ˜¯å¦è¿˜ã€Œæ–°é²œã€</li><li>req.hostname / req.ipï¼šè·å–ä¸»æœºåå’ŒIPåœ°å€</li><li>req.originalUrlï¼šè·å–åŸå§‹è¯·æ±‚URL</li><li>req.paramsï¼šè·å–è·¯ç”±çš„parameters</li><li>req.pathï¼šè·å–è¯·æ±‚è·¯å¾„</li><li>req.protocolï¼šè·å–åè®®ç±»å‹</li><li>req.queryï¼šè·å–URLçš„æŸ¥è¯¢å‚æ•°ä¸²</li><li>req.routeï¼šè·å–å½“å‰åŒ¹é…çš„è·¯ç”±</li><li>req.subdomainsï¼šè·å–å­åŸŸå</li><li>req.accepts()ï¼šæ£€æŸ¥å¯æ¥å—çš„è¯·æ±‚çš„æ–‡æ¡£ç±»å‹<br>req.acceptsCharsets / req.acceptsEncodings / req.acceptsLanguagesï¼šè¿”å›æŒ‡å®šå­—ç¬¦é›†çš„ç¬¬- ä¸€ä¸ªå¯æ¥å—å­—ç¬¦ç¼–ç </li><li>req.get()ï¼šè·å–æŒ‡å®šçš„HTTPè¯·æ±‚å¤´</li><li>req.is()ï¼šåˆ¤æ–­è¯·æ±‚å¤´Content-Typeçš„MIMEç±»å‹</li></ul><h3 id="Response-å¯¹è±¡"><a href="#Response-å¯¹è±¡" class="headerlink" title="Response å¯¹è±¡"></a>Response å¯¹è±¡</h3><ul><li>response å¯¹è±¡è¡¨ç¤º HTTP å“åº”ï¼Œå³åœ¨æ¥æ”¶åˆ°è¯·æ±‚æ—¶å‘å®¢æˆ·ç«¯å‘é€çš„ HTTP å“åº”æ•°æ®ã€‚</li></ul><p>å¸¸è§å±æ€§æœ‰ï¼š</p><ul><li>res.appï¼šåŒreq.appä¸€æ ·</li><li>res.append()ï¼šè¿½åŠ æŒ‡å®šHTTPå¤´</li><li>res.set()åœ¨res.append()åå°†é‡ç½®ä¹‹å‰è®¾ç½®çš„å¤´</li><li>res.cookie(nameï¼Œvalue [ï¼Œoption])ï¼šè®¾ç½®Cookie</li><li>opition: domain / expires / httpOnly / maxAge / path / secure / signed</li><li>res.clearCookie()ï¼šæ¸…é™¤Cookie</li><li>res.download()ï¼šä¼ é€æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶</li><li>res.get()ï¼šè¿”å›æŒ‡å®šçš„HTTPå¤´</li><li>res.json()ï¼šä¼ é€JSONå“åº”</li><li>res.jsonp()ï¼šä¼ é€JSONPå“åº”</li><li>res.location()ï¼šåªè®¾ç½®å“åº”çš„Location HTTPå¤´ï¼Œä¸è®¾ç½®çŠ¶æ€ç æˆ–è€…close response</li><li>res.redirect()ï¼šè®¾ç½®å“åº”çš„Location HTTPå¤´ï¼Œå¹¶ä¸”è®¾ç½®çŠ¶æ€ç 302</li><li>res.render(view,[locals],callback)ï¼šæ¸²æŸ“ä¸€ä¸ªviewï¼ŒåŒæ—¶å‘callbackä¼ é€’æ¸²æŸ“åçš„å­—ç¬¦ä¸²ï¼Œå¦‚æœåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­æœ‰é”™è¯¯å‘ç”Ÿnext(err)å°†ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚callbackå°†ä¼šè¢«ä¼ å…¥ä¸€ä¸ªå¯èƒ½å‘ç”Ÿçš„é”™è¯¯ä»¥åŠæ¸²æŸ“åçš„- é¡µé¢ï¼Œè¿™æ ·å°±ä¸ä¼šè‡ªåŠ¨è¾“å‡ºäº†ã€‚</li><li>res.send()ï¼šä¼ é€HTTPå“åº”</li><li>res.sendFile(path [ï¼Œoptions] [ï¼Œfn])ï¼šä¼ é€æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶ -ä¼šè‡ªåŠ¨æ ¹æ®æ–‡ä»¶extensionè®¾å®š- Content-Type</li><li>res.set()ï¼šè®¾ç½®HTTPå¤´ï¼Œä¼ å…¥objectå¯ä»¥ä¸€æ¬¡è®¾ç½®å¤šä¸ªå¤´</li><li>res.status()ï¼šè®¾ç½®HTTPçŠ¶æ€ç </li><li>res.type()ï¼šè®¾ç½®Content-Typeçš„MIMEç±»å‹</li></ul><h3 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">//  ä¸»é¡µè¾“å‡º "Hello World"</span></span><br><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"ä¸»é¡µ GET è¯·æ±‚"</span>);</span><br><span class="line">   res.send(<span class="string">'Hello GET'</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//  POST è¯·æ±‚</span></span><br><span class="line">app.post(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"ä¸»é¡µ POST è¯·æ±‚"</span>);</span><br><span class="line">   res.send(<span class="string">'Hello POST'</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//  /del_user é¡µé¢å“åº”</span></span><br><span class="line">app.get(<span class="string">'/del_user'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"/del_user å“åº” DELETE è¯·æ±‚"</span>);</span><br><span class="line">   res.send(<span class="string">'åˆ é™¤é¡µé¢'</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//  /list_user é¡µé¢ GET è¯·æ±‚</span></span><br><span class="line">app.get(<span class="string">'/list_user'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"/list_user GET è¯·æ±‚"</span>);</span><br><span class="line">   res.send(<span class="string">'ç”¨æˆ·åˆ—è¡¨é¡µé¢'</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹é¡µé¢ abcd, abxcd, ab123cd, ç­‰å“åº” GET è¯·æ±‚</span></span><br><span class="line">app.get(<span class="string">'/ab*cd'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"/ab*cd GET è¯·æ±‚"</span>);</span><br><span class="line">   res.send(<span class="string">'æ­£åˆ™åŒ¹é…'</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = app.listen(<span class="number">8081</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> host = server.address().address</span><br><span class="line"><span class="keyword">var</span> port = server.address().port</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s"</span>, host, port)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="é™æ€æ–‡ä»¶"><a href="#é™æ€æ–‡ä»¶" class="headerlink" title="é™æ€æ–‡ä»¶"></a>é™æ€æ–‡ä»¶</h3><p>Express æä¾›äº†å†…ç½®çš„ä¸­é—´ä»¶ express.static æ¥è®¾ç½®é™æ€æ–‡ä»¶å¦‚ï¼šå›¾ç‰‡ï¼Œ CSS, JavaScript ç­‰ã€‚</p><p>ä½ å¯ä»¥ä½¿ç”¨ express.static ä¸­é—´ä»¶æ¥è®¾ç½®é™æ€æ–‡ä»¶è·¯å¾„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ å°†å›¾ç‰‡ï¼Œ CSS, JavaScript æ–‡ä»¶æ”¾åœ¨ public ç›®å½•ä¸‹ï¼Œä½ å¯ä»¥è¿™ä¹ˆå†™ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.use(express.static(<span class="string">'public'</span>));</span><br></pre></td></tr></table></figure></p><p>å‡è®¾æœ‰ä¸€å¼ å›¾ç‰‡/public/images/logo.pngï¼Œåº”ç”¨æ·»åŠ å¤„ç†é™æ€æ–‡ä»¶çš„åŠŸèƒ½å®ä¾‹ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line">app.use(express.static(<span class="string">'public'</span>));</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">   res.send(<span class="string">'Hello World'</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = app.listen(<span class="number">8081</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> host = server.address().address</span><br><span class="line"><span class="keyword">var</span> port = server.address().port</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s"</span>, host, port)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>ç”¨nodeå¯åŠ¨è¯¥æ–‡ä»¶åï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—® <a href="http://127.0.0.1:8081/images/logo.pngï¼Œ" target="_blank" rel="noopener">http://127.0.0.1:8081/images/logo.pngï¼Œ</a> å³å¯çœ‹åˆ°/public/images/logoå›¾ç‰‡</p><p>ä½¿ç”¨postè¯·æ±‚çš„å®ä¾‹<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">'body-parser'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º application/x-www-form-urlencoded ç¼–ç è§£æ</span></span><br><span class="line"><span class="keyword">var</span> urlencodedParser = bodyParser.urlencoded(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;)</span><br><span class="line"></span><br><span class="line">app.use(express.static(<span class="string">'public'</span>));</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/index.htm'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line">   res.sendFile( __dirname + <span class="string">"/"</span> + <span class="string">"index.htm"</span> );</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.post(<span class="string">'/process_post'</span>, urlencodedParser, <span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º JSON æ ¼å¼</span></span><br><span class="line"><span class="keyword">var</span> response = &#123;</span><br><span class="line"><span class="string">"first_name"</span>:req.body.first_name,</span><br><span class="line"><span class="string">"last_name"</span>:req.body.last_name</span><br><span class="line">   &#125;;</span><br><span class="line"><span class="built_in">console</span>.log(response);</span><br><span class="line">   res.end(<span class="built_in">JSON</span>.stringify(response));</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = app.listen(<span class="number">8081</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> host = server.address().address</span><br><span class="line"><span class="keyword">var</span> port = server.address().port</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s"</span>, host, port)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨ä¸­é—´ä»¶å‘nodeæœåŠ¡å™¨å‘é€cookieçš„å®ä¾‹<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// express_cookie.js æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">var</span> express      = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> cookieParser = <span class="built_in">require</span>(<span class="string">'cookie-parser'</span>)</span><br><span class="line"><span class="keyword">var</span> util = <span class="built_in">require</span>(<span class="string">'util'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = express()</span><br><span class="line">app.use(cookieParser())</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>) </span>&#123;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"Cookies: "</span> + util.inspect(req.cookies));</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8081</span>)</span><br></pre></td></tr></table></figure></p><h3 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h3><p>expressæ˜¯åŸºäºnodeå¿«é€Ÿæ­å»ºç½‘ç«™çš„æ¡†æ¶ï¼Œåº•å±‚å®ç°ä½¿ç”¨äº†promise + callbackçš„æ–¹å¼ï¼ŒåŠŸèƒ½å…¨é¢ã€‚ä½†æ˜¯æ¯”è¾ƒæ¨èçš„æ˜¯koa2ï¼Œkoa2æ˜¯koa2.0ç‰ˆæœ¬ä¹‹åçš„ç§°å‘¼ï¼Œkoa1.0ç‰ˆæœ¬ä½¿ç”¨äº†generatorå‡½æ•°å®ç°ï¼Œ2.0ä½¿ç”¨äº†async/awaitå‡½æ•°å®ç°ï¼Œéå¸¸ç²¾ç®€ï¼Œä½†æ˜¯åŠŸèƒ½å¹¶ä¸æ¯”Expresså°‘ï¼Œexpressèƒ½åšçš„koaéƒ½èƒ½åšï¼Œè€Œä¸”åšå¾—æ›´å¥½ã€‚ä¸åŒçš„æ˜¯ï¼ŒkoaæŠŠexpressçš„éƒ¨åˆ†åŠŸèƒ½æ‹†åˆ†å‡ºå»äº†ï¼Œä½¿ç”¨çš„æ—¶å€™å¯ä»¥æ ¹æ®éœ€æ±‚åˆç†å¼•å…¥ä¸­é—´ä»¶ï¼Œæ¯”å¦‚koa-routerã€‚åœ¨ä¸Šä¸€å®¶å…¬å¸çš„æ—¶å€™ä½¿ç”¨è¿‡koa1.0å¤šé¡µé¢çš„ç”µå•†ç½‘ç«™ï¼Œå‰ç«¯é¡¹ç›®é›†æˆäº†éƒ¨åˆ†nodeä»£ç å®ç°é¡µé¢è·¯ç”±å’ŒæœåŠ¡çš„æ¸²æŸ“ï¼Œä½“éªŒéå¸¸æ£’ï¼Œä¹Ÿé˜…è¯»è¿‡å…¬å¸å†…éƒ¨ä½¿ç”¨koa2.0çš„åå°é¡¹ç›®ï¼Œæ„Ÿè§‰æ›´å‹å¥½ä¸€äº›ã€‚<br>æœ¬ç¯‡åšå®¢å¤§éƒ¨åˆ†å†…å®¹éƒ½æ˜¯æ‘˜è‡ª<a href="http://www.runoob.com/nodejs/nodejs-express-framework.html" target="_blank" rel="noopener">runoob</a>ï¼Œä¸æ˜¯åŸåˆ›ï¼Œç®—æ˜¯ä¸€ç¯‡ä»‹ç»expressçš„ç¬”è®°å§ã€‚</p>]]></content><summary type="html">
    
      expressæ˜¯åŸºäºNodejsæ­å»ºçš„webåº”ç”¨æ¡†æ¶ï¼Œä½¿ç”¨expresså¯ä»¥å¿«é€Ÿæ­å»ºä¸€ä¸ªç½‘ç«™ã€‚
    
    </summary><category term="åç«¯" scheme="https://mhynet.cn/categories/%E5%90%8E%E7%AB%AF/"/><category term="javascript" scheme="https://mhynet.cn/tags/javascript/"/><category term="node" scheme="https://mhynet.cn/tags/node/"/></entry><entry><title>hexo+githubåšå®¢å¤šè®¾å¤‡åŒæ­¥</title><link href="https://mhynet.cn/hexo-mutl-device-sync.html"/><id>https://mhynet.cn/hexo-mutl-device-sync.html</id><published>2018-10-19T03:25:59.000Z</published><updated>2020-01-13T04:05:08.196Z</updated><content type="html"><![CDATA[<p>ä¸ºä»€ä¹ˆhexoåšå®¢éœ€è¦å¤šè®¾å¤‡åŒæ­¥å‘¢ï¼Ÿ</p><p>å¾ˆå¤šåŸºäºhexoçš„åšå®¢çš„ä¸»é¢˜éƒ½æ˜¯å¼•ç”¨çš„ç¬¬ä¸‰æ–¹çš„ä¸»é¢˜é¡¹ç›®å•Šï¼Œä½œä¸ºä¸€ä¸ªç¬¬ä¸‰æ–¹çš„é¡¹ç›®ï¼Œå¯¼å…¥åˆ°è‡ªå·±åšå®¢é¡¹ç›®çš„themesç›®å½•ä¸‹ä¹‹åï¼Œä½œä¸ºä¸€ä¸ªsubproject æ˜¯æ— æ³•commitåˆ°è‡ªå·±çš„é¡¹ç›®ä¸‹çš„ï¼Œåˆ é™¤åŸé¡¹ç›®çš„.gitæ–‡ä»¶æŠŠæ•´ä¸ªä¸»é¢˜åŒ…åµŒå…¥è‡ªå·±é¡¹ç›®ä¹Ÿè¡Œï¼Œä½†æ˜¯ä¹Ÿéœ€è¦å°Šé‡ä¸€ä¸‹ä¸»é¢˜çš„å¼€å‘è€…å‘€ã€‚<br><a id="more"></a></p><p>è¿™æ ·ä¸€æ¥ï¼Œåœ¨ä¸€ä¸ªæ–°è®¾å¤‡ä¸Š<code>git pull</code>äº†è‡ªå·±çš„é¡¹ç›®åè¿˜è¦å»<code>git pull</code>ä¸»é¢˜ç›®å½•ï¼Œç›´æ¥æ‹‰ä¸‹æ¥çš„ä¸»é¢˜åŒ…çš„é…ç½®æ–‡ä»¶<code>_config.yml</code>æ–‡ä»¶ä¸€èˆ¬éƒ½éœ€è¦ä¿®æ”¹ä¸‹å§ï¼Œå¦‚æœæœ‰googleã€ç™¾åº¦ç»Ÿè®¡ç›¸å…³çš„ä»£ç éœ€è¦æ·»åŠ åˆ°ä¸»é¢˜ä¸­çš„ç›¸å…³æ–‡ä»¶ä¸­çš„ï¼Œå°±éœ€è¦æ”¹ä¸‹åŸæ¥çš„ä¸»é¢˜æ–‡ä»¶äº†ï¼Œè¿™äº›æ”¹çš„ç¬¬ä¸€æ¬¡æ”¹åŠ¨ä¹‹åï¼Œä¸‹ä¸€æ¬¡ä½ è¿˜è®°å¾—æ€ä¹ˆæ”¹ä¸? ä¸è®°å¾—å•¦ï¼é‚£åªå¥½åœ¨ç›¸å…³æ–‡ä»¶é‡Œé¢è®°å½•ä¸‹æ¥ï¼Œä¸‹æ¬¡ç›´æ¥å‚è€ƒè¯¥è®°å½•æ¥é‡æ–°é…ç½®ä¸‹å§ï¼Œæ‰‹åŠ¨é…ç½®æ„Ÿè§‰å¾ˆéº»çƒ¦ï¼Œé‚£å°±å†™ä¸€ä¸ªshellè„šæœ¬ï¼Œä¸‹æ¬¡ç›´æ¥æ‰§è¡Œä»¥ä¸‹è¯¥è„šæœ¬å°±è‡ªåŠ¨é…ç½®å¥½å•¦ï¼</p><p>è¿™é‡Œè´´ä¸€ä¸‹æˆ‘çš„è‡ªåŠ¨åŒ–é…ç½®shellè„šæœ¬ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">localRepo=<span class="string">"<span class="variable">$HOME</span>/hexo-theme-BlueLake"</span></span><br><span class="line">floader=<span class="string">"themes/BlueLake"</span></span><br><span class="line">subGitFloader=<span class="string">"themes/BlueLake/.git"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ ! -d <span class="string">"<span class="variable">$localRepo</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span><span class="string">"1. local BlueLake theme repostory not exist and start clone from remote......"</span></span><br><span class="line"><span class="built_in">echo</span> $( git <span class="built_in">clone</span> git@github.com:chaooo/hexo-theme-BlueLake.git &amp;&amp; mv <span class="string">"hexo-theme-BlueLake"</span><span class="string">"<span class="variable">$HOME</span>/"</span> )</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span><span class="string">"1. local BlueLake theme repostory exist!"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="string">"<span class="variable">$floader</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">     rm -rf <span class="string">"<span class="variable">$floader</span>"</span> &amp;&amp; <span class="built_in">echo</span><span class="string">"2.remove themes/BlueLake success!"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">cp -Rf <span class="string">"<span class="variable">$HOME</span>/hexo-theme-BlueLake"</span><span class="string">"themes/BlueLake"</span> &amp;&amp; <span class="built_in">echo</span><span class="string">"3. copy thems successed!"</span> || <span class="built_in">echo</span><span class="string">"3. copy thems failed!"</span></span><br><span class="line"></span><br><span class="line">cat <span class="string">"source/_data/BlueLake_theme_config.yml"</span> &gt; <span class="string">"<span class="variable">$floader</span>/_config.yml"</span> &amp;&amp; <span class="built_in">echo</span><span class="string">"4. move _config.yml successed!"</span></span><br><span class="line"></span><br><span class="line">cat <span class="string">"source/_data/baidu_config_script.jade"</span> &gt;&gt; <span class="string">"themes/BlueLake/layout/_partial/after_footer.jade"</span> &amp;&amp; <span class="built_in">echo</span><span class="string">"5. add baidu_config_script success!"</span> || <span class="built_in">echo</span><span class="string">"5. add baidu_config_script failed!"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="string">"<span class="variable">$subGitFloader</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> $( rm -rf <span class="variable">$&#123;subGitFloader&#125;</span> ) &amp;&amp; <span class="built_in">echo</span><span class="string">"6.remove <span class="variable">$&#123;subGitFloader&#125;</span> succsssful!"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></p><p>è‡ªä»å†™å¥½è¿™æ®µè„šæœ¬åå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæ›´æ¢æ–°è®¾å¤‡åé‡æ–°éƒ¨ç½²hexoåšå®¢çš„é—®é¢˜å•¦ã€‚</p><p>ä¸ºä»€ä¹ˆéœ€è¦ç»å¸¸éƒ¨ç½²åšå®¢å‘¢ï¼Ÿæˆ‘çˆ±æŠ˜è…¾å•Šï¼Œç”µè„‘ç»å¸¸æ¢ç³»ç»Ÿå•Šï¼Œè™šæ‹Ÿæœºubuntuï¼ŒWindowsï¼ŒMac OS XåŒç³»ç»Ÿï¼Œè¿‘ä¸€å¹´æ¥é‡è£…äº†å¥½å¤šæ¬¡ç³»ç»Ÿå•Šï¼Œæ¯æ¬¡éƒ½é‡æ–°éƒ¨ç½²å¼€å‘ç¯å¢ƒå¥½éº»çƒ¦ï¼Œè€Œä¸”æ¢å·¥ä½œä¹‹åä¹Ÿä¼šæ›´æ¢ç”µè„‘å•Šã€‚</p><p>å¦‚æœæ‹…å¿ƒä¸»é¢˜å¼€å‘è€…åç»­æ›´æ–°äº†ä¸»é¢˜å¯¼è‡´åœ¨æ–°è®¾å¤‡ä¸Šéƒ¨ç½²æ—¶ç¯å¢ƒä¸ä¸€è‡´ï¼Œå¯ä»¥æŠŠåŸä¸»é¢˜forkåˆ°è‡ªå·±çš„githubï¼Œç„¶åæŠŠä»“åº“URLæ”¹æˆforkè¿‡æ¥çš„URLå³å¯ã€‚</p><blockquote><p>æ³¨ï¼šåç»­è¡¥å……ï¼Œç°åœ¨æˆ‘å·²ä¸å†ä½¿ç”¨ä»¥ä¸Šæ–¹æ¡ˆåŒæ­¥åšå®¢é…ç½®ï¼Œç™¾åº¦ç«™é•¿å’Œgoogleç«™é•¿éªŒè¯ä½¿ç”¨ html æ ‡ç­¾éªŒè¯æ–¹å¼ï¼Œç›¸åº”çš„è¯†åˆ«ç å·²å†™å…¥é…ç½®æ–‡ä»¶ï¼Œè€Œä¸”å¯ä»¥æŠŠä¸»é¢˜ä¸­çš„éƒ¨åˆ†é…ç½®é¡¹é…ç½®åˆ°é¡¹ç›®çš„é…ç½®ä¸‹ã€‚ä¸»é¢˜åŒæ­¥é‡‡ç”¨äº† git modulesï¼ŒæŠŠåŸä½œè€…çš„ä¸»é¢˜forkåˆ°è‡ªå·±çš„githubï¼Œç„¶åè‡ªå·±ç»´æŠ¤ä¸»é¢˜ä»“åº“ï¼Œè¿™æ ·å¯ä»¥åœ¨åŸä¸»é¢˜çš„åŸºç¡€ä¸Šè¿›è¡ŒåŠŸèƒ½å’Œæ ·å¼çš„è°ƒæ•´å’Œä¼˜åŒ–ã€‚</p></blockquote>]]></content><summary type="html">
    
      å¤šå°è®¾å¤‡å…±ç”¨åŒä¸€å¥—é…ç½®ï¼Œæ¢è®¾å¤‡å¿«é€Ÿéƒ¨ç½²hexoåšå®¢å¼€å‘ç¯å¢ƒ
    
    </summary><category term="åšå®¢" scheme="https://mhynet.cn/categories/%E5%8D%9A%E5%AE%A2/"/><category term="hexo" scheme="https://mhynet.cn/tags/hexo/"/><category term="github" scheme="https://mhynet.cn/tags/github/"/><category term="github pages" scheme="https://mhynet.cn/tags/github-pages/"/><category term="åšå®¢" scheme="https://mhynet.cn/tags/%E5%8D%9A%E5%AE%A2/"/></entry><entry><title>linuxå­¦ä¹ ç¬”è®°(4)</title><link href="https://mhynet.cn/linux-note-4.html"/><id>https://mhynet.cn/linux-note-4.html</id><published>2018-09-22T10:15:31.000Z</published><updated>2020-01-15T07:22:07.428Z</updated><content type="html"><![CDATA[<p>è¿™é‡Œè®°å½•ä¸‹linuxç³»ç»Ÿä¸‹ç”¨æˆ·å’Œç”¨æˆ·ç»„çš„ç®¡ç†æ–¹é¢çš„å­¦ä¹ ç¬”è®°ã€‚<br><a id="more"></a><br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">ç”¨æˆ·: ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„äºº</span></span><br><span class="line"><span class="section">ç”¨æˆ·ç»„: å…·æœ‰ç›¸åŒç³»ç»Ÿæƒé™çš„ä¸€ç»„ç”¨æˆ·</span></span><br></pre></td></tr></table></figure></p><p><code>/etc/group</code> å­˜å‚¨å½“å‰ç³»ç»Ÿä¸­æ‰€æœ‰ç”¨æˆ·ç»„ä¿¡æ¯</p><p>æ ¼å¼ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">group</span><span class="selector-pseudo">:x</span><span class="selector-pseudo">:123</span><span class="selector-pseudo">:ABC</span>,<span class="selector-tag">def</span>,<span class="selector-tag">xyz</span></span><br><span class="line">ç»„åç§°:ç»„å¯†ç å ä½ç¬¦:ç»„ç¼–å·:ç»„ä¸­ç”¨æˆ·åˆ—è¡¨</span><br></pre></td></tr></table></figure></p><p>ç»„åªæœ‰ä¸€ä¸ªç”¨æˆ·ï¼Œç”¨æˆ·ç»„åˆå’Œç”¨æˆ·åç›¸åŒï¼Œç”¨æˆ·ç»„åˆ—è¡¨ä¸ºç©º,<br>rootç”¨æˆ·ç»„çš„ç»„å·ä¸º0,<br>ç¼–å·1~499å…¨éƒ¨æ˜¯åˆ†é…ç»™ç³»ç»Ÿçš„ï¼Œè¶Šæ—©å®‰è£…çš„åº”ç”¨ç»„ç¼–å·è¶Šé å‰,<br>ä¸ªäººç”¨æˆ·ç¼–å·ä»500å¼€å§‹è®¡æ•°,<br>ç»„å¯†ç å ä½ç¬¦å…¨éƒ¨éƒ½æ˜¯x</p><p><code>/etc/gshadow</code> å­˜å‚¨å½“å‰ç³»ç»Ÿä¸­ç”¨æˆ·ç»„çš„å¯†ç ä¿¡æ¯<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">group:*: :abc</span></span><br><span class="line"><span class="section">ç»„åç§°:ç»„å¯†ç :ç»„ç®¡ç†è€…:ç»„ä¸­ç”¨æˆ·åˆ—è¡¨</span></span><br></pre></td></tr></table></figure></p><p>ç»„å¯†ç ä¸º*æˆ–!æˆ–ç©ºè¡¨ç¤ºæ²¡æœ‰ç»„å¯†ç </p><p><code>/etc/paswd</code> å­˜å‚¨å½“å‰ç³»ç»Ÿæ‰€æœ‰ç”¨æˆ·çš„ä¿¡æ¯ã€‚<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user:x:123:456:xxxx:/home/user:/bin/bash</span><br><span class="line">ç”¨æˆ·å:å¯†ç å ä½ç¬¦:ç”¨æˆ·ç¼–å·:ç”¨æˆ·ç»„ç¼–å·:ç”¨æˆ·æ³¨é‡Šä¿¡æ¯:ç”¨æˆ·ä¸»ç›®å½•:shellç±»å‹</span><br></pre></td></tr></table></figure></p><p><code>/etc/shadow</code> å­˜å‚¨å½“å‰ç³»ç»Ÿä¸­æ‰€æœ‰ç”¨æˆ·çš„å¯†ç ä¿¡æ¯ã€‚<br><br>ç”¨æˆ·å’Œç”¨æˆ·ç»„çš„å¯†ç ä¿å­˜åœ¨å•ç‹¬çš„æ–‡ä»¶/etc/gshadow å’Œ/etc/shadowä¸­ï¼Œ éœ€è¦çš„æƒé™è¦æ¯”ä¿å­˜ç”¨æˆ·å’Œç”¨æˆ·ç»„çš„æ–‡ä»¶é«˜å¾ˆå¤š</p><p>ç®¡ç†ç”¨æˆ·ç»„çš„å‘½ä»¤ï¼š</p><ul><li>æ·»åŠ ç”¨æˆ·ç»„ï¼š<br><code>groupadd [ç”¨æˆ·ç»„å]</code></li><li>ä¿®æ”¹ç”¨æˆ·ç»„åï¼š<br><code>groupmod -n [newGroupName] [oldGroupName]</code></li><li>ä¿®æ”¹ç”¨æˆ·ç»„ç¼–å·ï¼š<br><code>groupmid -g 666 [groupName]</code></li><li>åˆ›å»ºç”¨æˆ·ç»„çš„æ—¶å€™æŒ‡å®šç¼–å·ï¼š<br><code>groupadd -g 888 [groupName]</code></li><li><p>åˆ é™¤ç”¨æˆ·ç»„(åˆ é™¤ç”¨æˆ·ç»„ä¹‹å‰å¿…é¡»å…ˆæ¸…ç©ºç»„å†…ç”¨æˆ·ï¼Œ å¦åˆ™è¿™äº›ç”¨æˆ·çš„ç»„ä¿¡æ¯ä¸¢å¤±ï¼Œ æœ‰æƒé™æ–¹é¢çš„å½±å“)ï¼š<br><code>groupdel [groupName]</code></p></li><li><p>ç»„å†…æ·»åŠ ç”¨æˆ·(ç”¨æˆ·ç›®å½•é»˜è®¤åœ¨/homeä¸‹ï¼Œé»˜è®¤åˆ›å»ºä¸€ä¸ªå’Œç”¨æˆ·åç›¸åŒçš„ç”¨æˆ·ç»„)ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useradd userName</span><br><span class="line">useradd -g groupName -d /home/userName userName</span><br></pre></td></tr></table></figure></li><li><p>ç»™ç”¨æˆ·æ·»åŠ å¤‡æ³¨ï¼š<br><code>useradd -c å¤‡æ³¨å†…å®¹ userName</code></p></li><li>æ”¹ç”¨æˆ·åï¼š<br><code>usermod -l æ–°ç”¨æˆ·å æ—§ç”¨æˆ·å</code></li><li>æŒ‡å®šæ–°çš„ç”¨æˆ·æ–‡ä»¶å¤¹ï¼š<br><code>usermod -d /home/mhy mhy</code></li><li>ä¿®æ”¹æ‰€å±ç”¨æˆ·ç»„ï¼š<br><code>usermod -g ç»„å ç”¨æˆ·å</code></li><li>åˆ é™¤è´¦å·ï¼š<br><code>userdel ç”¨æˆ·å</code></li><li>åˆ é™¤çš„åŒæ—¶åˆ é™¤ç”¨æˆ·ç›®å½•:<br><code>userdel -r ç”¨æˆ·å</code></li><li><p>ç¦æ­¢rootä»¥å¤–çš„ç”¨æˆ·ç™»å½•æœåŠ¡å™¨ï¼ˆç©ºæ–‡ä»¶å°±å¯ä»¥ï¼‰ï¼š<br><code>touch /etc/nologin</code></p></li><li><p>é”å®šç”¨æˆ·è´¦æˆ·ï¼š<br><code>passwd -l ç”¨æˆ·å</code></p></li><li>è§£é”ç”¨æˆ·<br><code>passwd -u ç”¨æˆ·å</code></li><li>æ¸…é™¤ç”¨æˆ·çš„å¯†ç ï¼Œæ— å¯†ç ç™»å½•ï¼š<br><code>passwd -d ç”¨æˆ·å</code></li></ul><h3 id="ä¸»è¦ç»„å’Œé™„å±ç»„ï¼š"><a href="#ä¸»è¦ç»„å’Œé™„å±ç»„ï¼š" class="headerlink" title="ä¸»è¦ç»„å’Œé™„å±ç»„ï¼š"></a>ä¸»è¦ç»„å’Œé™„å±ç»„ï¼š</h3><p>ä¸€ä¸ªç”¨æˆ·å¯ä»¥å±äºå¤šä¸ªç»„ï¼Œä¸€ä¸ªä¸»è¦ç»„ï¼Œè‹¥å¹²ä¸ªä¸ªé™„å±ç»„, æ·»åŠ å¤šä¸ªï¼Œç”¨é€—å·è¿æ¥å¤šä¸ªé™„å±ç»„å:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpasswd -a ç”¨æˆ·å  é™„å±ç»„å</span><br></pre></td></tr></table></figure></p><ul><li>åˆ›å»ºç”¨æˆ·æ—¶æŒ‡å®šä¸»è¦ç»„å’Œé™„å±ç»„ï¼š<br>`useradd -g ä¸»è¦ç»„ -G é™„å±ç»„1,è´Ÿæ•°ç»„2  ç”¨æˆ·å</li><li><p>ç”¨æˆ·ç»„è®¾ç½®å¯†ç ï¼š<br><code>gpasswd ç”¨æˆ·ç»„å</code></p></li><li><p>åˆ‡æ¢ç”¨æˆ·èº«ä»½:<br><code>su ç”¨æˆ·å</code></p></li><li><p>æˆ‘æ˜¯è°:<br><code>whoami</code></p></li><li>ç”¨æˆ·ä¿¡æ¯ï¼š<br><code>id ç”¨æˆ·å</code></li><li>æ‰€å±ç»„ï¼š<br><code>groups ç”¨æˆ·å</code></li></ul>]]></content><summary type="html">
    
      linuxå­¦ä¹ ç¬”è®°ä¹‹ç”¨æˆ·å’Œç”¨æˆ·ç»„ç®¡ç†ã€‚
    
    </summary><category term="åç«¯" scheme="https://mhynet.cn/categories/%E5%90%8E%E7%AB%AF/"/><category term="linux" scheme="https://mhynet.cn/tags/linux/"/><category term="bash" scheme="https://mhynet.cn/tags/bash/"/></entry><entry><title>linuxå­¦ä¹ ç¬”è®°(3)</title><link href="https://mhynet.cn/linux-note-3.html"/><id>https://mhynet.cn/linux-note-3.html</id><published>2018-09-11T10:12:07.000Z</published><updated>2020-01-15T07:22:03.946Z</updated><content type="html"><![CDATA[<p>linuxä¸­å¸¸ç”¨çš„å‘½ä»¤ä½¿ç”¨ç¬”è®°ã€‚</p><h2 id="echo-å‘½ä»¤"><a href="#echo-å‘½ä»¤" class="headerlink" title="echo å‘½ä»¤"></a>echo å‘½ä»¤</h2><blockquote><p>echo [é€‰é¡¹] [è¾“å‡ºå†…å®¹]</p></blockquote><p>é€‰é¡¹ï¼š</p><ul><li>-e æ”¯æŒåæ–œæ æ§åˆ¶çš„å­—ç¬¦è½¬æ¢</li></ul><a id="more"></a><table><thead><tr><th>æ§åˆ¶å­—ç¬¦</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>\a</td><td>è¾“å‡ºè­¦å‘ŠéŸ³</td></tr><tr><td>\b</td><td>é€€æ ¼é”®ï¼Œå³å·¦åˆ é™¤é”®</td></tr><tr><td>\n</td><td>æ¢è¡Œç¬¦</td></tr><tr><td>\r</td><td>å›è½¦é”®</td></tr><tr><td>\t</td><td>åˆ¶è¡¨ç¬¦</td></tr><tr><td>\v</td><td>å‚ç›´åˆ¶è¡¨ç¬¦</td></tr><tr><td>\0n</td><td>nn æŒ‰å…«è¿›åˆ¶ASCIIç è¡¨è¾“å‡ºå­—ç¬¦ï¼Œå…¶ä¸­0æ˜¯æ•°å­—é›¶ï¼Œnnnæ˜¯ä¸‰ä½å…«è¿›åˆ¶æ•°</td></tr><tr><td>\xh</td><td>h æŒ‰ç…§åå…­è¿›åˆ¶ASCIIç è¡¨è¾“å‡ºzç¦ã€‚å…¶ä¸­hhæ˜¯ä¸¤ä½åå…­è¿›åˆ¶æ•°</td></tr></tbody></table><h2 id="alias"><a href="#alias" class="headerlink" title="alias"></a>alias</h2><p>eg:<br><code>alias la=&quot;ls -la&quot;</code><br>æŸ¥çœ‹ç³»ç»Ÿä¸­çš„åˆ«åï¼š<br><code>alias</code><br>1.ä¸´æ—¶è®¾ç½®åˆ«åï¼š</p><p>å‘½ä»¤è¡Œè¾“å…¥ <code>alias la=&quot;ls -al --color=auto&quot;</code></p><p>2.æ°¸ä¹…è®¾ç½®ï¼š</p><p>å†™å…¥ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶:<br><code>~/.bashrc</code></p><p>3.åˆ é™¤åˆ«åï¼š<br>ä¸´æ—¶åˆ é™¤å¯ä»¥ç›´æ¥è¾“å…¥: <code>unalias la</code>,<br>æ°¸ä¹…åˆ é™¤éœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶</p><ul><li><p>å‘½ä»¤ç”Ÿæ•ˆé¡ºåº</p><ol><li>ç¬¬ä¸€é¡ºä½æ‰§è¡Œç”¨ç»å¯¹è·¯å¾„æ´»æ³¼ç›¸å¯¹è·¯å¾„æ‰§è¡Œçš„å‘½ä»¤</li><li>ç¬¬äºŒé¡ºä½æ‰§è¡Œåˆ«å</li><li>ç¬¬ä¸‰æ‰§è¡Œbashçš„å†…éƒ¨å‘½ä»¤</li><li>ç¬¬å››é¡ºä½æ‰§è¡ŒæŒ‰ç…§$PATHç¯å¢ƒå˜é‡å®šä¹‰çš„ç›®å½•æŸ¥æ‰¾é¡ºåºæ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªå‘½ä»¤</li></ol></li><li><p>å‘½ä»¤å¿«æ·é”®</p></li></ul><table><thead><tr><th>å¿«æ·é”®</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td>ctrl + c</td><td>å¼ºè¡Œç»ˆæ­¢</td></tr><tr><td>cmd  + l</td><td>æ¸…å±(æ¸…é™¤ä¸€è¡Œ)</td></tr><tr><td>ctrl + l</td><td>æ¸…å±(å±å¹•ä¸­æ‰€æœ‰è¡Œ), æ•ˆæœåŒclear</td></tr><tr><td>ctrl + a</td><td>å…‰æ ‡ç§»åŠ¨åˆ°å‘½ä»¤è¡Œè¡Œé¦–</td></tr><tr><td>ctrl + e</td><td>å…‰æ ‡ç§»åŠ¨åˆ°å‘½ä»¤è¡Œè¡Œå°¾</td></tr><tr><td>ctrl + u</td><td>ä»å…‰æ ‡ä½ç½®åˆ é™¤åˆ°è¡Œé¦–</td></tr><tr><td>ctrl + z</td><td>æŠŠå‘½ä»¤æ”¾å…¥åå°(å‘½ä»¤æ— æ³•ä½¿ç”¨ctrl + c zç»ˆæ­¢çš„æ—¶å€™ä½¿ç”¨ï¼Œä¸å»ºè®® )</td></tr><tr><td>ctrl + r</td><td>åœ¨å†å²å‘½ä»¤ä¸­æœç´¢</td></tr><tr><td>ctrl + å·¦å³æ–¹å‘é”®</td><td>æŒ‰å•è¯å·¦å³ç§»åŠ¨å…‰æ ‡</td></tr></tbody></table><h2 id="å†å²å‘½ä»¤"><a href="#å†å²å‘½ä»¤" class="headerlink" title="å†å²å‘½ä»¤"></a>å†å²å‘½ä»¤</h2><p>ä¸Šä¸‹ç®­å¤´è¯»å–å†å²å‘½ä»¤</p><ul><li>è¯»å–æ‰€æœ‰å†å²å‘½ä»¤</li></ul><p><code>history [é€‰é¡¹] [å†å²å‘½ä»¤ä¿å­˜æ–‡ä»¶]</code></p><p>é€‰é¡¹ï¼š</p><ul><li>-c æ¸…ç©ºå†å²å‘½ä»¤</li><li>-w æŠŠç¼“å­˜ä¸­çš„å†å²å‘½ä»¤å†™å…¥å†å²å‘½ä»¤ä¿å­˜æ–‡ä»¶ <code>~/.bash_history</code></li></ul><p>æ³¨æ„: historyå‘½ä»¤ä¸­çš„å‘½ä»¤åŒ…æ‹¬æ–‡ä»¶ä¿å­˜çš„å’Œå½“å‰ç™»å½•è¾“å…¥çš„æ‰€æœ‰å‘½ä»¤ï¼Œ æ–‡ä»¶åªä¼šåœ¨ç™»å‡ºçš„æ—¶å€™æ‰ä¼šä¸»åŠ¨ä¿å­˜åˆ°æ–‡ä»¶ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡<code>-w</code>é€‰é¡¹æŠŠå½“å‰ç™»å½•åçš„å†å²å‘½ä»¤æ‰‹åŠ¨ä¿å­˜åœ¨æ–‡ä»¶ä¸­</p><p>å†å²å‘½ä»¤é»˜è®¤ä¿å­˜1000æ¡ï¼Œå¯ä»¥åœ¨<code>/etc/profile</code>ä¸­çš„<code>HISTSIZE=1000</code>å­—æ®µä¸­è®¾ç½®</p><ol><li><em>ä½¿ç”¨<code>!n</code>é‡å¤æ‰§è¡Œç¬¬næ¡å†å²å‘½ä»¤</em></li><li><em>ä½¿ç”¨<code>!å­—ä¸²</code>é‡å¤æ‰§è¡Œæœ€åä¸€æ¡ä»¥è¯¥å­—ä¸²å¼€å¤´çš„å‘½ä»¤</em></li><li>ä½¿ç”¨<code>!!</code>é‡å¤æ‰§è¡Œä¸Šä¸€æ¡å‘½ä»¤</li></ol><ul><li>å‘½ä»¤å’Œæ–‡ä»¶è¡¥å…¨</li></ul><p>åœ¨bashä¸­ï¼ŒæŒ‰tabé”®è‡ªåŠ¨è¡¥å…¨å‘½ä»¤ã€æ–‡ä»¶è·¯å¾„ï¼Œ å¯¹æé«˜è¾“å…¥é€Ÿåº¦å’Œæ’é”™éå¸¸æœ‰ç”¨</p><h2 id="è¾“å‡ºé‡å®šå‘"><a href="#è¾“å‡ºé‡å®šå‘" class="headerlink" title="è¾“å‡ºé‡å®šå‘"></a>è¾“å‡ºé‡å®šå‘</h2><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">æ ‡å‡†çš„è¾“å…¥è¾“å‡ºè®¾å¤‡:</span><br><span class="line">é”®ç›˜    /dev.stdin  <span class="number">0</span> æ ‡å‡†è¾“å…¥</span><br><span class="line">æ˜¾ç¤ºå™¨  /dev/sdtout <span class="number">1</span> æ ‡å‡†è¾“å‡º</span><br><span class="line">æ˜¾ç¤ºå™¨  /dev/sdterr <span class="number">2</span> æ ‡å‡†é”™è¯¯è¾“å‡º</span><br></pre></td></tr></table></figure><h3 id="æ ‡å‡†è¾“å‡ºé‡å®šå‘ï¼š"><a href="#æ ‡å‡†è¾“å‡ºé‡å®šå‘ï¼š" class="headerlink" title="æ ‡å‡†è¾“å‡ºé‡å®šå‘ï¼š"></a>æ ‡å‡†è¾“å‡ºé‡å®šå‘ï¼š</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å‘½ä»¤ &gt; æ–‡ä»¶ ï¼š ä»¥è¦†ç›–æ–¹å¼ï¼ŒæŠŠå‘½ä»¤çš„æ­£ç¡®è¾“å‡ºè¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶æˆ–è®¾å¤‡ä¸­</span><br><span class="line">å‘½ä»¤ &gt;&gt; æ–‡ä»¶ ï¼š ä»¥è¿½åŠ çš„æ–¹å¼ï¼ŒæŠŠå‘½ä»¤çš„æ­£ç¡®è¾“å‡ºè¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶æˆ–è®¾å¤‡ä¸­</span><br></pre></td></tr></table></figure><p><strong>æ–‡ä»¶ä¸å­˜åœ¨ï¼Œ å…ˆåˆ›å»ºåå†™å…¥ï¼Œ <code>&gt;</code>è¦†ç›– <code>&gt;&gt;</code>è¿½åŠ </strong></p><h3 id="å‘½ä»¤çš„é”™è¯¯è¾“å‡ºï¼š"><a href="#å‘½ä»¤çš„é”™è¯¯è¾“å‡ºï¼š" class="headerlink" title="å‘½ä»¤çš„é”™è¯¯è¾“å‡ºï¼š"></a>å‘½ä»¤çš„é”™è¯¯è¾“å‡ºï¼š</h3><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">é”™è¯¯å‘½ä»¤ <span class="number">2</span>&gt; æ–‡ä»¶ ï¼š ä»¥è¦†ç›–æ–¹å¼ï¼ŒæŠŠå‘½ä»¤çš„é”™è¯¯è¾“å‡ºè¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶æˆ–è®¾å¤‡ä¸­</span><br><span class="line">é”™è¯¯å‘½ä»¤ <span class="number">2</span>&gt;&gt; æ–‡ä»¶ ï¼š ä»¥è¿½åŠ çš„æ–¹å¼ï¼ŒæŠŠå‘½ä»¤çš„é”™è¯¯è¾“å‡ºè¾“å‡ºåˆ°æŒ‡å®šæ–‡ä»¶æˆ–è®¾å¤‡ä¸­</span><br></pre></td></tr></table></figure><p><em>æ³¨æ„ï¼šæ­£ç¡®è¾“å‡ºå¤§äºå·å·¦å³æœ‰ç©ºæ ¼ï¼Œé”™è¯¯è¾“å‡ºå·¦å³æ²¡æœ‰ç©ºæ ¼</em></p><h3 id="æ­£ç¡®å’Œé”™è¯¯è¾“å‡ºåŒæ—¶ä¿å­˜ï¼š"><a href="#æ­£ç¡®å’Œé”™è¯¯è¾“å‡ºåŒæ—¶ä¿å­˜ï¼š" class="headerlink" title="æ­£ç¡®å’Œé”™è¯¯è¾“å‡ºåŒæ—¶ä¿å­˜ï¼š"></a>æ­£ç¡®å’Œé”™è¯¯è¾“å‡ºåŒæ—¶ä¿å­˜ï¼š</h3><ul><li>ä»¥<em>è¦†ç›–</em>æ–¹å¼ï¼ŒæŠŠæ­£ç¡®è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºéƒ½ä¿å­˜åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼š</li></ul><ol><li>å‘½ä»¤ &amp;&gt;æ–‡ä»¶</li><li>å‘½ä»¤ &gt; æ–‡ä»¶ 2&gt;&amp;1</li></ol><p>eg: <code>./test.sh &gt;&gt; common.log 2&gt;&amp;1</code></p><ul><li>ä»¥<em>è¿½åŠ </em>æ–¹å¼ï¼ŒæŠŠæ­£ç¡®è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºéƒ½ä¿å­˜åˆ°åŒä¸€ä¸ªæ–‡ä»¶ä¸­ï¼š</li></ul><ol><li>å‘½ä»¤ &amp;&gt;&gt;æ–‡ä»¶</li><li>å‘½ä»¤ &gt;&gt; æ–‡ä»¶ 2&gt;&amp;1</li></ol><p>eg: <code>./test.sh &gt;&gt; common.log 2&gt;&amp;1</code></p><ul><li><em>æŠŠæ­£ç¡®è¾“å‡ºè¿½åŠ åˆ°æ–‡ä»¶1ï¼Œ æŠŠé”™è¯¯è¾“å‡ºè¿½åŠ åˆ°æ–‡ä»¶2</em>ï¼š</li></ul><ol><li>å‘½ä»¤ &gt;&gt; æ–‡ä»¶ä¸€ 2&gt;&gt; æ–‡ä»¶äºŒ</li></ol><p>eg: <code>./test.sh &gt;&gt; success.log 2&gt;&gt; error.log</code></p><p><strong>æ³¨æ„ä¸Šé¢å‘½ä»¤ä¸­çš„ç©ºæ ¼ï¼Œåœ¨é”™è¯¯è¾“å‡ºä¸­<code>2&gt;</code>æˆ–è€…<code>2&gt;&gt;</code>ä¹‹é—´æ²¡æœ‰ç©ºæ ¼ï¼Œ <code>1&gt;</code> ç­‰åŒäº <code>&gt;</code>ï¼Œ<code>1</code>çœç•¥ä¸å†™</strong><br>ä¸€èˆ¬éƒ½æ˜¯ä»¥è¿½åŠ çš„æ–¹å¼å†™å…¥æ—¥å¿—æ–‡ä»¶<br>æœ€å¸¸ç”¨çš„å‘½ä»¤ï¼š<br><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">`å‘½ä»¤&gt;&gt;æ–‡ä»¶ä¸€ <span class="number">2</span>&gt;&gt;æ–‡ä»¶äºŒ`</span><br><span class="line">`å‘½ä»¤ &amp;&gt;&gt; æ–‡ä»¶`</span><br></pre></td></tr></table></figure></p><p><code>/dev/null</code>ç›®å½•æ–‡ä»¶å†™å…¥åä¸¢å¼ƒï¼Œç”¨äºä¸€äº›ä¸éœ€è¦è¿‡ç¨‹åªéœ€è¦ç»“æœçš„å‘½ä»¤</p><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; å’Œ <span class="number">1</span>&gt; ç›¸åŒ, æ ‡å‡†è¾“å‡ºé‡å®šå‘</span><br><span class="line"><span class="number">2</span>&gt;&amp;<span class="number">1</span> æ ‡æ ‡å‡†é”™è¯¯è¾“å‡º é‡å®šå‘åˆ° æ ‡å‡†è¾“å‡º</span><br><span class="line">&amp;&gt; file æŠŠæ ‡å‡†è¾“å‡ºå’Œé”™è¯¯è¾“å‡ºéƒ½é‡å®šå‘åˆ°æ–‡ä»¶fileä¸­</span><br></pre></td></tr></table></figure><h3 id="è¾“å…¥é‡å®šå‘"><a href="#è¾“å…¥é‡å®šå‘" class="headerlink" title="è¾“å…¥é‡å®šå‘"></a>è¾“å…¥é‡å®šå‘</h3><p><code>wc [é€‰é¡¹] [æ–‡ä»¶å]</code></p><p>é€‰é¡¹ï¼š</p><ul><li>-c ç»Ÿè®¡å­—èŠ‚æ•°</li><li>-w ç»Ÿè®¡å•è¯æ•°</li><li>-l ç»Ÿè®¡è¡Œæ•°<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å‘½ä»¤ &lt; æŠŠæ–‡ä»¶ä½œä¸ºå‘½ä»¤çš„è¾“å…¥</span><br><span class="line">å‘½ä»¤ &lt;&lt; æ ‡è¯†ç¬¦</span><br></pre></td></tr></table></figure></li></ul><p>æ ‡è¯†ç¬¦æŠŠæ ‡è¯†ç¬¦ä¹‹é—´çš„å†…å®¹ä½œä¸ºå‘½ä»¤çš„è¾“å…¥<br>eg:<br><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wc &lt; acc.<span class="built_in">log</span><span class="meta"># ç»Ÿè®¡æ–‡ä»¶çš„è¾“å…¥</span></span><br><span class="line">&lt;&lt;å¾ˆå°‘ç”¨</span><br></pre></td></tr></table></figure></p><h2 id="ç®¡é“ç¬¦"><a href="#ç®¡é“ç¬¦" class="headerlink" title="ç®¡é“ç¬¦"></a>ç®¡é“ç¬¦</h2><h3 id="å¤šå‘½ä»¤é¡ºåºæ‰§è¡Œï¼š"><a href="#å¤šå‘½ä»¤é¡ºåºæ‰§è¡Œï¼š" class="headerlink" title="å¤šå‘½ä»¤é¡ºåºæ‰§è¡Œï¼š"></a>å¤šå‘½ä»¤é¡ºåºæ‰§è¡Œï¼š</h3><table><thead><tr><th>å¤šå‘½ä»¤æ‰§è¡Œç¬¦</th><th>æ ¼å¼</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>;</td><td>å‘½ä»¤1; å‘½ä»¤2</td><td>å¤šä¸ªå‘½ä»¤é¡ºåºæ‰§è¡Œï¼Œä¹‹é—´æ²¡æœ‰ä»»ä½•é€»è¾‘å…³ç³»</td></tr><tr><td>&amp;&amp;</td><td>å‘½ä»¤1 &amp;&amp; å‘½ä»¤2</td><td>é€»è¾‘ä¸ï¼Œ å½“å‘½ä»¤1æ­£ç¡®æ‰§è¡Œï¼Œåˆ™å‘½ä»¤2æ‰ä¼šæ‰§è¡Œï¼Œå¦åˆ™å‘½ä»¤2ä¸æ‰§è¡Œ</td></tr><tr><td></td><td></td><td></td><td>å‘½ä»¤1</td><td></td><td>å‘½ä»¤2</td><td>é€»è¾‘æˆ–ï¼Œ å½“å‘½ä»¤1æ‰§è¡Œä¸æ­£ç¡®ï¼Œæ‰ä¼šæ‰§è¡Œå‘½ä»¤2ï¼Œå¦åˆ™å‘½ä»¤2ä¸ä¼šæ‰§è¡Œ</td></tr></tbody></table><p>åˆ¤æ–­å‘½ä»¤æ˜¯å¦æ­£ç¡®æ‰§è¡Œ:</p><p><code>./test.sh &amp;&amp; echo &quot;yes&quot; || echo &quot;no&quot;</code></p><h3 id="ç®¡é“ç¬¦-1"><a href="#ç®¡é“ç¬¦-1" class="headerlink" title="ç®¡é“ç¬¦"></a>ç®¡é“ç¬¦</h3><p>æ ¼å¼ï¼š</p><p><code>å‘½ä»¤1 | å‘½ä»¤2</code></p><p>å‘½ä»¤1çš„æ­£ç¡®è¾“å‡ºä½œä¸ºå‘½ä»¤2çš„æ“ä½œå¯¹è±¡<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -an | grep ESTABLISHED</span><br></pre></td></tr></table></figure></p><h3 id="é€šé…ç¬¦"><a href="#é€šé…ç¬¦" class="headerlink" title="é€šé…ç¬¦"></a>é€šé…ç¬¦</h3><table><thead><tr><th>é€šé…ç¬¦</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>ï¼Ÿ </td><td>åŒ¹é…ä¸€ä¸ªä»»æ„å­—ç¬¦</td></tr><tr><td>*</td><td>åŒ¹é…0ä¸ªæˆ–ä»»æ„å¤šä¸ªå­—ç¬¦</td></tr><tr><td>[]</td><td>åŒ¹é…ä¸­æ‹¬å·ä¸­ä»»æ„ä¸€ä¸ªå­—ç¬¦</td></tr><tr><td>[-]</td><td>åŒ¹é…ä¸­æ‹¬å·ä¸­ä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œ - ä»£è¡¨èŒƒå›´</td></tr><tr><td>[^]</td><td>é€»è¾‘éï¼Œ åŒ¹é…ä¸ä¸Šä¸­æ‹¬å·å†…çš„ä¸€ä¸ªå­—ç¬¦</td></tr></tbody></table><p><em>é€šé…ç¬¦ç”¨äºåŒ¹é…æ–‡ä»¶åæˆ–ç›®å½•å</em></p><h3 id="bashä¸­å…¶ä»–ç‰¹æ®Šç¬¦å·"><a href="#bashä¸­å…¶ä»–ç‰¹æ®Šç¬¦å·" class="headerlink" title="bashä¸­å…¶ä»–ç‰¹æ®Šç¬¦å·"></a>bashä¸­å…¶ä»–ç‰¹æ®Šç¬¦å·</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">''</span></span><br><span class="line"><span class="string">""</span></span><br><span class="line"><span class="string">``</span> : åå¼•å·ï¼Œåå¼•å·æ‹¬èµ·æ¥çš„æ˜¯ç³»ç»Ÿå‘½ä»¤ï¼Œåœ¨bashä¸­ä¼šå…ˆæ‰§è¡Œå®ƒï¼Œå’Œ$()ä½œç”¨ä¸€æ ·</span><br><span class="line">$() : ä½œç”¨åŒåå¼•å·, æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼Œç„¶åè·å–åˆ°æ‰§è¡Œç»“æœ</span><br><span class="line">$ : è°ƒç”¨å˜é‡çš„å€¼</span><br><span class="line">\ : è½¬ä¹‰ç¬¦</span><br><span class="line"><span class="comment">#  :æ³¨é‡Š</span></span><br></pre></td></tr></table></figure>]]></content><summary type="html">
    
      linuxå­¦ä¹ ç¬”è®°ä¹‹å¸¸ç”¨å‘½ä»¤ã€‚
    
    </summary><category term="åç«¯" scheme="https://mhynet.cn/categories/%E5%90%8E%E7%AB%AF/"/><category term="linux" scheme="https://mhynet.cn/tags/linux/"/><category term="bash" scheme="https://mhynet.cn/tags/bash/"/></entry><entry><title>linuxå­¦ä¹ ç¬”è®°(2)</title><link href="https://mhynet.cn/linux-note-2.html"/><id>https://mhynet.cn/linux-note-2.html</id><published>2018-08-20T05:26:13.000Z</published><updated>2020-01-15T07:22:00.596Z</updated><content type="html"><![CDATA[<h3 id="1-shell-è„šæœ¬"><a href="#1-shell-è„šæœ¬" class="headerlink" title="1.shell è„šæœ¬"></a>1.shell è„šæœ¬</h3><p>è„šæœ¬è¯­è¨€æ˜¯ç”¨æ¥è®©è®¡ç®—æœºè‡ªåŠ¨åŒ–æ‰§è¡Œå®Œæˆä¸€ç³»åˆ—å·¥ä½œçš„ç¨‹åºï¼Œä¸éœ€è¦ç¼–è¯‘ï¼Œé€šå¸¸æ˜¯é€šè¿‡è§£é‡Šå™¨è¿è¡Œçš„ã€‚</p><a id="more"></a><h3 id="2-shellç¯å¢ƒ"><a href="#2-shellç¯å¢ƒ" class="headerlink" title="2.shellç¯å¢ƒ"></a>2.shellç¯å¢ƒ</h3><p>shellæ–‡ä»¶çš„ç¬¬ä¸€è¡Œçš„â€#!â€æ˜¯ä¸€ä¸ªçº¦å®šçš„æ ‡è®°ï¼Œå‘Šè¯‰ç³»ç»Ÿå…¶åè·¯å¾„æ‰€æŒ‡å®šçš„ç¨‹åºå³æ˜¯è§£é‡Šæ­¤è„šæœ¬çš„shellç¨‹<br>linuxçš„shellç§ç±»å¸¸è§çš„æœ‰ï¼š</p><ul><li>Bourne Ageng Shell(/bin/bash)</li><li>Bourne Shell(/usr/bin/sh æˆ–/bin/sh)</li><li>â€œC Shellâ€ (/usr/bin/csh)</li><li>Shell for Root(/sbin/sh)</li></ul><h3 id="3-è¿è¡Œshellè„šæœ¬"><a href="#3-è¿è¡Œshellè„šæœ¬" class="headerlink" title="3.è¿è¡Œshellè„šæœ¬"></a>3.è¿è¡Œshellè„šæœ¬</h3><p>åˆ›å»ºä¸€ä¸ªshellè„šæœ¬æ–‡ä»¶,ä¿å­˜ä¸ºtest.sh<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span><span class="string">"hello"</span><span class="comment">#echoå‘½ä»¤ç”¨äºå‘çª—å£è¾“å‡ºæ–‡æœ¬</span></span><br></pre></td></tr></table></figure></p><ol><li>ä½œä¸ºå¯æ‰§è¡Œæ–‡ä»¶<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod +x ./text.sh  <span class="comment">#ä½¿è„šæœ¬å…·æœ‰æ‰§è¡Œæƒé™</span></span><br><span class="line">./test.sh <span class="comment">#æ‰§è¡Œè„šæœ¬</span></span><br></pre></td></tr></table></figure></li></ol><p>æ‰§è¡Œè„šæœ¬å¿…é¡»æŒ‡å®šè·¯å¾„ï¼Œå¯ä»¥ç”¨ç»å¯¹è·¯å¾„æˆ–è€…ç›¸å¯¹è·¯å¾„ï¼Œä¸æŒ‡å®šè·¯å¾„ä¼šä»PATHé‡Œé¢æ‰¾ã€‚</p><ol start="2"><li>ä½œä¸ºè§£é‡Šå™¨å‚æ•°</li></ol><p>ç›´æ¥è¿è¡Œè§£é‡Šå™¨ï¼Œå…¶å‚æ•°ä¸ºshellè„šæœ¬çš„æ–‡ä»¶å<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/bin/sh test.sh</span><br><span class="line">/bin/php test.php</span><br></pre></td></tr></table></figure></p><p>è¿™ç§æ–¹å¼è¿è¡Œè„šæœ¬ï¼Œç¬¬ä¸€è¡Œä¸éœ€è¦æŒ‡å®šè§£é‡Šå™¨ä¿¡æ¯ï¼Œå†™äº†ä¹Ÿä¸èµ·ä½œç”¨</p><h3 id="4-shellå˜é‡"><a href="#4-shellå˜é‡" class="headerlink" title="4.shellå˜é‡"></a>4.shellå˜é‡</h3><h4 id="4-1-å˜é‡å®šä¹‰"><a href="#4-1-å˜é‡å®šä¹‰" class="headerlink" title="4.1 å˜é‡å®šä¹‰"></a>4.1 å˜é‡å®šä¹‰</h4><p>å˜é‡åå’Œç­‰å·ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œshellå˜é‡å®šä¹‰çš„è§„å®šï¼š</p><ul><li>å˜é‡å‘½ååªèƒ½ä½¿ç”¨è‹±æ–‡å­—æ¯ï¼Œæ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œé¦–å­—ç¬¦ä¸èƒ½ä»¥æ•°å­—å¼€å¤´</li><li>ä¸­é—´ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿</li><li>ä¸èƒ½ä½¿ç”¨æ ‡ç‚¹ç¬¦å·</li><li>ä¸èƒ½ä½¿ç”¨bashé‡Œçš„å…³é”®å­—</li></ul><p>æœ‰æ•ˆçš„å˜é‡ç¤ºä¾‹å¦‚ä¸‹ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Room</span><br><span class="line">L_YARM</span><br><span class="line">_var</span><br><span class="line">var2</span><br></pre></td></tr></table></figure></p><p>æ— æ•ˆçš„å˜é‡åï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?var=123</span><br><span class="line">user*name=runoob</span><br></pre></td></tr></table></figure></p><p>å˜é‡èµ‹å€¼å¯ä»¥æ˜¾å¼çš„ç›´æ¥èµ‹å€¼ä¹Ÿå¯ä»¥ç”¨è¯­å¥æ¥èµ‹å€¼ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Room=222</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> `ls /etc`</span><br></pre></td></tr></table></figure></p><h4 id="4-2-å˜é‡çš„ä½¿ç”¨"><a href="#4-2-å˜é‡çš„ä½¿ç”¨" class="headerlink" title="4.2 å˜é‡çš„ä½¿ç”¨"></a>4.2 å˜é‡çš„ä½¿ç”¨</h4><p>ä½¿ç”¨ä¸€ä¸ªå®šä¹‰è¿‡çš„å˜é‡ï¼Œåªéœ€è¦åœ¨å˜é‡å‰é¢åŠ ä¸Šç¾å…ƒç¬¦å·å³å¯<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">your_name=<span class="string">'mhy'</span></span><br><span class="line"><span class="built_in">echo</span><span class="variable">$your_name</span></span><br><span class="line"><span class="built_in">echo</span><span class="variable">$&#123;your_name&#125;</span></span><br></pre></td></tr></table></figure></p><p>å˜é‡åå¤–é¢çš„èŠ±æ‹¬å·å¯é€‰ï¼ŒåŠ èŠ±æ‹¬å·æ˜¯ä¸ºäº†å¸®åŠ©è§£é‡Šå™¨è¯†åˆ«å˜é‡çš„è¾¹ç•Œ<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> skill <span class="keyword">in</span> Ada Coffe Action Java; <span class="keyword">do</span></span><br><span class="line">2<span class="built_in">echo</span><span class="string">"I am good at <span class="variable">$&#123;skill&#125;</span>Script"</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></p><p>æ¨èç»™æ‰€æœ‰å˜é‡åŠ ä¸Š$</p><p>å·²å®šä¹‰çš„å˜é‡å¯ä»¥é‡æ–°è¢«å®šä¹‰<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">your_name=<span class="string">"tom"</span></span><br><span class="line"><span class="built_in">echo</span><span class="variable">$&#123;your_name&#125;</span></span><br><span class="line">your_name=<span class="string">"lily"</span></span><br><span class="line"><span class="built_in">echo</span><span class="variable">$&#123;your_name&#125;</span></span><br></pre></td></tr></table></figure></p><p>ä½†æ˜¯å˜é‡å®šä¹‰çš„æ—¶å€™ä¸èƒ½åŠ $ç¬¦å·ã€‚</p><h4 id="4-3-åªè¯»å˜é‡"><a href="#4-3-åªè¯»å˜é‡" class="headerlink" title="4.3 åªè¯»å˜é‡"></a>4.3 åªè¯»å˜é‡</h4><p>ä½¿ç”¨readonlyå‘½ä»¤å¯ä»¥å°†å˜é‡å®šä¹‰ä¸ºåªè¯»å˜é‡ï¼Œä¿®æ”¹åªè¯»å˜é‡ä¼šæŠ¥é”™<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!bin/bash</span></span><br><span class="line">girl_friend=<span class="string">"lily"</span></span><br><span class="line"><span class="built_in">readonly</span> girl_fiend</span><br><span class="line">gir_friend=<span class="string">"leilei"</span></span><br></pre></td></tr></table></figure></p><p>è¿è¡Œè„šæœ¬æŠ¥é”™äº†.</p><h4 id="4-4-åˆ é™¤å˜é‡"><a href="#4-4-åˆ é™¤å˜é‡" class="headerlink" title="4.4 åˆ é™¤å˜é‡"></a>4.4 åˆ é™¤å˜é‡</h4><p>ä½¿ç”¨unset å‘½ä»¤åˆ é™¤å˜é‡<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">girl_friend=<span class="string">"xiao mei"</span></span><br><span class="line"><span class="built_in">unset</span> girl_friend</span><br></pre></td></tr></table></figure></p><p><strong>unset å‘½ä»¤ä¸èƒ½åˆ é™¤åªè¯»å˜é‡</strong></p><h4 id="4-5-å˜é‡ç±»å‹"><a href="#4-5-å˜é‡ç±»å‹" class="headerlink" title="4.5 å˜é‡ç±»å‹"></a>4.5 å˜é‡ç±»å‹</h4><p>shellè„šæœ¬è¯­è¨€å­˜åœ¨ä¸‰ç§å˜é‡ï¼š</p><ul><li>å±€éƒ¨å˜é‡ å±€éƒ¨å˜é‡åœ¨è„šæœ¬æˆ–å‘½ä»¤ä¸­å®šä¹‰ï¼Œä»…åœ¨å½“å‰shellå®ä¾‹ä¸­æœ‰æ•ˆ</li><li>ç¯å¢ƒå˜é‡ æ‰€æœ‰çš„ç¨‹åºåŒ…æ‹¬shellå¯åŠ¨çš„ç¨‹åºï¼Œéƒ½èƒ½è®¿é—®ç¯å¢ƒå˜é‡ï¼Œå¿…è¦æ—¶shellè„šæœ¬ä¹Ÿèƒ½å®šä¹‰ç¯å¢ƒå˜é‡</li><li>shellå˜é‡ shellå˜é‡æ˜¯ç”±shellç¨‹åºè®¾ç½®çš„ç‰¹æ®Šå˜é‡ï¼Œshellå˜é‡ä¸­æœ‰ä¸€éƒ¨åˆ†æ˜¯ç¯å¢ƒå˜é‡ï¼Œä¸€éƒ¨åˆ†æ˜¯å±€éƒ¨å˜é‡ï¼Œè¿™äº›å˜é‡ä¿è¯äº†shellçš„æ­£å¸¸è¿è¡Œ</li></ul><h3 id="5-shellå­—ç¬¦ä¸²"><a href="#5-shellå­—ç¬¦ä¸²" class="headerlink" title="5.shellå­—ç¬¦ä¸²"></a>5.shellå­—ç¬¦ä¸²</h3><p>å­—ç¬¦ä¸²æ˜¯shellç¼–ç¨‹ä¸­æœ€å¸¸ç”¨æœ€æœ‰æ•ˆçš„æ•°æ®ç±»å‹ã€‚<br>å­—ç¬¦ä¸²å¯ä»¥ç”¨å•å¼•å·æˆ–åŒå¼•å·æˆ–ä¸ç”¨å¼•å·ã€‚</p><h4 id="5-1-å•å¼•å·"><a href="#5-1-å•å¼•å·" class="headerlink" title="5.1 å•å¼•å·"></a>5.1 å•å¼•å·</h4><p>å•å¼•å·å­—ç¬¦ä¸²çš„é™åˆ¶ï¼š</p><ul><li>å•å¼•å·é‡Œä»»ä½•å­—ç¬¦éƒ½ä¼šåŸæ ·è¾“å‡ºï¼Œå•å¼•å·å­—ç¬¦ä¸²ä¸­çš„å˜é‡æ˜¯æ— æ•ˆçš„</li><li>å•å¼•å·å­—ç¬¦ä¸²ä¸­ä¸èƒ½å‡ºç°å•å¼•å·ï¼ˆå¯¹å•å¼•å·ä½¿ç”¨è½¬ä¹‰ç¬¦åä¹Ÿä¸è¡Œï¼‰<h4 id="5-2-åŒå¼•å·"><a href="#5-2-åŒå¼•å·" class="headerlink" title="5.2 åŒå¼•å·"></a>5.2 åŒå¼•å·</h4></li></ul><p>åŒå¼•å·çš„æœ‰ç‚¹ï¼š</p><ul><li>åŒå¼•å·é‡Œå¯ä»¥æœ‰å˜é‡</li><li>åŒå¼•å·é‡Œå¯ä»¥å‡ºç°è½¬ä¹‰å­—ç¬¦</li></ul><h4 id="5-3-æ‹¼æ¥å­—ç¬¦ä¸²"><a href="#5-3-æ‹¼æ¥å­—ç¬¦ä¸²" class="headerlink" title="5.3 æ‹¼æ¥å­—ç¬¦ä¸²"></a>5.3 æ‹¼æ¥å­—ç¬¦ä¸²</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">your_name=<span class="string">"mhy"</span></span><br><span class="line">greeting=<span class="string">"hello"</span>, <span class="string">"<span class="variable">$your_name</span>"</span>!<span class="string">"</span></span><br><span class="line"><span class="string">greeting_1="</span>hello, <span class="variable">$&#123;your_name&#125;</span>!<span class="string">"</span></span><br><span class="line"><span class="string">echo <span class="variable">$greeting</span><span class="variable">$greeting_1</span></span></span><br></pre></td></tr></table></figure><h4 id="5-4-è·å–å­—ç¬¦ä¸²é•¿åº¦"><a href="#5-4-è·å–å­—ç¬¦ä¸²é•¿åº¦" class="headerlink" title="5.4 è·å–å­—ç¬¦ä¸²é•¿åº¦"></a>5.4 è·å–å­—ç¬¦ä¸²é•¿åº¦</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># string="beijing"</span></span><br><span class="line"><span class="comment"># echo $&#123;#string&#125; #è¾“å‡º 7</span></span><br></pre></td></tr></table></figure><h4 id="5-5-æå–å­—ç¬¦ä¸²"><a href="#5-5-æå–å­—ç¬¦ä¸²" class="headerlink" title="5.5 æå–å­—ç¬¦ä¸²"></a>5.5 æå–å­—ç¬¦ä¸²</h4><p>ä»¥ä¸‹å®ä¾‹ä»å­—ç¬¦ä¸²ç¬¬2ä¸ªå­—ç¬¦å¼€å§‹æˆªå–4ä¸ªå­—ç¬¦<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string=<span class="string">"hello beijing!"</span></span><br><span class="line"><span class="built_in">echo</span><span class="variable">$&#123;string:1:4&#125;</span><span class="comment">#è¾“å‡º trin</span></span><br></pre></td></tr></table></figure></p><h4 id="5-6-æŸ¥æ‰¾å­å­—ç¬¦ä¸²"><a href="#5-6-æŸ¥æ‰¾å­å­—ç¬¦ä¸²" class="headerlink" title="5.6 æŸ¥æ‰¾å­å­—ç¬¦ä¸²"></a>5.6 æŸ¥æ‰¾å­å­—ç¬¦ä¸²</h4><p>æŸ¥æ‰¾å­å­—ç¬¦ä¸²çš„ä½ç½®<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string=<span class="string">"wellcome to beijing, shaonian"</span></span><br><span class="line"><span class="built_in">echo</span> `expr index <span class="string">"<span class="variable">$string</span>"</span> is` <span class="comment"># è¾“å‡º</span></span><br></pre></td></tr></table></figure></p><h4 id="5-7-åˆ¤æ–­è¯»å–å­—ç¬¦ä¸²å€¼"><a href="#5-7-åˆ¤æ–­è¯»å–å­—ç¬¦ä¸²å€¼" class="headerlink" title="5.7 åˆ¤æ–­è¯»å–å­—ç¬¦ä¸²å€¼"></a>5.7 åˆ¤æ–­è¯»å–å­—ç¬¦ä¸²å€¼</h4><table><thead><tr><th>è¡¨è¾¾å¼</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>${var}</td><td>å®šä¹‰varçš„å€¼ï¼Œä¸$varç›¸åŒ</td></tr><tr><td></td><td></td></tr><tr><td>$(var-DEFAULT}</td><td>å¦‚æœvaræ²¡æœ‰è¢«å£°æ˜ï¼Œé‚£ä¹ˆå°±ä»¥$DEFAULTä½œä¸ºå…¶å€¼</td></tr><tr><td>${var:-DEFAULT}</td><td>å¦‚æœvaræ²¡æœ‰è¢«å£°æ˜ï¼Œæˆ–è€…å…¶å€¼ä¸ºç©ºï¼Œé‚£ä¹ˆå°±ä»¥$DEFAULTä½œä¸ºå…¶å€¼</td></tr><tr><td></td><td></td></tr><tr><td>${var=DEFAULT}</td><td>å¦‚æœvaræ²¡æœ‰è¢«å£°æ˜ï¼Œé‚£ä¹ˆå°±ä»¥$DEFAULTä½œä¸ºå…¶å€¼</td></tr><tr><td>${var:=DEFAULT</td><td>å¦‚æœvaræ²¡æœ‰è¢«å£°æ˜ï¼Œæˆ–è€…å…¶å€¼ä¸ºç©ºï¼Œé‚£ä¹ˆå°±ä»¥$DEFAULTä½œä¸ºå…¶å€¼</td></tr><tr><td></td><td></td></tr><tr><td>${var+OTHER}</td><td>å¦‚æœvarå£°æ˜äº†ï¼Œé‚£ä¹ˆå…¶å€¼å°±æ˜¯$OTHER,å¦åˆ™å°±ä¸ºnullå­—ç¬¦ä¸²</td></tr><tr><td>${var:+OTHER}</td><td>å¦‚æœvarè¢«è®¾ç½®äº†ï¼Œé‚£ä¹ˆå…¶å€¼å°±æ˜¯$OTHERï¼Œå¦åˆ™å°±ä¸ºnullå­—ç¬¦ä¸²</td></tr></tbody></table><h4 id="5-8-å­—ç¬¦ä¸²æ“ä½œæ±‡æ€»"><a href="#5-8-å­—ç¬¦ä¸²æ“ä½œæ±‡æ€»" class="headerlink" title="5.8 å­—ç¬¦ä¸²æ“ä½œæ±‡æ€»"></a>5.8 å­—ç¬¦ä¸²æ“ä½œæ±‡æ€»</h4><table><thead><tr><th>è¡¨è¾¾å¼</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td>${string:position</td><td>åœ¨$stringä¸­, ä»ä½ç½®$positionå¼€å§‹æå–å­ä¸²</td></tr><tr><td>${string:position:length</td><td>åœ¨$stringä¸­, ä»ä½ç½®$positionå¼€å§‹æå–é•¿åº¦ä¸º$lengthçš„å­ä¸²</td></tr><tr><td></td><td></td></tr><tr><td>${string#substring</td><td>ä»å˜é‡$stringçš„å¼€å¤´, åˆ é™¤æœ€çŸ­åŒ¹é…$substringçš„å­ä¸²</td></tr><tr><td>${string##substring</td><td>ä»å˜é‡$stringçš„å¼€å¤´, åˆ é™¤æœ€é•¿åŒ¹é…$substringçš„å­ä¸²</td></tr><tr><td>${string%substring</td><td>ä»å˜é‡$stringçš„ç»“å°¾, åˆ é™¤æœ€çŸ­åŒ¹é…$substringçš„å­ä¸²</td></tr><tr><td>${string%%substring</td><td>ä»å˜é‡$stringçš„ç»“å°¾, åˆ é™¤æœ€é•¿åŒ¹é…$substringçš„å­ä¸²</td></tr><tr><td></td><td></td></tr><tr><td>${string/substring/replacement</td><td>ä½¿ç”¨$replacement, æ¥ä»£æ›¿ç¬¬ä¸€ä¸ªåŒ¹é…çš„$substring</td></tr><tr><td>${string//substring/replacement</td><td>ä½¿ç”¨$replacement, ä»£æ›¿æ‰€æœ‰åŒ¹é…çš„$substring</td></tr><tr><td>${string/#substring/replacement</td><td>å¦‚æœ$stringçš„å‰ç¼€åŒ¹é…$substring, é‚£ä¹ˆå°±ç”¨$replacementæ¥ä»£æ›¿åŒ¹é…åˆ°çš„$substring</td></tr><tr><td>${string/%substring/replacement</td><td>å¦‚æœ$stringçš„åç¼€åŒ¹é…$substring, é‚£ä¹ˆå°±ç”¨$replacementæ¥ä»£æ›¿åŒ¹é…åˆ°çš„$substring</td></tr></tbody></table><h3 id="6-shellæ•°ç»„"><a href="#6-shellæ•°ç»„" class="headerlink" title="6.shellæ•°ç»„"></a>6.shellæ•°ç»„</h3><p>bashæ”¯æŒä¸€ç»´æ•°ç»„ä¸æ”¯æŒå¤šç»´æ•°ç»„ï¼Œæ²¡æœ‰é™å®šæ•°ç»„çš„å¤§å°<br>æ•°ç»„ä¸‹æ ‡ä»0å¼€å§‹ç¼–å·ï¼Œä¸‹ä¾¿å¯ä»¥æ˜¯æ•´æ•°æˆ–ç®—æ•°è¡¨è¾¾å¼ï¼Œå…¶å€¼åº”è¯¥å¤§äºæˆ–ç­‰äº0ã€‚</p><h4 id="6-1-å®šä¹‰æ•°ç»„"><a href="#6-1-å®šä¹‰æ•°ç»„" class="headerlink" title="6.1 å®šä¹‰æ•°ç»„"></a>6.1 å®šä¹‰æ•°ç»„</h4><p>åœ¨shellä¸­ç”¨æ‹¬å·æ¥è¡¨ç¤ºæ•°ç»„ï¼Œå…ƒç´ ç”¨ç©ºæ ¼ç¬¦å·éš”å¼€ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æ•°ç»„å=(å€¼1 å€¼2 å€¼3 ... å€¼n)</span><br></pre></td></tr></table></figure></p><p>egï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">array_name=(</span><br><span class="line">  value0</span><br><span class="line">  value1</span><br><span class="line">  value2</span><br><span class="line">  value3</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p><p>è¿˜å¯ä»¥å•ç‹¬å®šä¹‰æ•°ç»„çš„å„ä¸ªåˆ†é‡ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">array_name[0]=value0</span><br><span class="line">array_name[1]=value1</span><br><span class="line">array_name[100]=value100</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥ä¸ä½¿ç”¨è¿ç»­çš„ä¸‹æ ‡ï¼Œè€Œä¸”ä¸‹æ ‡çš„èŒƒå›´æ²¡æœ‰é™åˆ¶ã€‚</p><h4 id="6-2-æ•°ç»„çš„æ“ä½œ"><a href="#6-2-æ•°ç»„çš„æ“ä½œ" class="headerlink" title="6.2 æ•°ç»„çš„æ“ä½œ"></a>6.2 æ•°ç»„çš„æ“ä½œ</h4><ul><li>è¯»å–æ•°ç»„</li></ul><p>è¯»å–æ•°ç»„çš„è¯­æ³•ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(array_name[index])</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨@ç¬¦å·å¯ä»¥è·å–æ•°ç»„ä¸­æ‰€æœ‰å…ƒç´ ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> $(array_name[@])</span><br></pre></td></tr></table></figure></p><ul><li>è·å–æ•°ç»„çš„é•¿åº¦</li></ul><p>è·å–æ•°ç»„çš„é•¿åº¦çš„æ–¹æ³•ä¸è·å–å­—ç¬¦ä¸²é•¿åº¦çš„æ–¹æ³•ç›¸åŒã€‚<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·å–æ•°ç»„å…ƒç´ çš„ä¸ªæ•°</span></span><br><span class="line">length=$(<span class="comment">#array_name[@])</span></span><br><span class="line"><span class="comment"># æˆ–è€…</span></span><br><span class="line">length=$(<span class="comment">#array_name[*])</span></span><br><span class="line"><span class="comment"># è·å–æ•°ç»„å•ä¸ªå…ƒç´ çš„é•¿åº¦</span></span><br><span class="line">lengthn=$(<span class="comment">#array_name[n])</span></span><br></pre></td></tr></table></figure></p><h3 id="7-æ³¨é‡Š"><a href="#7-æ³¨é‡Š" class="headerlink" title="7 æ³¨é‡Š"></a>7 æ³¨é‡Š</h3><p>shellä¸­åªæœ‰å•è¡Œæ³¨é‡Šï¼Œ åœ¨æ¯ä¸€è¡Œçš„å¼€å¤´åŠ å…¥#å³å¯</p><p>å¤šè¡Œä»£ç å¯ä»¥ç”¨èŠ±æ‹¬å·æ‹¬èµ·æ¥å®šä¹‰æˆä¸€ä¸ªå‡½æ•°ï¼Œä¸è°ƒç”¨å®ƒè¿™å—ä»£ç ä¸ä¼šæ‰§è¡Œï¼Œå’Œå¤šè¡Œæ³¨é‡Šçš„æ•ˆæœä¸€æ ·</p>]]></content><summary type="html">
    
      linuxå­¦ä¹ ç¬”è®°ä¹‹shellç¼–ç¨‹
    
    </summary><category term="åç«¯" scheme="https://mhynet.cn/categories/%E5%90%8E%E7%AB%AF/"/><category term="linux" scheme="https://mhynet.cn/tags/linux/"/><category term="bash" scheme="https://mhynet.cn/tags/bash/"/></entry><entry><title>linuxå­¦ä¹ ç¬”è®°(1)</title><link href="https://mhynet.cn/linux-note-1.html"/><id>https://mhynet.cn/linux-note-1.html</id><published>2018-08-16T04:25:59.000Z</published><updated>2020-01-15T07:21:55.993Z</updated><content type="html"><![CDATA[<p>æœ€è¿‘ç»™å®¶é‡Œçš„PCçš„è™šæ‹Ÿæœºä¸Šæ­å»ºå¼€å‘ç¯å¢ƒï¼Œç»å¸¸ç”¨åˆ°æ–‡ä»¶æˆ–ç›®å½•æƒé™çš„é—®é¢˜ï¼Œ å‘ç°å¯¹è¿™ä¸€å—çš„äº†è§£è¿˜ä¸å¤Ÿï¼Œæ‰€ä»¥æŠ½æ—¶é—´æ¶è¡¥äº†ä¸€ä¸‹ï¼Œè¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚<br><a id="more"></a></p><h2 id="æ–‡ä»¶ç±»å‹"><a href="#æ–‡ä»¶ç±»å‹" class="headerlink" title="æ–‡ä»¶ç±»å‹"></a>æ–‡ä»¶ç±»å‹</h2><p>æ–‡ä»¶æƒé™åŒºåˆ†çš„æ–‡ä»¶ç±»å‹æœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯ï¼š</p><blockquote><p>-: æ–‡ä»¶;<br>d: ç›®å½•;<br>l: è½¯è¿æ¥æ–‡ä»¶<br>rw-  râ€“ râ€“<br>u æ‰€æœ‰è€…  gæ‰€å±ç»„  oå…¶ä»–äºº<br>r read  w write x æ‰§è¡Œ(excute)</p></blockquote><h2 id="æƒé™èŒƒå›´çš„è¡¨ç¤º"><a href="#æƒé™èŒƒå›´çš„è¡¨ç¤º" class="headerlink" title="æƒé™èŒƒå›´çš„è¡¨ç¤º"></a>æƒé™èŒƒå›´çš„è¡¨ç¤º</h2><p>ä½¿ç”¨ls -la å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶æƒé™èŒƒå›´ï¼š</p><blockquote><p>ls å‘½ä»¤çš„é€‰é¡¹è¯¦è§£:</p><ul><li>-a</li><li>-l (lang) (ll)</li><li>-d æŸ¥çœ‹ç›®å½•å±æ€§</li><li>-h  äººæ€§åŒ–æ˜¾ç¤ºæ–‡ä»¶å¤§å°</li><li>-i æ˜¾ç¤ºinode</li></ul></blockquote><p>æ‰§è¡Œ<code>ls -la</code>åæ˜¾ç¤ºå‡ºæ¥çš„å†…å®¹ä»å·¦åˆ°å³ä¾æ¬¡ä¸ºï¼š<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-rw-r--r--   <span class="number">1</span>         root       wheel    <span class="number">515</span>B  <span class="number">7</span><span class="number">13</span><span class="number">2015</span> afpovertcp.cfg</span><br><span class="line">  æƒé™  <span class="number">1</span>å¼•ç”¨è®¡æ•° æ‰€æœ‰è€…root æ‰€å±ç»„sheel æ–‡ä»¶å¤§å° æœ€åä¿®æ”¹æ—¶é—´  æ–‡ä»¶å</span><br></pre></td></tr></table></figure></p><h2 id="æ–‡ä»¶æƒé™æ§åˆ¶"><a href="#æ–‡ä»¶æƒé™æ§åˆ¶" class="headerlink" title="æ–‡ä»¶æƒé™æ§åˆ¶"></a>æ–‡ä»¶æƒé™æ§åˆ¶</h2><p>æ–‡ä»¶æ ¼å¼ï¼š<br><code>-rw-r-r--</code></p><p>liniuxæ–‡ä»¶æƒé™æ ¼å¼ä¸€å…±æœ‰10ä½ï¼Œç¬¬ä¸€ä½æ˜¯æ–‡ä»¶ç±»å‹ï¼Œåé¢æ²¡ä¸‰ä½ä»£è¡¨ä¸€ç»„ï¼Œæ¯ä¸‰ä½ä¸€ç»„ï¼Œ ç›¸åŒæƒé™çš„ä¸ºä¸€ç»„ï¼Œä¾æ¬¡ä¸ºï¼šu æ‰€æœ‰è€…, gæ‰€å±ç»„, oå…¶ä»–äºº</p><blockquote><p>u: User, æ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€…<br>g: Groupï¼Œæ–‡ä»¶æˆ–ç›®å½•çš„æ‰€å±ç¾¤ç»„<br>o: Other, é™¤äº†æ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€…æˆ–æ‰€å±ç¾¤ç»„ä¹‹å¤–ï¼Œå…¶ä»–ç”¨æˆ·çš†å±äºè¿™ä¸ªèŒƒå›´<br>a: All, å…¨éƒ¨ç”¨æˆ·ï¼ŒåŒ…å«æ‹¥æœ‰è€…ã€æ‰€å±ç¾¤ç»„ä»¥åŠå…¶ä»–ç”¨æˆ·<br>r: readï¼Œ è¯»å–æƒé™ï¼Œ æ•°å­—ä»£å·ä¸º â€˜4â€™<br>w: write, å†™å…¥æƒé™ï¼Œæ•°å­—ä»£å·ä¸ºâ€™2â€™<br>x: æ‰§è¡Œæˆ–åˆ‡æ¢çš„æƒé™ï¼Œæ•°å­—ä»£å·ä¸ºâ€™1â€™<br>-: ä¸å…·å¤‡ä»»ä½•æƒé™ï¼Œ æ•°å­—ä»£å·ä¸ºâ€™0â€™<br>s: ç‰¹æ®ŠåŠŸèƒ½è¯´æ˜ï¼Œå˜æ›´æ–‡ä»¶æˆ–ç›®å½•çš„æƒé™</p></blockquote><h2 id="chmod"><a href="#chmod" class="headerlink" title="chmod"></a>chmod</h2><ul><li><p>æ ¼å¼ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod [-cfvR] [--<span class="built_in">help</span>] [--version] mode file...</span><br></pre></td></tr></table></figure></li><li><p>é€‰é¡¹</p><blockquote><p>-cæˆ–â€“change: æ•ˆæœç±»ä¼¼â€™-vâ€™å‚æ•°ï¼Œä½†ä»…è¿”å›æ›´æ”¹çš„éƒ¨åˆ†<br>-fæˆ–â€“quietæˆ–â€“silent: ä¸æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯<br>-Ræˆ–â€“recursive: é€’å½’å¤„ç†ï¼Œ å°†æŒ‡ä»¤ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åŠå­—æ¯é‡Œä¸€å¹¶å¤„ç†<br>-væˆ–â€“verboseï¼š æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹<br>â€“reference=&lt;å‚è€ƒæ–‡ä»¶æˆ–ç›®å½•&gt;ï¼š æŠŠæŒ‡å®šæ–‡ä»¶æˆ–ç›®å½•çš„æ‰€å±ç¾¤ç»„å…¨éƒ¨è®¾æˆå’Œå‚è€ƒæ–‡ä»¶æˆ–ç›®å½•çš„æ‰€å±ç¾¤ç»„ç›¸åŒ<br>&lt;æƒé™èŒƒå›´&gt;+&lt;æƒé™è®¾ç½®&gt;ï¼š å¼€å¯æƒé™èŒƒå›´çš„æ–‡ä»¶æˆ–ç›®å½•çš„è¯¥é€‰é¡¹æƒé™è®¾ç½®<br>&lt;æƒé™èŒƒå›´&gt;-&lt;æƒé™è®¾ç½®&gt;ï¼š å…³é—­æƒé™èŒƒå›´çš„æ–‡ä»¶æˆ–ç›®å½•çš„è¯¥é€‰é¡¹æƒé™è®¾ç½®<br>&lt;æƒé™èŒƒå›´&gt;=&lt;æƒé™è®¾ç½®&gt;ï¼š æŒ‡å®šæƒé™èŒƒå›´çš„æ–‡ä»¶æˆ–ç›®å½•çš„è¯¥é€‰é¡¹æƒé™è®¾ç½®</p></blockquote></li><li><p>å‚æ•°<br>æƒé™æ¨¡å¼ï¼š æŒ‡å®šæ–‡ä»¶çš„æƒé™æ¨¡å¼<br>æ–‡ä»¶ï¼š è¦æ”¹å˜æƒé™çš„æ–‡ä»¶</p></li></ul><blockquote><p>chmod 722 ./shell.sh</p></blockquote><p>chmod 777 shell.sh # ç»Ÿä¸€æˆæƒæ–¹å¼ï¼Œä½¿ç”¨ä¸‰ä½æ•°å­—ä»£è¡¨æƒé™ï¼Œæ¯ä¸€ä½ä»£è¡¨ä¸€ä¸ªç»„ï¼Œä¸‰ä¸ªç»„æˆæƒå‡ä¸º7ï¼ˆrwxï¼‰<br>chmod u+x shell.sh # ç»™uç»„å¢åŠ æƒé™x</p><h1 id="æ•°å­—0-7ä»£è¡¨å«ä¹‰"><a href="#æ•°å­—0-7ä»£è¡¨å«ä¹‰" class="headerlink" title="æ•°å­—0 ~ 7ä»£è¡¨å«ä¹‰"></a>æ•°å­—0 ~ 7ä»£è¡¨å«ä¹‰</h1><blockquote><p>0: â€”   000<br>1: â€“x   001<br>2: -w-   010<br>3: -wx   011<br>4: râ€“   100<br>5: r-x   101<br>6: rw-   110<br>7: rwx   111</p></blockquote><p>å¯ä»¥çœ‹å‡ºè§„å¾‹ï¼Œæ¯ä¸€ç»„çš„æƒé™æŒ‰ç…§ä»å·¦åˆ°å³çš„æ’åºä¾æ¬¡æ˜¯rwx,æŒ‰ä¸‰ä¸ªäºŒè¿›åˆ¶ä½æ’åºï¼Œå“ªä¸€ä½ä¸º1å°±ä»£è¡¨è¯¥ä½æœ‰æƒé™</p><h3 id="chown"><a href="#chown" class="headerlink" title="chown"></a>chown</h3><p>æ”¹å˜æ–‡ä»¶æ‰€æœ‰è€…å‘½ä»¤æ ¼å¼ï¼š</p><blockquote><p>chown [é€‰é¡¹] å‚æ•°<br>chown [é€‰é¡¹]â€¦ [æ‰€æœ‰è€…][:[ç»„]] æ–‡ä»¶â€¦</p></blockquote><p>eg:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R mhy:mhy ~/.ssh</span><br></pre></td></tr></table></figure></p><p>åŒæ—¶æŠŠ<code>.ssh</code>çš„æ‰€æœ‰è€…å’Œç»„éƒ½æ”¹æˆäº†mhy</p><p>é€‰é¡¹ï¼š</p><ul><li>-R æˆ– â€“recursive é€’å½’å¤„ç†</li><li>â€“reference=&lt;å‚è€ƒæ–‡ä»¶æˆ–ç›®å½•&gt;   æŠŠæŒ‡å®šæ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€…ä¸æ‰€å±ç¾¤ç»„å…¨éƒ¨è®¾æˆå’Œå‚è€ƒæ–‡ä»¶æˆ–ç›®å½•æ‹¥æœ‰è€…ä¸æ‰€å±ç¾¤ç»„ç›¸åŒ</li></ul><p>å‚æ•°ï¼š</p><ul><li>ç”¨æˆ·ï¼šç»„   æŒ‡å®šæ‰€æœ‰è€…å’Œæ‰€å±ç»„ï¼Œ å½“çœç•¥ç»„ï¼Œä»…æ”¹å˜æ‰€æœ‰è€…</li><li>æ–‡ä»¶      æ–‡ä»¶åˆ—è¡¨ï¼Œå¯ä½¿ç”¨shellé€šé…ç¬¦æ”¹å˜å¤šä¸ª<br>egï¼š<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R mhy /<span class="built_in">home</span>/mhy<span class="comment">/*</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„"><a href="#ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„" class="headerlink" title="ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„"></a>ç›¸å¯¹è·¯å¾„å’Œç»å¯¹è·¯å¾„</h2><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/home/user</span><br><span class="line">./file.js</span><br></pre></td></tr></table></figure><h3 id="å¸¸ç”¨å‘½ä»¤ï¼š"><a href="#å¸¸ç”¨å‘½ä»¤ï¼š" class="headerlink" title="å¸¸ç”¨å‘½ä»¤ï¼š"></a>å¸¸ç”¨å‘½ä»¤ï¼š</h3><blockquote><p>cd ~ (å½“å‰ç”¨æˆ·çš„å®¶ç›®å½•ï¼Œå¦‚æœæ˜¯rootç”¨æˆ·ï¼Œåˆ™æ˜¯åœ¨/rootï¼Œ å…¶ä»–ç”¨æˆ·å®¶ç›®å½•åœ¨/home/username)<br>cd . å½“å‰<br>cd .. ä¸Šä¸€çº§<br>cd - è¿›å…¥ä¸Šä¸€æ¬¡ç›®å½•</p></blockquote><h2 id="æ–‡ä»¶å’Œæ–‡ä»¶å¤¹å¤„ç†å‘½ä»¤"><a href="#æ–‡ä»¶å’Œæ–‡ä»¶å¤¹å¤„ç†å‘½ä»¤" class="headerlink" title="æ–‡ä»¶å’Œæ–‡ä»¶å¤¹å¤„ç†å‘½ä»¤"></a>æ–‡ä»¶å’Œæ–‡ä»¶å¤¹å¤„ç†å‘½ä»¤</h2><p>åˆ›å»ºæ–‡ä»¶å¤¹æ ¼å¼ï¼š</p><blockquote><p>mkdir -p [ç›®å½•å]</p></blockquote><p>é€‰é¡¹ï¼š</p><ul><li>-p é€’å½’åˆ›å»ºï¼ˆå…ˆå»ºç«‹ä¸Šä¸€çº§ç›®å½•ï¼‰</li></ul><p>å…¶ä»–å‘½ä»¤ï¼š</p><ul><li>pwd</li><li>rmdir åˆ é™¤ç©ºç™½ç›®å½•ï¼Œå¦‚æœæœ‰å­æ–‡ä»¶åˆ™æ— æ³•åˆ é™¤ï¼Œä¸å¸¸ç”¨</li><li>rm åˆ æ–‡ä»¶æˆ–ç›®å½•</li><li>rm -rf  å¼ºåˆ¶åˆ é™¤ç›®å½•</li><li>rm -r åˆ é™¤ç›®å½•ï¼Œ ä¼šæœ‰ç¡®è®¤æç¤º</li><li>rm -f å¼ºåˆ¶åˆ é™¤ï¼Œä¸ä¼šæç¤º</li><li>cp å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•</li><li>cp [é€‰é¡¹] éœ€è¦å¤åˆ¶çš„è·¯å¾„  ç›®æ ‡ä½ç½®</li><li>cp -r å¤åˆ¶ç›®å½•</li><li>cp -p è¿å¸¦æ–‡ä»¶å±æ€§å¤åˆ¶</li><li>cp -d è‹¥æºæ–‡ä»¶æ˜¯é“¾æ¥æ–‡ä»¶åˆ™å¤åˆ¶é“¾æ¥å±æ€§</li><li>cp -a ç›¸å½“äº -pdr</li><li>mv [æºæ–‡ä»¶ä½ç½®] [ç›®æ ‡ä½ç½®]</li></ul><h3 id="å¸¸ç”¨ç›®å½•"><a href="#å¸¸ç”¨ç›®å½•" class="headerlink" title="å¸¸ç”¨ç›®å½•"></a>å¸¸ç”¨ç›®å½•</h3><p>ç³»ç»Ÿå‘½ä»¤ç›®å½•<br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">/bin</span></span><br><span class="line"><span class="string">/sbin</span></span><br><span class="line"><span class="string">/usr/bin</span></span><br><span class="line"><span class="string">/usr/sbin</span></span><br><span class="line">sbinä¸‹åªæœ‰rootæƒé™å¯ä»¥æ‰§è¡Œï¼Œ å…¶ä»–ä¸¤ä¸ªæ‰€æœ‰ä¸éœ€è¦root</span><br><span class="line"></span><br><span class="line"><span class="string">/boot</span> å¯åŠ¨ç›®å½•</span><br><span class="line"><span class="string">/etc</span> é»˜è®¤é…ç½®æ–‡ä»¶ç›®å½•</span><br><span class="line"><span class="string">/lib</span> å‡½æ•°åº“</span><br><span class="line"><span class="string">/media</span> æŒ‚è½½ç§»åŠ¨ç›˜</span><br><span class="line"><span class="string">/mnt</span> æŒ‚è½½ç£ç›˜</span><br><span class="line"><span class="string">/sys</span><span class="string">/proc</span>  å†…å­˜ç›¸å…³çš„ç›®å½•</span><br><span class="line"><span class="string">/tmp</span> ä¸´æ—¶ç›®å½•</span><br><span class="line"><span class="string">/usr</span> ç³»ç»Ÿè½¯ä»¶èµ„æºç›®å½•</span><br><span class="line">2<span class="string">/usr/bin</span> ç³»ç»Ÿå‘½ä»¤<span class="params">(æ™®é€šç”¨æˆ·)</span></span><br><span class="line">2<span class="string">/usr/sbin</span> ç³»ç»Ÿå‘½ä»¤<span class="params">(root)</span></span><br><span class="line"><span class="string">/var</span> ç³»ç»Ÿç›¸å…³çš„æ–‡æ¡£å†…å®¹</span><br></pre></td></tr></table></figure></p><h2 id="é“¾æ¥å‘½ä»¤-link"><a href="#é“¾æ¥å‘½ä»¤-link" class="headerlink" title="é“¾æ¥å‘½ä»¤(link)"></a>é“¾æ¥å‘½ä»¤(link)</h2><blockquote><p>ln -s [åŸæ–‡ä»¶]] [ç›®æ ‡æ–‡ä»¶]</p></blockquote><p>é€‰é¡¹ï¼š</p><ul><li>-s ç”Ÿæˆè½¯è¿æ¥ ä¸å¸¦såˆ™ç”Ÿæˆ ç¡¬é“¾æ¥</li></ul><h3 id="ç¡¬é“¾æ¥"><a href="#ç¡¬é“¾æ¥" class="headerlink" title="ç¡¬é“¾æ¥"></a>ç¡¬é“¾æ¥</h3><p>ç‰¹ç‚¹ï¼š</p><blockquote><p>1.æ‹¥æœ‰ç›¸åŒçš„ièŠ‚ç‚¹å’Œå­˜å‚¨blockå—ï¼Œå¯ä»¥çœ‹æˆæ˜¯åŒä¸€ä¸ªæ–‡ä»¶<br>2.å¯é€šè¿‡ièŠ‚ç‚¹è¯†åˆ«<br>3.ä¸èƒ½è·¨åˆ†åŒº<br>4.ä¸èƒ½é’ˆå¯¹ç›®å½•ä½¿ç”¨<br>5.åˆ é™¤ä¸€ä¸ªï¼Œå¦ä¸€ä¸ªè¿˜åœ¨ï¼ˆé€šè¿‡ièŠ‚ç‚¹è¯†åˆ«ï¼‰</p></blockquote><h3 id="è½¯é“¾æ¥ï¼š"><a href="#è½¯é“¾æ¥ï¼š" class="headerlink" title="è½¯é“¾æ¥ï¼š"></a>è½¯é“¾æ¥ï¼š</h3><p>ç‰¹ç‚¹ï¼š</p><blockquote><p>1.ç±»ä¼¼windowsçš„å¿«æ·æ–¹å¼<br>2.è½¯é“¾æ¥æœ‰è‡ªå·±çš„ièŠ‚ç‚¹å’Œblockå—ï¼Œæ•°æ®åªä¿å­˜åœ¨åŸæ–‡ä»¶çš„æ–‡ä»¶åå’ŒièŠ‚ç‚¹ï¼Œå¹¶æ²¡æœ‰å®é™…çš„æ–‡ä»¶æ•°æ®<br>3.lrwxâ€”â€“  ç¬¬ä¸€ä¸ªlè¡¨ç¤ºè½¯é“¾æ¥<br>4.ä¿®æ”¹åŸæ–‡ä»¶ï¼Œæ”¹ä»»ä½•ä¸€ä¸ªçš„éƒ½ä¼šæ”¹å˜ï¼Œ<br>5.åˆ é™¤åŸæ–‡ä»¶ï¼Œè½¯é“¾æ¥ä¸èƒ½ä½¿ç”¨ï¼ˆç¡¬é“¾æ¥ä¸å½±å“ä½¿ç”¨ï¼‰<br>6.åˆ é™¤è½¯é“¾æ¥å¯ä»¥ä½¿ç”¨åŸæ–‡ä»¶<br>7.è½¯é“¾æ¥çš„æƒé™777ï¼Œä½†æ˜¯å®é™…æƒé™æ˜¯åŸæ–‡ä»¶çš„æƒé™<br>8.åˆ›å»ºè½¯é“¾æ¥æ—¶åŸæ–‡ä»¶å¿…é¡»å†™ç»å¯¹è·¯å¾„</p></blockquote><p>æŸ¥çœ‹ièŠ‚ç‚¹ï¼š<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ls -i</span></span><br></pre></td></tr></table></figure></p><h2 id="æ–‡ä»¶æœç´¢å‘½ä»¤"><a href="#æ–‡ä»¶æœç´¢å‘½ä»¤" class="headerlink" title="æ–‡ä»¶æœç´¢å‘½ä»¤"></a>æ–‡ä»¶æœç´¢å‘½ä»¤</h2><blockquote><p>1.æ–‡ä»¶æœç´¢å‘½ä»¤: locate<br>2.æ–‡ä»¶æœç´¢å‘½ä»¤: find<br>3.å‘½ä»¤æœç´¢å‘½ä»¤: whereis, which<br>4.å­—ç¬¦ä¸²æœç´¢å‘½ä»¤: grep</p></blockquote><h3 id="locate"><a href="#locate" class="headerlink" title="locate"></a>locate</h3><blockquote><p>locate æ–‡ä»¶å</p></blockquote><p>åœ¨åå°æ•°æ®åº“æŒ‰æ–‡ä»¶åæœç´¢ï¼Œé€Ÿåº¦å¿«, locateå‘½ä»¤æœç´¢çš„æ•°æ®åº“æ˜¯ <code>/var/lib/locate</code><br>æ¯å¤©æ›´æ–°ä¸€æ¬¡ï¼Œæ‰€æœ‰æ–°å»ºæ–‡ä»¶åå¯ä»¥å¼ºåˆ¶æ›´æ–°è¯¥æ•°æ®åº“ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">updatedb</span><br></pre></td></tr></table></figure></p><p>locateä½¿ç”¨ç‰¹ç‚¹ï¼š<br><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">åªèƒ½æŒ‰æ–‡ä»¶åæœç´¢</span><br><span class="line">é…ç½®æ–‡ä»¶: /etc/updatedb.conf</span><br><span class="line">é…ç½®é‡Œé¢çš„é€‰é¡¹æ˜¯ä¸æœç´¢çš„æ–‡ä»¶ç³»ç»Ÿ</span><br><span class="line">MACç³»ç»Ÿå’Œlinuxç³»ç»Ÿçš„locateæœ‰å·®å¼‚</span><br></pre></td></tr></table></figure></p><h3 id="whereis-where-which"><a href="#whereis-where-which" class="headerlink" title="whereis (where), which"></a>whereis (where), which</h3><blockquote><p>whereis æŸ¥çœ‹æ‰§è¡Œä½ç½®å’Œå¸®åŠ©æ–‡æ¡£ä½ç½®</p></blockquote><p>é€‰é¡¹ï¼š</p><ul><li>-b åªæŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶</li><li>-m ä¹‹æŸ¥æ‰¾å¸®åŠ©æ–‡ä»¶</li></ul><p>which æŸ¥çœ‹å‘½ä»¤çš„å¯æ‰§è¡Œä½ç½®å’Œåˆ«å</p><blockquote><p>which</p></blockquote><p><strong>åªèƒ½æŸ¥å¤–éƒ¨å®‰è£…çš„å‘½ä»¤ï¼Œå³åªèƒ½æŸ¥éœ€è¦æ‰§è¡Œè„šæœ¬æ–‡ä»¶çš„å‘½ä»¤</strong><br>æœç´¢ä¾èµ–äºç¯å¢ƒå˜é‡ $PATH</p><h3 id="find"><a href="#find" class="headerlink" title="find"></a>find</h3><p>æ–‡ä»¶æœç´¢å‘½ä»¤, å¾ˆå¼ºå¤§</p><blockquote><p>find [æœç´¢èŒƒå›´] [æœç´¢æ¡ä»¶]</p></blockquote><p>eg:<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="builtin-name">find</span> / -name nginx.conf</span><br><span class="line"><span class="builtin-name">find</span> ~/.ssh -name config</span><br></pre></td></tr></table></figure></p><p><strong>é¿å…å¤§èŒƒå›´æœç´¢ï¼Œå¾ˆæ¶ˆè€—ç³»ç»Ÿèµ„æº</strong>ã€‚<br>findæ˜¯åœ¨ç³»ç»Ÿä¸­æœç´¢ç¬¦åˆæ¡ä»¶çš„æ–‡ä»¶åï¼Œå¦‚æœéœ€è¦åŒ¹é…ï¼Œä½¿ç”¨é€šé…ç¬¦åŒ¹é…ï¼Œé€šé…ç¬¦æ˜¯å®Œå…¨åŒ¹é….</p><h3 id="é€šé…ç¬¦ï¼š"><a href="#é€šé…ç¬¦ï¼š" class="headerlink" title="é€šé…ç¬¦ï¼š"></a>é€šé…ç¬¦ï¼š</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">* </span>åŒ¹é…ä»»æ„å†…å®¹</span><br><span class="line">? åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦</span><br><span class="line">[] åŒ¹é…ä»»æ„ä¸€ä¸ªä¸­æ‹¬å·å†…çš„å­—ç¬¦</span><br></pre></td></tr></table></figure><p>é€‰é¡¹ï¼š</p><ul><li>-name  æŒ‰åç§°</li><li>-iname ä¸åŒºåˆ†å¤§å°å†™æŒ‰åç§°</li><li>-user  æŒ‰æ‰€æœ‰è€…æœç´¢</li><li>-nouser æŸ¥æ‰¾æ²¡æœ‰æ‰€æœ‰è€…çš„æ–‡ä»¶ï¼ˆå†…æ ¸æ–‡ä»¶æ²¡æœ‰æ‰€æœ‰è€…ï¼Œuç›˜çš„æ•°æ®å¯èƒ½æ²¡æœ‰æ‰€æœ‰è€…ï¼Œwindowsæ–‡ä»¶æ²¡æœ‰æ‰€æœ‰è€…ï¼‰</li><li>-mtime æŸ¥æ‰¾é™å®šæ—¶é—´å‰ä¿®æ”¹çš„æ–‡ä»¶ é»˜è®¤æ˜¯å¤©</li></ul><p>egï¼š<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">find /var/log/ -mtime +<span class="number">10</span> #æŸ¥æ‰¾<span class="number">10</span>å¤©å‰ä¿®æ”¹çš„æ–‡ä»¶</span><br><span class="line"><span class="number">-10</span><span class="number">10</span>å¤©å†…</span><br><span class="line"><span class="number">10</span><span class="number">10</span>å¤©å½“å¤©</span><br><span class="line">+<span class="number">10</span><span class="number">10</span>å¤©å‰</span><br><span class="line">-atime æ–‡ä»¶è®¿é—®æ—¶é—´</span><br><span class="line">-ctime æ”¹å˜æ–‡ä»¶å±æ€§</span><br><span class="line">-mtime ä¿®æ”¹æ–‡ä»¶å†…å®¹</span><br><span class="line"></span><br><span class="line">find / -size <span class="number">25</span>k #æŸ¥æ‰¾æ–‡ä»¶å¤§å°æ˜¯<span class="number">25</span>kbçš„æ–‡ä»¶</span><br><span class="line">â€”<span class="number">25</span> å°äº<span class="number">25</span>kb</span><br><span class="line"><span class="number">25</span>kb ç­‰äº<span class="number">25</span>kb</span><br><span class="line">+<span class="number">25</span>kb å¤§äº<span class="number">25</span>kb</span><br><span class="line"></span><br><span class="line">find / -size +<span class="number">25</span>k -a <span class="number">-50</span>k # å¤§äº<span class="number">25</span>k ä¸” å°äº<span class="number">50</span>k</span><br><span class="line">find / -size <span class="number">-25</span>k -o +<span class="number">50</span>k # å°äº<span class="number">25</span>k æˆ– å¤§äº<span class="number">50</span>k</span><br><span class="line"></span><br><span class="line">find / -size <span class="number">25</span>k -exec ls -lh &#123;&#125; \; #æŸ¥æ‰¾ï¼Œå¹¶æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</span><br></pre></td></tr></table></figure></p><p>æŸ¥æ‰¾åˆ°çš„æ–‡ä»¶æ‰§è¡Œåé¢çš„æ“ä½œ -exec:<br><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-exec <span class="string">...</span> &#123;&#125; \;  <span class="comment">#æ ‡å‡†æ ¼å¼</span></span><br><span class="line">find . -inum 262422 <span class="comment">#æŸ¥æ‰¾ièŠ‚ç‚¹æ˜¯262422çš„æ–‡ä»¶</span></span><br><span class="line"><span class="comment"># kå­—èŠ‚å°å†™ï¼Œ Må­—èŠ‚å¤§å†™</span></span><br><span class="line"><span class="keyword">ls</span> -i æ–‡ä»¶å</span><br></pre></td></tr></table></figure></p><h3 id="grepå‘½ä»¤"><a href="#grepå‘½ä»¤" class="headerlink" title="grepå‘½ä»¤"></a>grepå‘½ä»¤</h3><p>åœ¨æŒ‡å®šæ–‡ä»¶ä¸­æœç´¢å­—ç¬¦ä¸²</p><blockquote><p>grep [é€‰é¡¹] å­—ç¬¦ä¸² æ–‡ä»¶å<br>é€‰é¡¹ï¼š</p><ul><li>-i å¿½ç•¥å¤§å°å†™</li><li>-v æ’é™¤æŒ‡å®šå­—ç¬¦ä¸²ï¼Œ å–åæœç´¢</li></ul></blockquote><p>eg:<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grep</span><span class="string">"size"</span> file_name</span><br><span class="line"><span class="keyword">grep</span><span class="string">"size"</span> file1 file2 file3  <span class="comment">#å¤šæ–‡ä»¶æœç´¢</span></span><br></pre></td></tr></table></figure></p><p>æ ‡è®°åŒ¹é…é¢œè‰² â€“color=auto é€‰é¡¹ï¼š<br><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">"size"</span><span class="built_in">file_name</span> --<span class="built_in">color</span>=auto</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ -E é€‰é¡¹ï¼š<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grep</span> -E <span class="string">"[1-9]+"</span></span><br><span class="line"><span class="comment">#æˆ–</span></span><br><span class="line">egrep <span class="string">"[1-9]+"</span></span><br></pre></td></tr></table></figure></p><p>åªè¾“å‡ºæ–‡ä»¶ä¸­åŒ¹é…åˆ°çš„éƒ¨åˆ† -o é€‰é¡¹ï¼š<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> this <span class="keyword">is</span><span class="keyword">a</span> test <span class="built_in">line</span>. | <span class="keyword">grep</span> -<span class="keyword">o</span> -E <span class="string">"[a-z]+\."</span></span><br></pre></td></tr></table></figure></p><h3 id="grep-å’Œ-find-åŒºåˆ«"><a href="#grep-å’Œ-find-åŒºåˆ«" class="headerlink" title="grep å’Œ find åŒºåˆ«"></a>grep å’Œ find åŒºåˆ«</h3><ul><li>find åœ¨ç³»ç»Ÿä¸­æœç´¢æ–‡ä»¶åï¼Œé€šé…ç¬¦åŒ¹é…ï¼Œ é€šé…ç¬¦æ˜¯<em>å®Œå…¨åŒ¹é…</em></li><li>grep åœ¨æ–‡ä»¶ä¸­æœç´¢å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨æ­£åˆ™åŒ¹é…ï¼Œæ­£åˆ™æ˜¯<em>åŒ…å«åŒ¹é…</em></li></ul><h2 id="å¸®åŠ©å‘½ä»¤"><a href="#å¸®åŠ©å‘½ä»¤" class="headerlink" title="å¸®åŠ©å‘½ä»¤"></a>å¸®åŠ©å‘½ä»¤</h2><h3 id="man"><a href="#man" class="headerlink" title="man"></a>man</h3><p> man å‘½ä»¤</p><ul><li>æŸ¥çœ‹æœ‰å“ªäº›çº§åˆ«:<blockquote><p>man -f å‘½ä»¤  == whatis å‘½ä»¤</p></blockquote></li><li><p>æŸ¥çœ‹æŒ‡å®šçº§åˆ«:</p><blockquote><p>man -5 passwd<br>man -4 null<br>man -8 ifconfig</p></blockquote></li><li><p>æŸ¥çœ‹æ‰€æœ‰å«æœ‰å‘½ä»¤å…³é”®è¯çš„ä¿¡æ¯:</p><blockquote><p>man -k å‘½ä»¤</p></blockquote></li></ul><h3 id="å…¶ä»–å¸®åŠ©å‘½ä»¤"><a href="#å…¶ä»–å¸®åŠ©å‘½ä»¤" class="headerlink" title="å…¶ä»–å¸®åŠ©å‘½ä»¤"></a>å…¶ä»–å¸®åŠ©å‘½ä»¤</h3><ul><li>é€‰é¡¹å¸®åŠ©: â€“help</li></ul><p>å‘½ä»¤å¸®åŠ©é€‰é¡¹</p><ul><li>shellå†…éƒ¨å‘½ä»¤ï¼š help</li></ul><p>è·å–shellå†…éƒ¨çš„å¸®åŠ©ï¼Œshellæœ‰è‡ªå¸¦çš„ä¸€äº›å‘½ä»¤ï¼Œæ¯”å¦‚cd,help<br>å¯ä»¥é€šè¿‡whereis cd ç¡®å®šæ˜¯å¦æ˜¯shellå†…éƒ¨å‘½ä»¤ï¼Œçœ‹å¯æ‰§è¡Œæ–‡ä»¶</p><blockquote><p>help cd #command not found: help</p></blockquote><ul><li>info</li></ul><h2 id="å‹ç¼©å‘½ä»¤"><a href="#å‹ç¼©å‘½ä»¤" class="headerlink" title="å‹ç¼©å‘½ä»¤"></a>å‹ç¼©å‘½ä»¤</h2><ul><li>å¸¸è¥å‹ç¼©æ ¼å¼ï¼š<blockquote><p>.zip  .gz  .bz2<br>.tar.gz  .tar.bz2</p></blockquote></li></ul><p><strong>linuxæ–‡ä»¶ä¸åŒºåˆ†åç¼€åï¼Œä½†æ˜¯å‹ç¼©æ–‡ä»¶ä¸ºäº†åŒºåˆ†æ–‡ä»¶ç±»å‹å’Œå‹ç¼©ç±»å‹ï¼Œå¿…é¡»è¦åœ¨åç¼€ä¸­å†™æ¸…æ¥šæ ¼å¼</strong><br>æŒ‰å‹ç¼©æ ¼å¼æ¥è®°å‘½ä»¤ç¬”è®°æ–¹ä¾¿</p><h3 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h3><ul><li>å‹ç¼©æ–‡ä»¶ï¼š<blockquote><p>zip å‹ç¼©æ–‡ä»¶å  æºæ–‡ä»¶</p></blockquote></li><li>å‹ç¼©ç›®å½•â€œ<blockquote><p>zip -r å‹ç¼©æ–‡ä»¶å  æºç›®å½•</p></blockquote></li><li>è§£å‹ç¼©ï¼š<blockquote><p>unzip å‹ç¼©æ–‡ä»¶</p></blockquote></li></ul><h3 id="gzip"><a href="#gzip" class="headerlink" title="gzip"></a>gzip</h3><ul><li>å‹ç¼©ä¸º.gzæ ¼å¼æ–‡ä»¶ï¼Œæºæ–‡ä»¶ä¼šæ¶ˆå¤±ï¼š<blockquote><p>gzip æºæ–‡ä»¶</p></blockquote></li><li>å‹ç¼©ä¸º.gzæ ¼å¼ï¼Œæºæ–‡ä»¶ä¿ç•™ï¼š<blockquote><p>gzip -c æºæ–‡ä»¶ &gt; å‹ç¼©æ–‡ä»¶<br>egï¼š</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gzip -c <span class="selector-tag">a</span><span class="selector-class">.js</span> &gt; <span class="selector-tag">a</span><span class="selector-class">.js</span>.gz</span><br></pre></td></tr></table></figure></blockquote></li></ul><p>å®é™…ä¸Šæ˜¯æŠŠæºæ–‡ä»¶è¾“å‡ºåˆ°æ–°çš„æ–‡ä»¶</p><ul><li>å‹ç¼©ç›®å½•<br>å‹ç¼©ç›®å½•å®é™…ä¸Šæ˜¯æŠŠç›®å½•å†…çš„æ–‡ä»¶å…¨éƒ¨å‹ç¼©<blockquote><p>gzip -r ç›®å½•</p></blockquote></li></ul><p>å‹ç¼©ç›®å½•ä¸‹æ‰€æœ‰å­æ–‡ä»¶ï¼Œä½†æ˜¯ä¸èƒ½å‹ç¼©ç›®å½•</p><ul><li><p>è§£å‹ç¼©æ–‡ä»¶</p><blockquote><p>gzip -d å‹ç¼©æ–‡ä»¶<br>gunzip å‹ç¼©æ–‡ä»¶</p></blockquote></li><li><p>è§£å‹ç¼©ç›®å½•</p><blockquote><p>gunzip -r å‹ç¼©ç›®å½•</p></blockquote></li></ul><h3 id="bz2-ï¼ˆä¸èƒ½å‹ç¼©ç›®å½•ï¼‰"><a href="#bz2-ï¼ˆä¸èƒ½å‹ç¼©ç›®å½•ï¼‰" class="headerlink" title=".bz2 ï¼ˆä¸èƒ½å‹ç¼©ç›®å½•ï¼‰"></a>.bz2 ï¼ˆä¸èƒ½å‹ç¼©ç›®å½•ï¼‰</h3><p>å‹ç¼©æ–‡ä»¶ï¼š</p><blockquote><p>bzip2 æ–‡ä»¶å<br>bzip2 -k æ–‡ä»¶å</p></blockquote><p>è§£å‹ç¼©æ–‡ä»¶ï¼š</p><blockquote><p>-k ä¿ç•™å‹ç¼©æ–‡ä»¶<br>bzip2 -d å‹ç¼©æ–‡ä»¶<br>bunzip2 å‹ç¼©æ–‡ä»¶</p></blockquote><p><strong>ä¸Šé¢ä¸‰ä¸ªå‹ç¼©å‘½ä»¤åªæœ‰zipå¯ä»¥å‹ç¼©æ²¡æœ‰äº†ï¼Œ gzipå‹ç¼©ç›®å½•å®é™…ä¸Šæ˜¯å‹ç¼©äº†ç›®å½•å†…çš„æ–‡ä»¶ï¼Œbz2ç›´æ¥å›æŠ¥é”™ï¼Œå¯ä»¥ç”¨tarå‘½ä»¤æ‰“åŒ…ï¼Œç„¶åå†å‹ç¼©</strong></p><h3 id="æ‰“åŒ…å‘½ä»¤-tar"><a href="#æ‰“åŒ…å‘½ä»¤-tar" class="headerlink" title="æ‰“åŒ…å‘½ä»¤ tar"></a>æ‰“åŒ…å‘½ä»¤ tar</h3><ul><li>æ‰“åŒ…å‘½ä»¤ï¼š<blockquote><p>tar -cvf æ‰“åŒ…æ–‡ä»¶å æºæ–‡ä»¶</p></blockquote></li></ul><p>é€‰é¡¹ï¼š</p><ul><li>-c æ‰“åŒ…</li><li>-v æ˜¾ç¤ºè¿‡ç¨‹</li><li><p>-f æŒ‡å®šæ‰“åŒ…åçš„æ–‡ä»¶å<br>eg:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tar</span><span class="selector-tag">-cvf</span><span class="selector-tag">longzls</span><span class="selector-class">.tar</span><span class="selector-tag">longzls</span></span><br></pre></td></tr></table></figure></li><li><p>è§£æ‰“åŒ…å‘½ä»¤ï¼š</p><blockquote><p>tar -xvf æ‰“åŒ…æ–‡ä»¶å</p></blockquote></li></ul><p>é€‰é¡¹ï¼š</p><ul><li>-x: è§£æ‰“åŒ…<br>eg:<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tar</span><span class="selector-tag">-xvf</span><span class="selector-tag">longzls</span><span class="selector-class">.tar</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="tar-gz"><a href="#tar-gz" class="headerlink" title=".tar.gz"></a>.tar.gz</h3><p>.tar.gzæ ¼å¼æ˜¯å…ˆæ‰“åŒ…ä¸º.taræ ¼å¼ï¼Œç„¶åå‹ç¼©ä¸º.gzæ ¼å¼</p><blockquote><p>tar -zcvf å‹ç¼©åŒ…å.tar.gz æºæ–‡ä»¶</p></blockquote><p>é€‰é¡¹ï¼š</p><ul><li>-z å‹ç¼©ä¸º.tar.gzæ ¼å¼</li></ul><blockquote><p>tar -zxvf å‹ç¼©åŒ…å.tar.gz</p></blockquote><p>é€‰é¡¹ï¼š</p><ul><li>-x è§£å‹ç¼©.tar.gzæ ¼å¼</li></ul><h3 id="tar-bz2"><a href="#tar-bz2" class="headerlink" title=".tar.bz2"></a>.tar.bz2</h3><blockquote><p>tar -jcvf å‹ç¼©åŒ…å.tar.bz2 æºæ–‡ä»¶</p></blockquote><p>é€‰é¡¹ï¼š</p><ul><li>-j å‹ç¼©ä¸º.tar.bz2æ ¼å¼</li></ul><blockquote><p>tar -jxvf å‹ç¼©åŒ…å.tar,bz2</p></blockquote><p>é€‰é¡¹ï¼š</p><ul><li>-x è§£å‹ç¼©.tar.bz2æ ¼å¼</li></ul><p>æŒ‡å®šè§£å‹ç¼©ä½ç½®ï¼š</p><blockquote><p>tar -jxvf å‹ç¼©åŒ…å.gz.bz2  -C è§£å‹ç¼©ä½ç½®</p></blockquote><p>æ³¨æ„ï¼š é€‰é¡¹å¤§å†™Cå¿…é¡»å†™åˆ°å‹ç¼©åŒ…ååé¢</p><p>å‹ç¼©å¤šä¸ªæ–‡ä»¶æ—¶å‹ç¼©æ–‡ä»¶åç”¨ç©ºæ ¼è¿æ¥</p><p>æŸ¥çœ‹åŒ…é‡Œé¢å†…å®¹ä¸è§£å‹ï¼Œé€‰é¡¹ï¼š</p><ul><li>-t</li></ul><p><strong>Linuxæœ€å¸¸ç”¨çš„å‹ç¼©æ ¼å¼æ˜¯.tar.gzå’Œ.tar.bz2</strong></p><h2 id="Linuxçš„å…³æœºå’Œé‡å¯å‘½ä»¤"><a href="#Linuxçš„å…³æœºå’Œé‡å¯å‘½ä»¤" class="headerlink" title="Linuxçš„å…³æœºå’Œé‡å¯å‘½ä»¤"></a>Linuxçš„å…³æœºå’Œé‡å¯å‘½ä»¤</h2><h3 id="å…³æœº"><a href="#å…³æœº" class="headerlink" title="å…³æœº"></a>å…³æœº</h3><blockquote><p>shutdown [é€‰é¡¹] æ—¶é—´</p></blockquote><p>é€‰é¡¹ï¼š</p><ul><li>-c å–æ¶ˆå‰ä¸€ä¸ªæŒ‚æœºå‘½ä»¤</li><li>-h å…³æœº</li><li>-r é‡å¯</li></ul><p>æ—¶é—´ï¼š</p><ul><li>now #ç«‹å³æ‰§è¡Œ</li><li>10 #ååˆ†é’Ÿåæ‰§è¡Œ</li></ul><p>eg:<br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">shutdown -h <span class="number">2</span>:<span class="number">33</span> # <span class="number">2</span>:<span class="number">32</span> å…³æœº</span><br><span class="line">shutdown -r now</span><br></pre></td></tr></table></figure></p><p>shutdown å‘½ä»¤å¯ä»¥æ­£ç¡®ä¿æŒå…³æœºå‰çš„æ–‡ä»¶ï¼Œæ¯”è¾ƒå®‰å…¨.</p><p><strong>ä»¥ä¸‹å‘½ä»¤å…³æœºä¸å®‰å…¨</strong><br><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">halt</span><br><span class="line">poweroff</span><br><span class="line">init <span class="number">0</span></span><br></pre></td></tr></table></figure></p><h3 id="é‡å¯ï¼š"><a href="#é‡å¯ï¼š" class="headerlink" title="é‡å¯ï¼š"></a>é‡å¯ï¼š</h3><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br><span class="line">init <span class="number">6</span></span><br></pre></td></tr></table></figure><p>reboot æ˜¯æ¯”è¾ƒå®‰å…¨çš„é‡å¯æ–¹å¼</p><h3 id="é€€å‡ºç™»å½•ï¼š"><a href="#é€€å‡ºç™»å½•ï¼š" class="headerlink" title="é€€å‡ºç™»å½•ï¼š"></a>é€€å‡ºç™»å½•ï¼š</h3><blockquote><p>logout</p></blockquote><h2 id="æŒ‚è½½å‘½ä»¤"><a href="#æŒ‚è½½å‘½ä»¤" class="headerlink" title="æŒ‚è½½å‘½ä»¤"></a>æŒ‚è½½å‘½ä»¤</h2><p>æŸ¥è¯¢ç³»ç»Ÿä¸­æŒ‚è½½çš„ç‚¹ï¼š</p><blockquote><p>mount</p></blockquote><p>ä¾æ®/etc/fstabæ–‡ä»¶è‡ªåŠ¨æŒ‚è½½ï¼š</p><blockquote><p>mount -a</p></blockquote><p>æŒ‚è½½å‘½ä»¤æ ¼å¼ï¼š</p><blockquote><p>mount [-t æ–‡ä»¶ç³»ç»Ÿ] [-o ç‰¹æ®Šé€‰é¡¹] è®¾å¤‡æ–‡ä»¶å æŒ‚è½½ç‚¹</p></blockquote><p>é€‰é¡¹ï¼š</p><ul><li>-t æ–‡ä»¶ç³»ç»Ÿï¼šeg:ext3,ext4, ios9660â€¦.</li><li>-o ç‰¹æ®Šé€‰é¡¹ï¼šå¯ä»¥æŒ‡å®šæŒ‚è½½çš„é¢å¤–é€‰é¡¹</li></ul><p>æŒ‚è½½å…‰ç›˜(å…ˆè¦æ’å…¥å…‰ç›˜æˆ–è€…è™šæ‹Ÿæœºå¯¼å…¥isoé•œåƒ):</p><p>1.å»ºç«‹æŒ‚è½½ç‚¹ï¼š</p><blockquote><p>mkdir /mnt/cdrom/</p></blockquote><p>2.æŒ‚è½½å…‰ç›˜</p><blockquote><p>mount -t iso9660 /dev/cdrom/ /mnt/cdrom/</p></blockquote><p>3.ç®€å†™ï¼ˆé»˜è®¤çš„æ–‡ä»¶ç³»ç»Ÿï¼‰</p><blockquote><p>mount /dev/sr0 /mnt/cdrom</p></blockquote><p>4.å¸è½½å‘½ä»¤ï¼š</p><blockquote><p>umount è®¾å¤‡åæˆ–æŒ‚è½½ç‚¹<br>umount /mnt/cdrom</p></blockquote><p>5.æŒ‚è½½Uç›˜:</p><blockquote><p>fdisk -l # æŸ¥çœ‹Uç›˜è®¾å¤‡æ–‡ä»¶å<br>mount -t vfat /dev/sdb1 /mnt/ust/</p></blockquote><h2 id="è¿œç¨‹ç™»å½•yç”¨æˆ·ä¿¡æ¯æŸ¥çœ‹"><a href="#è¿œç¨‹ç™»å½•yç”¨æˆ·ä¿¡æ¯æŸ¥çœ‹" class="headerlink" title="è¿œç¨‹ç™»å½•yç”¨æˆ·ä¿¡æ¯æŸ¥çœ‹"></a>è¿œç¨‹ç™»å½•yç”¨æˆ·ä¿¡æ¯æŸ¥çœ‹</h2><blockquote><p>w</p></blockquote><p><code>w</code> å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿè¿œç¨‹ç™»å½•ç”¨æˆ·ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç³»ç»Ÿèµ„æº</p><blockquote><p> who</p></blockquote><p><code>who</code> å‘½ä»¤æŸ¥çœ‹ç³»ç»Ÿè¿œç¨‹ç™»å½•ç”¨æˆ·ä¿¡æ¯ï¼ŒåŠŸèƒ½å’Œwå‘½ä»¤ç±»ä¼¼ï¼Œä¸è¿‡æ²¡æœ‰ç³»ç»Ÿèµ„æºä¿¡æ¯</p><blockquote><p>last</p></blockquote><p>lastå‘½ä»¤é»˜è®¤æ˜¯è¯»å–<code>/var/log/wtmp</code>æ–‡ä»¶çš„æ•°æ®ã€‚å‘½ä»¤è¾“å‡ºï¼š</p><blockquote><p>ç”¨æˆ·å  ç™»å½•ç»ˆç«¯ ç™»å½•ip ç™»å½•æ—¶é—´ é€€å‡ºæ—¶é—´(åœ¨çº¿æ—¶é—´)</p></blockquote><blockquote><p>lastlog</p></blockquote><p>æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·çš„æœ€åä¸€æ¬¡ç™»å½•</p><p>å‚è€ƒï¼š<br><a href="http://man.linuxde.net/chmod" target="_blank" rel="noopener">chmodå‘½ä»¤</a><br><a href="http://www.runoob.com/linux/linux-comm-chmod.html" target="_blank" rel="noopener">Linux chmodå‘½ä»¤</a></p>]]></content><summary type="html">
    
      linux å­¦ä¹ ç¬”è®°ä¹‹æƒé™ç®¡ç†ã€‚
    
    </summary><category term="åç«¯" scheme="https://mhynet.cn/categories/%E5%90%8E%E7%AB%AF/"/><category term="linux" scheme="https://mhynet.cn/tags/linux/"/><category term="bash" scheme="https://mhynet.cn/tags/bash/"/></entry><entry><title>mongodbå­¦ä¹ ç¬”è®°</title><link href="https://mhynet.cn/mongodb-notes.html"/><id>https://mhynet.cn/mongodb-notes.html</id><published>2018-07-04T02:36:21.000Z</published><updated>2020-01-13T04:05:08.198Z</updated><content type="html"><![CDATA[<h3 id="å¯åŠ¨æœåŠ¡"><a href="#å¯åŠ¨æœåŠ¡" class="headerlink" title="å¯åŠ¨æœåŠ¡"></a>å¯åŠ¨æœåŠ¡</h3><p>åœ¨macä¸‹å¯åŠ¨mongodæœåŠ¡æ—¶ï¼Œå¦‚æœè¯»å–é»˜è®¤é…ç½®æ–‡ä»¶çš„è¯ç›´æ¥æ‰§è¡Œ<code>mongod</code>å°±è¡Œäº†ï¼Œå¦‚æœè¦æ·»åŠ å…¶ä»–é…ç½®å¯ä»¥æ·»åŠ å¯¹åº”çš„é…ç½®é¡¹ï¼Œä½†æ˜¯æœ€åˆç†çš„åº”è¯¥æ˜¯è¯»å–é…ç½®æ–‡ä»¶ä¸”åå°è¿è¡ŒæœåŠ¡ã€‚<br>ä½¿ç”¨ -f æˆ– â€“config é€‰é¡¹æŒ‡å®šé…ç½®æ–‡ä»¶<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mongod -f  /etc/mongod.conf &amp;</span><br><span class="line"><span class="comment"># æˆ–</span></span><br><span class="line">mongod --config  /etc/mongod.conf &amp;</span><br></pre></td></tr></table></figure></p><h3 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h3><p>å¦‚æœå­˜åœ¨åˆ™åˆ‡æ¢ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»º<br><figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> DATABASE_NAME</span><br></pre></td></tr></table></figure></p><a id="more"></a><h3 id="æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“"><a href="#æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“" class="headerlink" title="æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“"></a>æ˜¾ç¤ºæ‰€æœ‰æ•°æ®åº“</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> dbs</span><br></pre></td></tr></table></figure><p>å‘ç°åˆšåˆšåˆ›å»ºçš„æ•°æ®åº“æ²¡æœ‰æœ‰æ˜¾ç¤ºå‡ºæ¥ï¼Œå¯ä»¥æ’å…¥æ•°æ®<br><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.runoob.<span class="built_in">insert</span>(&#123;<span class="string">"name"</span>:<span class="string">"èœé¸Ÿæ•™ç¨‹"</span>&#125;)</span><br></pre></td></tr></table></figure></p><p>ç„¶åæ‰§è¡Œ<code>show dbs</code>å‘ç°åˆšåˆšåˆ›å»ºçš„æ•°æ®åº“æ˜¾ç¤ºå‡ºæ¥äº†</p><h3 id="åˆ é™¤æ•°æ®åº“"><a href="#åˆ é™¤æ•°æ®åº“" class="headerlink" title="åˆ é™¤æ•°æ®åº“"></a>åˆ é™¤æ•°æ®åº“</h3><p>ä»¥ä¸‹å‘½ä»¤åˆ é™¤çš„æ˜¯å½“å‰çš„æ•°æ®åº“ï¼Œå¦‚æœè¦åˆ é™¤éå½“å‰æ•°æ®åº“éœ€è¦å…ˆä½¿ç”¨<code>use DATABASE_NAME</code>å‘½ä»¤åˆ‡æ¢è¿‡å»ï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.dropDatabase</span>()</span><br></pre></td></tr></table></figure></p><h3 id="åˆ›å»ºé›†åˆ"><a href="#åˆ›å»ºé›†åˆ" class="headerlink" title="åˆ›å»ºé›†åˆ"></a>åˆ›å»ºé›†åˆ</h3><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.create<span class="constructor">Collection(<span class="params">name</span>, <span class="params">optipon</span>)</span></span><br></pre></td></tr></table></figure><ul><li>name: é›†åˆåç§°</li><li>optionsï¼š å¯é€‰å‚æ•°å¯¹è±¡ï¼Œæœ‰ä»¥ä¸‹é€‰é¡¹<ul><li>capped: å¸ƒå°” (å¯é€‰)ï¼Œ å¦‚æœä¸ºtrueåˆ™åˆ›å»ºå›ºå®šé›†åˆï¼Œæ˜¯æŒ‡æœ‰å›ºå®šå¤§å°çš„é›†åˆï¼Œå½“è¾¾åˆ°æœ€å¤§å€¼æ—¶ä¼šè‡ªåŠ¨è¦†ç›–æœ€æ—©çš„æ•°æ®ï¼Œ å½“è¯¥å€¼ä¸ºtrueæ—¶ï¼Œå¿…é¡»æŒ‡å®šsizeå‚æ•°</li><li>autoIndexId: å¸ƒå°” ï¼ˆå¯é€‰ï¼‰å¦‚æœä¸ºtrueï¼Œåˆ™è‡ªåŠ¨åœ¨_idå­—æ®µåˆ›å»ºç´¢å¼•ï¼Œé»˜è®¤ä¸ºfalse</li><li>size: æ•°å€¼ ï¼ˆå¯é€‰ï¼‰ å›ºå®šé›†åˆæŒ‡å®šä¸€ä¸ªæœ€å¤§å€¼ï¼Œ å•ä½æ˜¯å­—èŠ‚</li><li>max: æ•°å€¼ ï¼ˆå¯é€‰ï¼‰ å›ºå®šé›†åˆä¸­åŒ…å«çš„æ–‡æ¡£çš„æœ€å¤§æ•°é‡</li></ul></li></ul><h3 id="æŸ¥çœ‹é›†åˆ"><a href="#æŸ¥çœ‹é›†åˆ" class="headerlink" title="æŸ¥çœ‹é›†åˆ"></a>æŸ¥çœ‹é›†åˆ</h3><p>æŸ¥çœ‹å½“å‰æ•°æ®åº“çš„å·²æœ‰é›†åˆ<br><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> collections</span><br></pre></td></tr></table></figure></p><p>eg:<br><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">db.createCollection("my_test_coll1",</span><span class="string">&#123;</span><span class="attr">capped:</span><span class="literal">true</span><span class="string">,</span><span class="attr">autoIndexId:</span><span class="literal">true</span><span class="string">,</span><span class="attr">size:</span><span class="number">6142800</span><span class="string">,</span><span class="attr">max :</span><span class="number">10000</span><span class="string">&#125;)</span></span><br></pre></td></tr></table></figure></p><p>åœ¨mongodbä¸­ä¹Ÿå¯ä»¥é€šè¿‡ç›´æ¥æ’å…¥æ•°æ®åˆ›å»ºé›†åˆ<br><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.my_test_coll2.<span class="built_in">insert</span>(&#123;<span class="string">"name"</span>: <span class="string">"mhyuan"</span>, <span class="string">"age"</span>: <span class="number">22</span>&#125;)</span><br></pre></td></tr></table></figure></p><h3 id="åˆ é™¤é›†åˆ"><a href="#åˆ é™¤é›†åˆ" class="headerlink" title="åˆ é™¤é›†åˆ"></a>åˆ é™¤é›†åˆ</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.COLLECTION_NAME</span><span class="selector-class">.drop</span>()</span><br></pre></td></tr></table></figure><p>å¦‚æœåˆ é™¤æˆåŠŸè¿”å›trueï¼Œå¦åˆ™è¿”å›false</p><h3 id="æ’å…¥æ–‡æ¡£"><a href="#æ’å…¥æ–‡æ¡£" class="headerlink" title="æ’å…¥æ–‡æ¡£"></a>æ’å…¥æ–‡æ¡£</h3><p>BSONæ˜¯ä¸€ç§ç±»jsonçš„ä¸€ç§äºŒè¿›åˆ¶å½¢å¼çš„å­˜å‚¨æ ¼å¼,ç®€ç§°Binary JSONã€‚mongodbä¸­æ‰€æœ‰å­˜å‚¨åœ¨é›†åˆä¸­çš„æ•°æ®éƒ½æ˜¯BSONç»“æ„ã€‚<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.COLLECTION_NAME</span><span class="selector-class">.insert</span>(<span class="selector-tag">document</span>)</span><br></pre></td></tr></table></figure></p><p>eg:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.col</span><span class="selector-class">.insert</span>(&#123;<span class="attribute">title</span>: <span class="string">'MongoDB æ•™ç¨‹'</span>,</span><br><span class="line">    description: <span class="string">'MongoDB æ˜¯ä¸€ä¸ª Nosql æ•°æ®åº“'</span>,</span><br><span class="line">    by: <span class="string">'mhy'</span>,</span><br><span class="line">    url: <span class="string">'http://www.mhynet.cn'</span>,</span><br><span class="line">    tags: [<span class="string">'mongodb'</span>, <span class="string">'database'</span>, <span class="string">'NoSQL'</span>],</span><br><span class="line">    likes: <span class="number">100</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥å°†æ•°æ®å®šä¹‰æˆä¸€ä¸ªå˜é‡ï¼Œç„¶åæ’å…¥<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">document</span>=(&#123;title: <span class="string">'MongoDB æ•™ç¨‹'</span>,</span><br><span class="line">    description: <span class="string">'MongoDB æ˜¯ä¸€ä¸ª Nosql æ•°æ®åº“'</span>,</span><br><span class="line">    by: <span class="string">'mhy'</span>,</span><br><span class="line">    url: <span class="string">'http://www.mhynet.cn'</span>,</span><br><span class="line">    tags: [<span class="string">'mongodb'</span>, <span class="string">'database'</span>, <span class="string">'NoSQL'</span>],</span><br><span class="line">    likes: 100</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>ç„¶å<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.col2</span><span class="selector-class">.insert</span>(<span class="selector-tag">document</span>)</span><br></pre></td></tr></table></figure></p><p>ä¹Ÿå¯ä»¥æ‰§è¡Œ<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.col</span><span class="selector-class">.save</span>(<span class="selector-tag">document</span>)</span><br></pre></td></tr></table></figure></p><p>å¦‚æœä¸çŸ¥é“_idå­—æ®µåˆ™æ•ˆæœå’Œinsertä¸€æ ·ï¼Œå¦‚æœæŒ‡å®šäº†_idï¼Œåˆ™ä¼šæ›´æ–°è¯¥_idçš„æ•°æ®</p><ul><li><p>db.collection.insertOne(): å‘æŒ‡å®šé›†åˆä¸­æ’å…¥ä¸€æ¡æ–‡æ¡£æ•°æ®</p><figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.collection.insert<span class="constructor">One(&#123;<span class="string">"a"</span>: 3&#125;)</span></span><br></pre></td></tr></table></figure></li><li><p>db.collection.insertMany(): å‘æŒ‡å®šé›†åˆä¸­æ’å…¥å¤šæ¡æ–‡æ¡£æ•°æ®</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.collection</span><span class="selector-class">.insertMany</span>(<span class="selector-attr">[&#123;<span class="string">"b"</span>: 3&#125;, &#123;<span class="string">'c'</span>: 4&#125;]</span>)</span><br></pre></td></tr></table></figure></li></ul><h3 id="æ›´æ–°æ–‡æ¡£"><a href="#æ›´æ–°æ–‡æ¡£" class="headerlink" title="æ›´æ–°æ–‡æ¡£"></a>æ›´æ–°æ–‡æ¡£</h3><p>mongodbä½¿ç”¨updata()å’Œsave()æ–¹æ³•æ›´æ–°æ•°æ®<br>update()æ–¹æ³•ç”¨äºæ›´æ–°å·²å­˜åœ¨çš„æ–‡æ¡£<br><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">db.collection.update(</span><br><span class="line">2<span class="params">&lt;query&gt;</span>,</span><br><span class="line">2<span class="params">&lt;update&gt;</span>,</span><br><span class="line">2&#123;</span><br><span class="line"><span class="symbol">upsert:</span><span class="params">&lt;boolean&gt;</span>,</span><br><span class="line"><span class="symbol">multi:</span><span class="params">&lt;boolean&gt;</span>,</span><br><span class="line"><span class="symbol">writeConcern:</span><span class="params">&lt;document&gt;</span></span><br><span class="line">2&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p><ul><li>å‚æ•°è¯´æ˜ï¼š<ul><li>query: updateçš„æŸ¥è¯¢æ¡ä»¶ï¼Œç±»ä¼¼äºSQL update çš„whereåé¢çš„</li><li>update: updateçš„å¯¹è±¡å’Œä¸€äº›æ›´æ–°çš„æ“ä½œç¬¦ï¼ˆå¦‚$,$incâ€¦ï¼‰ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºSQL update æŸ¥è¯¢å†…setåé¢çš„</li><li>upsert: å¯é€‰ï¼Œ å¦‚æœä¸å­˜åœ¨updateçš„è®°å½•ï¼Œæ˜¯å¦æ’å…¥æ•°æ®ï¼Œ trueä¸ºæ’å…¥ï¼Œ é»˜è®¤ä¸ºfalse</li><li>multi: å¯é€‰ï¼Œ mongodbé»˜è®¤ä¸ºfalseï¼Œåªæ›´æ–°æ‰¾åˆ°çš„ç¬¬ä¸€æ¡è®°å½•ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°ä¸ºtrueï¼Œå°±æŠŠæŒ‰æ¡ä»¶æŸ¥å‡ºæ¥çš„å¤šæ¡è®°å½•å…¨éƒ¨æ›´æ–°</li><li>writeConcern: å¯é€‰ï¼ŒæŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«</li></ul></li></ul><ul><li><p>åªæ›´æ–°ç¬¬ä¸€æ¡è®°å½•ï¼š</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.col.update( &#123; <span class="string">"count"</span> : &#123; <span class="symbol">$</span><span class="keyword">gt</span> : <span class="number">1</span> &#125; &#125; , &#123; <span class="symbol">$</span><span class="keyword">set</span> : &#123; <span class="string">"test2"</span> : <span class="string">"OK"</span>&#125; &#125; );</span><br></pre></td></tr></table></figure></li><li><p>å…¨éƒ¨æ›´æ–°ï¼š</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.col.update( &#123; <span class="string">"count"</span> : &#123; <span class="symbol">$</span><span class="keyword">gt</span> : <span class="number">3</span> &#125; &#125; , &#123; <span class="symbol">$</span><span class="keyword">set</span> : &#123; <span class="string">"test2"</span> : <span class="string">"OK"</span>&#125; &#125;,false,true <span class="comment">)</span>;</span><br></pre></td></tr></table></figure></li><li><p>åªæ·»åŠ ç¬¬ä¸€æ¡ï¼š</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.col.update( &#123; <span class="string">"count"</span> : &#123; <span class="symbol">$</span><span class="keyword">gt</span> : <span class="number">4</span> &#125; &#125; , &#123; <span class="symbol">$</span><span class="keyword">set</span> : &#123; <span class="string">"test5"</span> : <span class="string">"OK"</span>&#125; &#125;,true,false <span class="comment">)</span>;</span><br></pre></td></tr></table></figure></li><li><p>å…¨éƒ¨æ·»åŠ è¿›å»:</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.col.update( &#123; <span class="string">"count"</span> : &#123; <span class="symbol">$</span><span class="keyword">gt</span> : <span class="number">5</span> &#125; &#125; , &#123; <span class="symbol">$</span><span class="keyword">set</span> : &#123; <span class="string">"test5"</span> : <span class="string">"OK"</span>&#125; &#125;,true,true <span class="comment">)</span>;</span><br></pre></td></tr></table></figure></li><li><p>å…¨éƒ¨æ›´æ–°ï¼š</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.col.<span class="keyword">update</span>( &#123; <span class="string">"count"</span> : &#123; <span class="variable">$gt</span> : <span class="number">15</span> &#125; &#125; , &#123; <span class="variable">$inc</span> : &#123; <span class="string">"count"</span> : <span class="number">1</span>&#125; &#125;<span class="built_in">,false</span><span class="built_in">,true</span> );</span><br></pre></td></tr></table></figure></li><li><p>åªæ›´æ–°ç¬¬ä¸€æ¡è®°å½•ï¼š</p><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.col.<span class="keyword">update</span>( &#123; <span class="string">"count"</span> : &#123; <span class="variable">$gt</span> : <span class="number">10</span> &#125; &#125; , &#123; <span class="variable">$inc</span> : &#123; <span class="string">"count"</span> : <span class="number">1</span>&#125; &#125;<span class="built_in">,false</span><span class="built_in">,false</span> );</span><br></pre></td></tr></table></figure></li></ul><h3 id="save-æ–¹æ³•"><a href="#save-æ–¹æ³•" class="headerlink" title="save()æ–¹æ³•"></a>save()æ–¹æ³•</h3><p>saveæ–¹æ³•é€šè¿‡ä¼ å…¥çš„æ–‡æ¡£æ¥æ›¿æ¢å·²æœ‰æ–‡æ¡£<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.collection</span><span class="selector-class">.save</span>(</span><br><span class="line">2&lt;<span class="selector-tag">document</span>&gt;,</span><br><span class="line">2&#123;</span><br><span class="line">22<span class="attribute">writeConcern</span>: &lt;document&gt;</span><br><span class="line">2&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p><ul><li>å‚æ•°è¯´æ˜ï¼š<ul><li>document: æ–‡æ¡£æ•°æ®</li><li>writeConcern: å¯é€‰ï¼Œ æŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«</li></ul></li></ul><h3 id="åˆ é™¤æ–‡æ¡£"><a href="#åˆ é™¤æ–‡æ¡£" class="headerlink" title="åˆ é™¤æ–‡æ¡£"></a>åˆ é™¤æ–‡æ¡£</h3><figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">db<span class="built_in">.collection</span><span class="built_in">.remove</span>(</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">query</span>&gt;</span>,</span></span><br><span class="line"><span class="xml"></span><span class="xml"><span class="tag">&lt;<span class="name">justOne</span>&gt;</span></span></span><br><span class="line"><span class="xml">)</span></span><br><span class="line"><span class="xml">å¦‚æœä½ çš„ Mong</span></span><br></pre></td></tr></table></figure><p>å¦‚æœä½ çš„ MongoDB æ˜¯ 2.6 ç‰ˆæœ¬ä»¥åçš„ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.collection</span><span class="selector-class">.remove</span>(</span><br><span class="line">   &lt;<span class="selector-tag">query</span>&gt;,</span><br><span class="line">   &#123;</span><br><span class="line"><span class="attribute">justOne</span>: &lt;boolean&gt;,</span><br><span class="line">     writeConcern: &lt;document&gt;</span><br><span class="line">   &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p><ul><li>å‚æ•°è¯´æ˜<ul><li>query : ï¼ˆå¯é€‰ï¼‰åˆ é™¤çš„æ–‡æ¡£çš„æ¡ä»¶ã€‚</li><li>justOne : ï¼ˆå¯é€‰ï¼‰å¦‚æœè®¾ä¸º true æˆ– 1ï¼Œåˆ™åªåˆ é™¤ä¸€ä¸ªæ–‡æ¡£ï¼Œå¦‚æœä¸è®¾ç½®è¯¥å‚æ•°ï¼Œæˆ–ä½¿ç”¨é»˜è®¤å€¼ falseï¼Œåˆ™åˆ é™¤æ‰€æœ‰åŒ¹é…æ¡ä»¶çš„æ–‡æ¡£ã€‚</li><li>writeConcern :ï¼ˆå¯é€‰ï¼‰æŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«ã€‚</li></ul></li></ul><blockquote><p>remove() æ–¹æ³•å·²ç»è¿‡æ—¶äº†ï¼Œç°åœ¨å®˜æ–¹æ¨èä½¿ç”¨ deleteOne() å’Œ deleteMany() æ–¹æ³•ã€‚</p></blockquote><blockquote><p>å¦‚åˆ é™¤é›†åˆä¸‹å…¨éƒ¨æ–‡æ¡£ï¼š<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.inventory</span><span class="selector-class">.deleteMany</span>(&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤ status ç­‰äº A çš„å…¨éƒ¨æ–‡æ¡£ï¼š</span></span><br><span class="line"><span class="selector-tag">db</span><span class="selector-class">.inventory</span><span class="selector-class">.deleteMany</span>(&#123; <span class="attribute">status </span>: <span class="string">"A"</span> &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤ status ç­‰äº D çš„ä¸€ä¸ªæ–‡æ¡£ï¼š</span></span><br><span class="line"><span class="selector-tag">db</span><span class="selector-class">.inventory</span><span class="selector-class">.deleteOne</span>( &#123; <span class="attribute">status</span>: <span class="string">"D"</span> &#125; )</span><br></pre></td></tr></table></figure></p></blockquote><p>remove() æ–¹æ³• å¹¶ä¸ä¼šçœŸæ­£é‡Šæ”¾ç©ºé—´ã€‚<br>éœ€è¦ç»§ç»­æ‰§è¡Œ db.repairDatabase() æ¥å›æ”¶ç£ç›˜ç©ºé—´</p><h3 id="æŸ¥è¯¢æ–‡æ¡£"><a href="#æŸ¥è¯¢æ–‡æ¡£" class="headerlink" title="æŸ¥è¯¢æ–‡æ¡£"></a>æŸ¥è¯¢æ–‡æ¡£</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.collection</span><span class="selector-class">.find</span>(<span class="selector-tag">query</span>, <span class="selector-tag">projection</span>)</span><br></pre></td></tr></table></figure><ul><li>å‚æ•°<ul><li>query ï¼šå¯é€‰ï¼Œä½¿ç”¨æŸ¥è¯¢æ“ä½œç¬¦æŒ‡å®šæŸ¥è¯¢æ¡ä»¶</li><li>projection ï¼šå¯é€‰ï¼Œä½¿ç”¨æŠ•å½±æ“ä½œç¬¦æŒ‡å®šè¿”å›çš„é”®ã€‚æŸ¥è¯¢æ—¶è¿”å›æ–‡æ¡£ä¸­æ‰€æœ‰é”®å€¼ï¼Œ åªéœ€çœç•¥è¯¥å‚æ•°å³å¯ï¼ˆé»˜è®¤çœç•¥ï¼‰ã€‚</li></ul></li></ul><p>å¦‚æœä½ éœ€è¦ä»¥æ˜“è¯»çš„æ–¹å¼æ¥è¯»å–æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨ pretty() æ–¹æ³•ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.col</span><span class="selector-class">.find</span>()<span class="selector-class">.pretty</span>()</span><br></pre></td></tr></table></figure></p><p>pretty() æ–¹æ³•ä»¥æ ¼å¼åŒ–çš„æ–¹å¼æ¥æ˜¾ç¤ºæ‰€æœ‰æ–‡æ¡£ã€‚</p><p>é™¤äº† find() æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ª findOne() æ–¹æ³•ï¼Œå®ƒåªè¿”å›ä¸€ä¸ªæ–‡æ¡£ã€‚</p><table><thead><tr><th>æ“ä½œ</th><th>æ ¼å¼</th><th>èŒƒä¾‹</th><th>RDBMSä¸­çš„ç±»ä¼¼è¯­å¥</th></tr></thead><tbody><tr><td>ç­‰äº</td><td>{\<key>:\<value>}</value></key></td><td>db.col.find({â€œbyâ€:â€èœé¸Ÿæ•™ç¨‹â€}).pretty()</td><td>where by = â€˜èœé¸Ÿæ•™ç¨‹â€™</td></tr><tr><td>å°äº</td><td>{\<key>:{$lt:\<value>}}</value></key></td><td>db.col.find({â€œlikesâ€:{$lt:50}}).pretty()</td><td>where likes &lt; 50</td></tr><tr><td>å°äºæˆ–ç­‰äº</td><td>{\<key>:{$lte:\<value>}}</value></key></td><td>db.col.find({â€œlikesâ€:{$lte:50}}).pretty()</td><td>where likes &lt;= 50</td></tr><tr><td>å¤§äº</td><td>{\<key>:{$gt:\<value>}}</value></key></td><td>db.col.find({â€œlikesâ€:{$gt:50}}).pretty()</td><td>where likes &gt; 50</td></tr><tr><td>å¤§äºæˆ–ç­‰äº</td><td>{\<key>:{$gte:\<value>}}</value></key></td><td>db.col.find({â€œlikesâ€:{$gte:50}}).pretty()</td><td>where likes &gt;= 50</td></tr><tr><td>ä¸ç­‰äº</td><td>{\<key>:{$ne:\<value>}}</value></key></td><td>db.col.find({â€œlikesâ€:{$ne:50}}).pretty()</td><td>where likes != 50</td></tr></tbody></table><ul><li>MongoDB AND æ¡ä»¶</li></ul><p>MongoDB çš„ find() æ–¹æ³•å¯ä»¥ä¼ å…¥å¤šä¸ªé”®(key)ï¼Œæ¯ä¸ªé”®(key)ä»¥é€—å·éš”å¼€ï¼Œå³å¸¸è§„ SQL çš„ AND æ¡ä»¶ã€‚</p><p>è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š<br><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.col</span><span class="selector-class">.find</span>(&#123;<span class="attribute">key1</span>:value1, <span class="attribute">key2</span>:value2&#125;)<span class="selector-class">.pretty</span>()</span><br></pre></td></tr></table></figure></p><p>eg:<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">db.col.<span class="builtin-name">find</span>(&#123;<span class="string">"by"</span>:<span class="string">"èœé¸Ÿæ•™ç¨‹"</span>, <span class="string">"title"</span>:<span class="string">"MongoDB æ•™ç¨‹"</span>&#125;).pretty()</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"_id"</span> : ObjectId(<span class="string">"56063f17ade2f21f36b03133"</span>),</span><br><span class="line"><span class="string">"title"</span> : <span class="string">"MongoDB æ•™ç¨‹"</span>,</span><br><span class="line"><span class="string">"description"</span> : <span class="string">"MongoDB æ˜¯ä¸€ä¸ª Nosql æ•°æ®åº“"</span>,</span><br><span class="line"><span class="string">"by"</span> : <span class="string">"èœé¸Ÿæ•™ç¨‹"</span>,</span><br><span class="line"><span class="string">"url"</span> : <span class="string">"http://www.runoob.com"</span>,</span><br><span class="line"><span class="string">"tags"</span> : [</span><br><span class="line"><span class="string">"mongodb"</span>,</span><br><span class="line"><span class="string">"database"</span>,</span><br><span class="line"><span class="string">"NoSQL"</span></span><br><span class="line">        ],</span><br><span class="line"><span class="string">"likes"</span> : 100</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ä»¥ä¸Šå®ä¾‹ä¸­ç±»ä¼¼äº WHERE è¯­å¥ï¼šWHERE by=â€™èœé¸Ÿæ•™ç¨‹â€™ AND title=â€™MongoDB æ•™ç¨‹â€™</p><ul><li><p>MongoDB OR æ¡ä»¶<br>MongoDB OR æ¡ä»¶è¯­å¥ä½¿ç”¨äº†å…³é”®å­— $or,è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.col</span><span class="selector-class">.find</span>(</span><br><span class="line">   &#123;</span><br><span class="line">      $<span class="attribute">or</span>: [</span><br><span class="line">         &#123;<span class="attribute">key1</span>: value1&#125;, &#123;<span class="attribute">key2</span>:value2&#125;</span><br><span class="line">      ]</span><br><span class="line">   &#125;</span><br><span class="line">)<span class="selector-class">.pretty</span>()</span><br></pre></td></tr></table></figure></li><li><p>AND å’Œ OR è”åˆä½¿ç”¨<br>ç±»ä¼¼å¸¸è§„ SQL è¯­å¥ä¸ºï¼š<code>&#39;where likes&gt;50 AND (by = &#39;èœé¸Ÿæ•™ç¨‹&#39; OR title = &#39;MongoDB æ•™ç¨‹&#39;)&#39;</code></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">db.col.<span class="builtin-name">find</span>(&#123;<span class="string">"likes"</span>: &#123;<span class="variable">$gt</span>:50&#125;, <span class="variable">$or</span>: [&#123;<span class="string">"by"</span>: <span class="string">"èœé¸Ÿæ•™ç¨‹"</span>&#125;,&#123;<span class="string">"title"</span>: <span class="string">"MongoDB æ•™ç¨‹"</span>&#125;]&#125;).pretty()</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">"_id"</span> : ObjectId(<span class="string">"56063f17ade2f21f36b03133"</span>),</span><br><span class="line"><span class="string">"title"</span> : <span class="string">"MongoDB æ•™ç¨‹"</span>,</span><br><span class="line"><span class="string">"description"</span> : <span class="string">"MongoDB æ˜¯ä¸€ä¸ª Nosql æ•°æ®åº“"</span>,</span><br><span class="line"><span class="string">"by"</span> : <span class="string">"èœé¸Ÿæ•™ç¨‹"</span>,</span><br><span class="line"><span class="string">"url"</span> : <span class="string">"http://www.runoob.com"</span>,</span><br><span class="line"><span class="string">"tags"</span> : [</span><br><span class="line"><span class="string">"mongodb"</span>,</span><br><span class="line"><span class="string">"database"</span>,</span><br><span class="line"><span class="string">"NoSQL"</span></span><br><span class="line">        ],</span><br><span class="line"><span class="string">"likes"</span> : 100</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul>]]></content><summary type="html">
    
      mongodbæ•°æ®åº“å¸¸ç”¨å‘½ä»¤
    
    </summary><category term="æ•°æ®åº“" scheme="https://mhynet.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/><category term="mongodb" scheme="https://mhynet.cn/tags/mongodb/"/><category term="æ•°æ®åº“" scheme="https://mhynet.cn/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/></entry><entry><title>vuexå­¦ä¹ ç¬”è®°</title><link href="https://mhynet.cn/vuex-notes.html"/><id>https://mhynet.cn/vuex-notes.html</id><published>2018-05-09T11:37:39.000Z</published><updated>2020-01-09T07:07:51.481Z</updated><content type="html"><![CDATA[<blockquote><p>vuexæ˜¯ä¸ºVueåº”ç”¨å¼€å‘çš„<strong>çŠ¶æ€ç®¡ç†æ¨¡å¼</strong>ã€‚<br>å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚Vuex ä¹Ÿé›†æˆåˆ° Vue çš„å®˜æ–¹è°ƒè¯•å·¥å…· devtools extensionï¼Œæä¾›äº†è¯¸å¦‚é›¶é…ç½®çš„ time-travel è°ƒè¯•ã€çŠ¶æ€å¿«ç…§å¯¼å…¥å¯¼å‡ºç­‰é«˜çº§è°ƒè¯•åŠŸèƒ½ã€‚</p></blockquote><p>è¿™ä¸ªçŠ¶æ€è‡ªç®¡ç†åº”ç”¨åŒ…å«ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>stateï¼Œé©±åŠ¨åº”ç”¨çš„æ•°æ®æºï¼›</li><li>viewï¼Œä»¥å£°æ˜æ–¹å¼å°† state æ˜ å°„åˆ°è§†å›¾ï¼›</li><li>actionsï¼Œå“åº”åœ¨ view ä¸Šçš„ç”¨æˆ·è¾“å…¥å¯¼è‡´çš„çŠ¶æ€å˜åŒ–ã€‚<a id="more"></a><strong>å•å‘æ•°æ®æµ</strong><img src="https://vuex.vuejs.org/zh-cn/images/flow.png" style="width: 400px; display: block;"></li></ul><p><strong>å¤šä¸ªç»„ä»¶å…±äº«çŠ¶æ€</strong><br><img src="https://vuex.vuejs.org/zh-cn/images/vuex.png" style="width: 400px; display: block;"></p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>ä½¿ç”¨npmå®‰è£…ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vuex --save</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨yarnå®‰è£…<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add vuex</span><br></pre></td></tr></table></figure></p><p>åœ¨é¡¹ç›®ä¸­ä½¿ç”¨<code>Vue.use()</code>æ¥å®‰è£…å¼•å…¥ Vuex<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span><span class="string">'vue'</span>;</span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span><span class="string">'vuex'</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br></pre></td></tr></table></figure></p><h3 id="State"><a href="#State" class="headerlink" title="State"></a>State</h3><h4 id="åœ¨-Vue-ç»„ä»¶ä¸­è·å¾—-Vuex-çŠ¶æ€"><a href="#åœ¨-Vue-ç»„ä»¶ä¸­è·å¾—-Vuex-çŠ¶æ€" class="headerlink" title="åœ¨ Vue ç»„ä»¶ä¸­è·å¾— Vuex çŠ¶æ€"></a>åœ¨ Vue ç»„ä»¶ä¸­è·å¾— Vuex çŠ¶æ€</h4><p>ä» store å®ä¾‹ä¸­è¯»å–çŠ¶æ€æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯åœ¨è®¡ç®—å±æ€§ä¸­è¿”å›æŸä¸ªçŠ¶æ€ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ª Counter ç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> Counter = &#123;</span><br><span class="line">  template: <span class="string">`&lt;div&gt;&#123;&#123; count &#125;&#125;&lt;/div&gt;`</span>,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    count () &#123;</span><br><span class="line"><span class="keyword">return</span> store.state.count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Vuex é€šè¿‡ store é€‰é¡¹ï¼Œæä¾›äº†ä¸€ç§æœºåˆ¶å°†çŠ¶æ€ä»æ ¹ç»„ä»¶â€œæ³¨å…¥â€åˆ°æ¯ä¸€ä¸ªå­ç»„ä»¶ä¸­ï¼ˆéœ€è°ƒç”¨ Vue.use(Vuex)ï¼‰ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line"><span class="comment">// æŠŠ store å¯¹è±¡æä¾›ç»™ â€œstoreâ€ é€‰é¡¹ï¼Œè¿™å¯ä»¥æŠŠ store çš„å®ä¾‹æ³¨å…¥æ‰€æœ‰çš„å­ç»„ä»¶</span></span><br><span class="line">  store,</span><br><span class="line">  components: &#123; Counter &#125;,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div class="app"&gt;</span></span><br><span class="line"><span class="string">      &lt;counter&gt;&lt;/counter&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>é€šè¿‡åœ¨æ ¹å®ä¾‹ä¸­æ³¨å†Œ store é€‰é¡¹ï¼Œè¯¥ store å®ä¾‹ä¼šæ³¨å…¥åˆ°æ ¹ç»„ä»¶ä¸‹çš„æ‰€æœ‰å­ç»„ä»¶ä¸­ï¼Œä¸”å­ç»„ä»¶èƒ½é€šè¿‡ this.$store è®¿é—®åˆ°ã€‚è®©æˆ‘ä»¬æ›´æ–°ä¸‹ Counter çš„å®ç°ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Counter = &#123;</span><br><span class="line">  template: <span class="string">`&lt;div&gt;&#123;&#123; count &#125;&#125;&lt;/div&gt;`</span>,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    count () &#123;</span><br><span class="line"><span class="keyword">return</span><span class="keyword">this</span>.$store.state.count</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="mapState-è¾…åŠ©å‡½æ•°"><a href="#mapState-è¾…åŠ©å‡½æ•°" class="headerlink" title="mapState è¾…åŠ©å‡½æ•°"></a>mapState è¾…åŠ©å‡½æ•°</h4><p>å½“ä¸€ä¸ªç»„ä»¶éœ€è¦è·å–å¤šä¸ªçŠ¶æ€æ—¶å€™ï¼Œå°†è¿™äº›çŠ¶æ€éƒ½å£°æ˜ä¸ºè®¡ç®—å±æ€§ä¼šæœ‰äº›é‡å¤å’Œå†—ä½™ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ mapState è¾…åŠ©å‡½æ•°å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆè®¡ç®—å±æ€§ï¼Œè®©ä½ å°‘æŒ‰å‡ æ¬¡é”®ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨å•ç‹¬æ„å»ºçš„ç‰ˆæœ¬ä¸­è¾…åŠ©å‡½æ•°ä¸º Vuex.mapState</span></span><br><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span><span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span><span class="keyword">default</span> &#123;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">  computed: mapState(&#123;</span><br><span class="line"><span class="comment">// ç®­å¤´å‡½æ•°å¯ä½¿ä»£ç æ›´ç®€ç»ƒ</span></span><br><span class="line">    count: <span class="function"><span class="params">state</span> =&gt;</span> state.count,</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼ å­—ç¬¦ä¸²å‚æ•° 'count' ç­‰åŒäº `state =&gt; state.count`</span></span><br><span class="line">    countAlias: <span class="string">'count'</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸ºäº†èƒ½å¤Ÿä½¿ç”¨ `this` è·å–å±€éƒ¨çŠ¶æ€ï¼Œå¿…é¡»ä½¿ç”¨å¸¸è§„å‡½æ•°</span></span><br><span class="line">    countPlusLocalState (state) &#123;</span><br><span class="line"><span class="keyword">return</span> state.count + <span class="keyword">this</span>.localCount</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å½“æ˜ å°„çš„è®¡ç®—å±æ€§çš„åç§°ä¸ state çš„å­èŠ‚ç‚¹åç§°ç›¸åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç»™ mapState ä¼ ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">computed: mapState([</span><br><span class="line"><span class="comment">// æ˜ å°„ this.count ä¸º store.state.count</span></span><br><span class="line"><span class="string">'count'</span></span><br><span class="line">])</span><br></pre></td></tr></table></figure></p><h4 id="å¯¹è±¡å±•å¼€è¿ç®—ç¬¦"><a href="#å¯¹è±¡å±•å¼€è¿ç®—ç¬¦" class="headerlink" title="å¯¹è±¡å±•å¼€è¿ç®—ç¬¦"></a>å¯¹è±¡å±•å¼€è¿ç®—ç¬¦</h4><p>mapState å‡½æ•°è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚æˆ‘ä»¬å¦‚ä½•å°†å®ƒä¸å±€éƒ¨è®¡ç®—å±æ€§æ··åˆä½¿ç”¨å‘¢ï¼Ÿé€šå¸¸ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€ä¸ªå·¥å…·å‡½æ•°å°†å¤šä¸ªå¯¹è±¡åˆå¹¶ä¸ºä¸€ä¸ªï¼Œä»¥ä½¿æˆ‘ä»¬å¯ä»¥å°†æœ€ç»ˆå¯¹è±¡ä¼ ç»™ computed å±æ€§ã€‚ä½†æ˜¯è‡ªä»æœ‰äº†å¯¹è±¡å±•å¼€è¿ç®—ç¬¦ï¼ˆç°å¤„äº ECMASCript ææ¡ˆ stage-3 é˜¶æ®µï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥æå¤§åœ°ç®€åŒ–å†™æ³•ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  localComputed () &#123; <span class="comment">/* ... */</span> &#125;,</span><br><span class="line"><span class="comment">// ä½¿ç”¨å¯¹è±¡å±•å¼€è¿ç®—ç¬¦å°†æ­¤å¯¹è±¡æ··å…¥åˆ°å¤–éƒ¨å¯¹è±¡ä¸­</span></span><br><span class="line">  ...mapState(&#123;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="getter"><a href="#getter" class="headerlink" title="getter"></a>getter</h3><p>Vuex å…è®¸æˆ‘ä»¬åœ¨ store ä¸­å®šä¹‰â€œgetterâ€ï¼ˆå¯ä»¥è®¤ä¸ºæ˜¯ store çš„è®¡ç®—å±æ€§ï¼‰ã€‚å°±åƒè®¡ç®—å±æ€§ä¸€æ ·ï¼Œgetter çš„è¿”å›å€¼ä¼šæ ¹æ®å®ƒçš„ä¾èµ–è¢«ç¼“å­˜èµ·æ¥ï¼Œä¸”åªæœ‰å½“å®ƒçš„ä¾èµ–å€¼å‘ç”Ÿäº†æ”¹å˜æ‰ä¼šè¢«é‡æ–°è®¡ç®—ã€‚</p><p>Getter æ¥å— state ä½œä¸ºå…¶ç¬¬ä¸€ä¸ªå‚æ•°ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state: &#123;</span><br><span class="line">        todos: [</span><br><span class="line">            &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">text</span>: <span class="string">'...'</span>, <span class="attr">done</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">test</span>: <span class="string">'...'</span>, <span class="attr">done</span>: <span class="literal">false</span> &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    getters: &#123;</span><br><span class="line">        doneTodos: <span class="function"><span class="params">state</span> =&gt;</span> &#123;</span><br><span class="line"><span class="keyword">return</span> state.todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.done)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>Getter ä¼šæš´éœ²ä¸º store.getters å¯¹è±¡ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">store.getters.doneTodos <span class="comment">// -&gt; [&#123; id: 1, text: '...', done: true &#125;]</span></span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°åœ¨ä»»ä½•ç»„ä»¶ä¸­ä½¿ç”¨å®ƒï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  doneTodosCount () &#123;</span><br><span class="line"><span class="keyword">return</span><span class="keyword">this</span>.$store.getters.doneTodosCount</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="mapGetters-è¾…åŠ©å‡½æ•°"><a href="#mapGetters-è¾…åŠ©å‡½æ•°" class="headerlink" title="mapGetters è¾…åŠ©å‡½æ•°"></a>mapGetters è¾…åŠ©å‡½æ•°</h4><p>mapGetters è¾…åŠ©å‡½æ•°ä»…ä»…æ˜¯å°† store ä¸­çš„ getter æ˜ å°„åˆ°å±€éƒ¨è®¡ç®—å±æ€§ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span><span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span><span class="keyword">default</span> &#123;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">    computed: &#123;</span><br><span class="line"><span class="comment">//ä½¿ç”¨å¯¹è±¡å±•å¼€ç¬¦ å°† getter æ··å…¥ computed å¯¹è±¡ä¸­</span></span><br><span class="line">        ...mapGetters([</span><br><span class="line"><span class="string">'doneTodosCount'</span>,</span><br><span class="line"><span class="string">'anothersGetters'</span>,</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">        ])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å¦‚æœä½ æƒ³å°†ä¸€ä¸ª getter å±æ€§å¦å–ä¸€ä¸ªåå­—ï¼Œä½¿ç”¨å¯¹è±¡å½¢å¼ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mapGetters([</span><br><span class="line"><span class="comment">// æ˜ å°„ `this.doneCount` ä¸º `store.getters.doneTodosCount`</span></span><br><span class="line">    doneCount: <span class="string">'doneTodosCount'</span></span><br><span class="line">])</span><br></pre></td></tr></table></figure></p><h3 id="Mutation"><a href="#Mutation" class="headerlink" title="Mutation"></a>Mutation</h3><p>æ›´æ”¹ Vuex çš„ store ä¸­çš„çŠ¶æ€çš„å”¯ä¸€æ–¹æ³•æ˜¯æäº¤ mutationã€‚Vuex ä¸­çš„ mutation éå¸¸ç±»ä¼¼äºäº‹ä»¶ï¼šæ¯ä¸ª mutation éƒ½æœ‰ä¸€ä¸ªå­—ç¬¦ä¸²çš„ <strong>äº‹ä»¶ç±»å‹ (type)</strong> å’Œ ä¸€ä¸ª <strong>å›è°ƒå‡½æ•° (handler)</strong>ã€‚è¿™ä¸ªå›è°ƒå‡½æ•°å°±æ˜¯æˆ‘ä»¬å®é™…è¿›è¡ŒçŠ¶æ€æ›´æ”¹çš„åœ°æ–¹ï¼Œå¹¶ä¸”å®ƒä¼šæ¥å— state ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span><span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state: &#123;</span><br><span class="line">        count: <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    mutation: &#123;</span><br><span class="line">        increment(state) &#123;</span><br><span class="line">            count ++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>å½“è§¦å‘ä¸€ä¸ªç±»å‹ä¸º increment çš„ mutation æ—¶ï¼Œè°ƒç”¨æ­¤å‡½æ•°ã€‚â€è¦å”¤é†’ä¸€ä¸ª mutation handlerï¼Œä½ éœ€è¦ä»¥ç›¸åº”çš„ type è°ƒç”¨ store.commit æ–¹æ³•ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">store.commit(<span class="string">'increment'</span>)</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥ä¼ å…¥é¢å¤–çš„å‚æ•°ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ...</span></span><br><span class="line">mutations: &#123;</span><br><span class="line">  increment (state, n) &#123;</span><br><span class="line">    state.count += n</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">store.commit(<span class="string">'increment'</span>, <span class="number">10</span>)</span><br></pre></td></tr></table></figure></p><p>å¤šæ•°æƒ…å†µä¸‹ä¸ºä¸€ä¸ªå¯¹è±¡ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mutations: &#123;</span><br><span class="line">  increment (state, payload) &#123;</span><br><span class="line">    state.count += payload.amount</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">store.commit(<span class="string">'increment'</span>, &#123;</span><br><span class="line">  amount: <span class="number">10</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h4 id="å¯¹è±¡é£æ ¼çš„æäº¤æ–¹å¼"><a href="#å¯¹è±¡é£æ ¼çš„æäº¤æ–¹å¼" class="headerlink" title="å¯¹è±¡é£æ ¼çš„æäº¤æ–¹å¼"></a>å¯¹è±¡é£æ ¼çš„æäº¤æ–¹å¼</h4><p>æäº¤ mutation çš„å¦ä¸€ç§æ–¹å¼æ˜¯ç›´æ¥ä½¿ç”¨åŒ…å« type å±æ€§çš„å¯¹è±¡ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">muations: &#123;</span><br><span class="line">    increment (state, payload) &#123;</span><br><span class="line">        state.count += payload.amount</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">store.commit(&#123;</span><br><span class="line">    type: <span class="string">'increment'</span>,</span><br><span class="line">    amount: <span class="number">10</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h4 id="Mutation-éœ€éµå®ˆ-Vue-çš„å“åº”è§„åˆ™"><a href="#Mutation-éœ€éµå®ˆ-Vue-çš„å“åº”è§„åˆ™" class="headerlink" title="Mutation éœ€éµå®ˆ Vue çš„å“åº”è§„åˆ™"></a>Mutation éœ€éµå®ˆ Vue çš„å“åº”è§„åˆ™</h4><p>Vuex çš„ store ä¸­çš„çŠ¶æ€æ˜¯å“åº”å¼çš„ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬å˜æ›´çŠ¶æ€æ—¶ï¼Œç›‘è§†çŠ¶æ€çš„Vueç»„ä»¶ä¹Ÿä¼šè‡ªåŠ¨æ›´æ–°ã€‚ æ„å‘³ç€ Vuex ä¸­çš„ mutation ä¹Ÿéœ€è¦ä¸ä½¿ç”¨ Vue ä¸€æ ·éµå®ˆä¸€äº›æ³¨æ„äº‹é¡¹ï¼š</p><ul><li>æœ€å¥½æå‰åœ¨ store ä¸­ åˆå§‹åŒ–æ‰€æœ‰éœ€è¦çš„å±æ€§</li><li>å½“éœ€è¦åœ¨å¯¹è±¡ä¸Šæ·»åŠ æ–°å±æ€§æ—¶ï¼š<ul><li>ä½¿ç”¨ Vue.set(obj, â€˜newPropâ€™, 123) æˆ–è€…</li><li>ä»¥æ–°å¯¹è±¡æ›¿æ¢æ—§å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ stage-3 çš„ å¯¹è±¡å±•å¼€è¿ç®—ç¬¦ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">state.obj = &#123; ...state.obj, <span class="attr">newProp</span>: <span class="number">123</span> &#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><h4 id="ä½¿ç”¨å¸¸é‡æ›¿ä»£-Mutation-äº‹ä»¶ç±»å‹"><a href="#ä½¿ç”¨å¸¸é‡æ›¿ä»£-Mutation-äº‹ä»¶ç±»å‹" class="headerlink" title="ä½¿ç”¨å¸¸é‡æ›¿ä»£ Mutation äº‹ä»¶ç±»å‹"></a>ä½¿ç”¨å¸¸é‡æ›¿ä»£ Mutation äº‹ä»¶ç±»å‹</h4><p>ä½¿ç”¨å¸¸é‡æ›¿ä»£ mutation äº‹ä»¶ç±»å‹åœ¨å„ç§ Flux å®ç°ä¸­æ˜¯å¾ˆå¸¸è§çš„æ¨¡å¼ã€‚è¿™æ ·å¯ä»¥ä½¿ linter ä¹‹ç±»çš„å·¥å…·å‘æŒ¥ä½œç”¨ï¼ŒåŒæ—¶æŠŠè¿™äº›å¸¸é‡æ”¾åœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­å¯ä»¥è®©ä½ çš„ä»£ç åˆä½œè€…å¯¹æ•´ä¸ª app åŒ…å«çš„ mutation ä¸€ç›®äº†ç„¶ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mutation-types.js</span></span><br><span class="line"><span class="keyword">export</span><span class="keyword">const</span> SOME_MUTATION = <span class="string">'SOME_MUTATION'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// store.js</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span><span class="string">'vuex'</span></span><br><span class="line"><span class="keyword">import</span> &#123; SOME_MUTATION &#125; <span class="keyword">from</span><span class="string">'mutation-types'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.store(&#123;</span><br><span class="line">  state: &#123;...&#125;,</span><br><span class="line">  mutation: &#123;</span><br><span class="line"><span class="comment">// æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ ES2015 é£æ ¼çš„è®¡ç®—å±æ€§å‘½ååŠŸèƒ½æ¥ä½¿ç”¨ä¸€ä¸ªå¸¸é‡ä½œä¸ºå‡½æ•°å</span></span><br><span class="line">    [SOME_MUTATION] (state) &#123;</span><br><span class="line"><span class="comment">// mutate state</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>ä½¿ç”¨å¸¸é‡å¯¹äºå¤šäººåä½œçš„å¤§å‹é¡¹ç›®å¾ˆæœ‰å¸®åŠ©ï¼Œ ä½†ä¸æ˜¯å¿…éœ€çš„ã€‚</p><h4 id="Mutation-å¿…é¡»æ˜¯åŒæ­¥å‡½æ•°"><a href="#Mutation-å¿…é¡»æ˜¯åŒæ­¥å‡½æ•°" class="headerlink" title="Mutation å¿…é¡»æ˜¯åŒæ­¥å‡½æ•°"></a>Mutation å¿…é¡»æ˜¯åŒæ­¥å‡½æ•°</h4><p><strong>mutationå¿…é¡»æ˜¯åŒæ­¥å‡½æ•°</strong></p><h4 id="åœ¨ç»„ä»¶ä¸­æäº¤-mutation"><a href="#åœ¨ç»„ä»¶ä¸­æäº¤-mutation" class="headerlink" title="åœ¨ç»„ä»¶ä¸­æäº¤ mutation"></a>åœ¨ç»„ä»¶ä¸­æäº¤ mutation</h4><p>åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ <code>this.$store.commit(&#39;xxx&#39;)</code> æäº¤ mutation ï¼Œæˆ–è€…ä½¿ç”¨ <code>mapMutation</code> è¾…åŠ©å‡½æ•°å°†ç»„ä»¶ä¸­çš„ methods æ˜ å°„ä¸º <code>store.commit</code> è°ƒç”¨ï¼ˆéœ€è¦åœ¨æ ¹èŠ‚ç‚¹æ³¨å…¥ <code>store</code>ï¼‰ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapMutations &#125; <span class="keyword">from</span><span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span><span class="keyword">default</span> &#123;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    ...mapMutations ([</span><br><span class="line"><span class="string">'increment'</span>, <span class="comment">// å°†`this.increment()` æ˜ å°„ä¸º`this.$store.commit('increment')`</span></span><br><span class="line"></span><br><span class="line"><span class="string">'incrementBy'</span><span class="comment">// å°† `this.incrementBy(amount)` æ˜ å°„ä¸º `this.$store.commit('incrementBy', amount)`</span></span><br><span class="line">    ]),</span><br><span class="line">    ...mapMutations([</span><br><span class="line">      add: <span class="string">'increment'</span><span class="comment">// å°† `this.add()` æ˜ å°„ä¸º `this.$store.commit('increment')`</span></span><br><span class="line">    ])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>mutationéƒ½æ˜¯åŒæ­¥äº‹ç‰©ï¼Œå¤„ç†å¼‚æ­¥äº‹ç‰©éœ€è¦ä½¿ç”¨action.</p><h3 id="action"><a href="#action" class="headerlink" title="action"></a>action</h3><p>Action ç±»ä¼¼äº mutationï¼Œä¸åŒåœ¨äºï¼š</p><ul><li>Action æäº¤çš„æ˜¯ mutationï¼Œè€Œä¸æ˜¯ç›´æ¥å˜æ›´çŠ¶æ€ã€‚</li><li>Action å¯ä»¥åŒ…å«ä»»æ„å¼‚æ­¥æ“ä½œã€‚</li></ul><p>è®©æˆ‘ä»¬æ¥æ³¨å†Œä¸€ä¸ªç®€å•çš„ actionï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state: &#123;</span><br><span class="line">        count: <span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    motations: &#123;</span><br><span class="line">        increment(state) &#123;</span><br><span class="line">            state.count++</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    actions: &#123;</span><br><span class="line">        increment (context) &#123;</span><br><span class="line">            context.commit(<span class="string">'increment'</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h4 id="åˆ†å‘-Action"><a href="#åˆ†å‘-Action" class="headerlink" title="åˆ†å‘ Action"></a>åˆ†å‘ Action</h4><p>Action é€šè¿‡ store.dispatch æ–¹æ³•è§¦å‘ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">store.dispatch(<span class="string">'increment'</span>)</span><br></pre></td></tr></table></figure></p><p>å¯ä»¥åœ¨ action å†…éƒ¨è¿›è¡Œå¼‚æ­¥æ“ä½œï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">action: &#123;</span><br><span class="line">  incrementAsync(&#123;commit&#125;)&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      commit(<span class="string">'increment'</span>)</span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>Actions æ”¯æŒåŒæ ·çš„è½½è·æ–¹å¼å’Œå¯¹è±¡æ–¹å¼è¿›è¡Œåˆ†å‘ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">store.dispatch(<span class="string">'incrementAsync'</span>, &#123;</span><br><span class="line">  amount: <span class="number">10</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">store.dispatch(&#123;</span><br><span class="line">  type: <span class="string">'incrementAsync'</span>,</span><br><span class="line">  amount: <span class="number">10</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>æ¥çœ‹ä¸€ä¸ªå®˜æ–¹æ–‡æ¡£ä¸Šæ›´åŠ å®é™…çš„è´­ç‰©è½¦ç¤ºä¾‹ï¼Œæ¶‰åŠåˆ°è°ƒç”¨å¼‚æ­¥ API å’Œåˆ†å‘å¤šé‡ mutationï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">actions: &#123;</span><br><span class="line">  checkout (&#123; commit, state &#125;, products) &#123;</span><br><span class="line"><span class="comment">// æŠŠå½“å‰è´­ç‰©è½¦çš„ç‰©å“å¤‡ä»½èµ·æ¥</span></span><br><span class="line"><span class="keyword">const</span> savedCartItems = [...state.cart.added]</span><br><span class="line"><span class="comment">// å‘å‡ºç»“è´¦è¯·æ±‚ï¼Œç„¶åä¹è§‚åœ°æ¸…ç©ºè´­ç‰©è½¦</span></span><br><span class="line">    commit(types.CHECKOUT_REQUEST)</span><br><span class="line"><span class="comment">// è´­ç‰© API æ¥å—ä¸€ä¸ªæˆåŠŸå›è°ƒå’Œä¸€ä¸ªå¤±è´¥å›è°ƒ</span></span><br><span class="line">    shop.buyProducts(</span><br><span class="line">      products,</span><br><span class="line"><span class="comment">// æˆåŠŸæ“ä½œ</span></span><br><span class="line">      () =&gt; commit(types.CHECKOUT_SUCCESS),</span><br><span class="line"><span class="comment">// å¤±è´¥æ“ä½œ</span></span><br><span class="line">      () =&gt; commit(types.CHECKOUT_FAILURE, savedCartItems)</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>å†æ¥ä¸€ä¸ªï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// action.js</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span><span class="string">'axios'</span></span><br><span class="line"><span class="keyword">let</span> url = <span class="string">'...'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span><span class="function"><span class="keyword">function</span><span class="title">loadmore</span>(<span class="params">state</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> details = state.details</span><br><span class="line"><span class="keyword">let</span> resp = <span class="keyword">await</span> axios.get(url)</span><br><span class="line"><span class="keyword">return</span> resp.data</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span><span class="keyword">default</span> &#123;</span><br><span class="line"><span class="keyword">async</span> moreDetails(&#123;commit, state&#125;) &#123;</span><br><span class="line">    commit(<span class="string">'loadmore'</span>, <span class="keyword">await</span> loadmore(state))</span><br><span class="line">  &#125;,</span><br><span class="line">  changeAddress(&#123;commit, address&#125;) &#123;</span><br><span class="line">    commit(<span class="string">'CHANGEADDRESS'</span>, address)</span><br><span class="line">  &#125;,</span><br><span class="line"><span class="keyword">async</span> resetAddress(&#123;commit&#125;) &#123;</span><br><span class="line"><span class="keyword">let</span> addresses = []</span><br><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line"><span class="keyword">let</span> resp = <span class="keyword">await</span> axios.get(<span class="string">`...`</span>)</span><br><span class="line">      addresses = resp.data</span><br><span class="line">    &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line"><span class="built_in">console</span>.log(e)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    commit(<span class="string">'CHANGEADDRESS'</span>, addresses)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="åœ¨ç»„ä»¶ä¸­åˆ†å‘-Action"><a href="#åœ¨ç»„ä»¶ä¸­åˆ†å‘-Action" class="headerlink" title="åœ¨ç»„ä»¶ä¸­åˆ†å‘ Action"></a>åœ¨ç»„ä»¶ä¸­åˆ†å‘ Action</h4><p>åœ¨ç»„ä»¶ä¸­åˆ†å‘actionæœ‰ä¸¤ç§æ–¹å¼ï¼š</p><ul><li>ä½¿ç”¨ <code>this.$store.dispatch(&#39;xxx&#39;)</code></li><li>ä½¿ç”¨ <code>mapActions</code> è¾…åŠ©å‡½æ•°å°†ç»„ä»¶çš„ <code>methods</code> æ˜ å°„ä¸º <code>store.dispatch</code>æ¥è°ƒç”¨ï¼ˆéœ€è¦åœ¨æ ¹èŠ‚ç‚¹æ³¨å…¥storeï¼‰<br>æ¥ä¸ªå®˜ç½‘çš„ä¾‹å­ï¼š<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapActions &#125; <span class="keyword">from</span><span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span><span class="keyword">default</span> &#123;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    ...mapActions([</span><br><span class="line"><span class="string">'increment'</span>, <span class="comment">// å°† `this.increment()` æ˜ å°„ä¸º `this.$store.dispatch('increment')`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// `mapActions` ä¹Ÿæ”¯æŒè½½è·ï¼š</span></span><br><span class="line"><span class="string">'incrementBy'</span><span class="comment">// å°† `this.incrementBy(amount)` æ˜ å°„ä¸º `this.$store.dispatch('incrementBy', amount)`</span></span><br><span class="line">    ]),</span><br><span class="line">    ...mapActions(&#123;</span><br><span class="line">      add: <span class="string">'increment'</span><span class="comment">// å°† `this.add()` æ˜ å°„ä¸º `this.$store.dispatch('increment')`</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="ç»„åˆä½¿ç”¨-Action"><a href="#ç»„åˆä½¿ç”¨-Action" class="headerlink" title="ç»„åˆä½¿ç”¨ Action"></a>ç»„åˆä½¿ç”¨ Action</h4><p>store.dispatch å¯ä»¥å¤„ç†è¢«è§¦å‘çš„ action çš„å¤„ç†å‡½æ•°è¿”å›çš„ Promiseï¼Œå¹¶ä¸” store.dispatch ä»æ—§è¿”å› Promiseã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾ getData() å’Œ getOtherData() è¿”å›çš„æ˜¯ Promise</span></span><br><span class="line">actions: &#123;</span><br><span class="line"><span class="keyword">async</span> actionA (&#123; commit &#125;) &#123;</span><br><span class="line">    commit(<span class="string">'gotData'</span>, <span class="keyword">await</span> getData())</span><br><span class="line">  &#125;,</span><br><span class="line"><span class="keyword">async</span> actionB (&#123; dispatch, commit &#125;) &#123;</span><br><span class="line"><span class="keyword">await</span> dispatch(<span class="string">'actionA'</span>) <span class="comment">// ç­‰å¾… actionA å®Œæˆ</span></span><br><span class="line">    commit(<span class="string">'gotOtherData'</span>, <span class="keyword">await</span> getOtherData())</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="module"><a href="#module" class="headerlink" title="module"></a>module</h3><p>ç”±äºä½¿ç”¨å•ä¸€çŠ¶æ€æ ‘ï¼Œåº”ç”¨çš„æ‰€æœ‰çŠ¶æ€ä¼šé›†ä¸­åˆ°ä¸€ä¸ªæ¯”è¾ƒå¤§çš„å¯¹è±¡ã€‚å½“åº”ç”¨å˜å¾—éå¸¸å¤æ‚æ—¶ï¼Œstore å¯¹è±¡å°±æœ‰å¯èƒ½å˜å¾—ç›¸å½“è‡ƒè‚¿ã€‚</p><p>ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜ï¼ŒVuex å…è®¸æˆ‘ä»¬å°† store åˆ†å‰²æˆæ¨¡å—ï¼ˆmoduleï¼‰ã€‚æ¯ä¸ªæ¨¡å—æ‹¥æœ‰è‡ªå·±çš„ stateã€mutationã€actionã€getterã€ç”šè‡³æ˜¯åµŒå¥—å­æ¨¡å—â€”â€”ä»ä¸Šè‡³ä¸‹è¿›è¡ŒåŒæ ·æ–¹å¼çš„åˆ†å‰²ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> moduleA = &#123;</span><br><span class="line">  state: &#123; ... &#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;,</span><br><span class="line">  getters: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> moduleB = &#123;</span><br><span class="line">  state: &#123; ... &#125;,</span><br><span class="line">  mutations: &#123; ... &#125;,</span><br><span class="line">  actions: &#123; ... &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  modules: &#123;</span><br><span class="line">    a: moduleA,</span><br><span class="line">    b: moduleB</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">store.state.a <span class="comment">// -&gt; moduleA çš„çŠ¶æ€</span></span><br><span class="line">store.state.b <span class="comment">// -&gt; moduleB çš„çŠ¶æ€</span></span><br></pre></td></tr></table></figure></p><p><a href="https://vuex.vuejs.org/zh-cn/api.html" target="_blank" rel="noopener">Vuexå®˜æ–¹APIæ–‡æ¡£</a></p>]]></content><summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;vuexæ˜¯ä¸ºVueåº”ç”¨å¼€å‘çš„&lt;strong&gt;çŠ¶æ€ç®¡ç†æ¨¡å¼&lt;/strong&gt;ã€‚&lt;br&gt;å®ƒé‡‡ç”¨é›†ä¸­å¼å­˜å‚¨ç®¡ç†åº”ç”¨çš„æ‰€æœ‰ç»„ä»¶çš„çŠ¶æ€ï¼Œå¹¶ä»¥ç›¸åº”çš„è§„åˆ™ä¿è¯çŠ¶æ€ä»¥ä¸€ç§å¯é¢„æµ‹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚Vuex ä¹Ÿé›†æˆåˆ° Vue çš„å®˜æ–¹è°ƒè¯•å·¥å…· devtools extensionï¼Œæä¾›äº†è¯¸å¦‚é›¶é…ç½®çš„ time-travel è°ƒè¯•ã€çŠ¶æ€å¿«ç…§å¯¼å…¥å¯¼å‡ºç­‰é«˜çº§è°ƒè¯•åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™ä¸ªçŠ¶æ€è‡ªç®¡ç†åº”ç”¨åŒ…å«ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;stateï¼Œé©±åŠ¨åº”ç”¨çš„æ•°æ®æºï¼›&lt;/li&gt;
&lt;li&gt;viewï¼Œä»¥å£°æ˜æ–¹å¼å°† state æ˜ å°„åˆ°è§†å›¾ï¼›&lt;/li&gt;
&lt;li&gt;actionsï¼Œå“åº”åœ¨ view ä¸Šçš„ç”¨æˆ·è¾“å…¥å¯¼è‡´çš„çŠ¶æ€å˜åŒ–ã€‚
    
    </summary><category term="å‰ç«¯" scheme="https://mhynet.cn/categories/%E5%89%8D%E7%AB%AF/"/><category term="javascript" scheme="https://mhynet.cn/tags/javascript/"/><category term="vue" scheme="https://mhynet.cn/tags/vue/"/><category term="vuex" scheme="https://mhynet.cn/tags/vuex/"/></entry><entry><title>ç§»åŠ¨ç«¯é¡µé¢è¿œç¨‹è°ƒè¯•</title><link href="https://mhynet.cn/mobile-remote-debug.html"/><id>https://mhynet.cn/mobile-remote-debug.html</id><published>2018-05-05T11:27:02.000Z</published><updated>2020-01-13T04:05:08.198Z</updated><content type="html"><![CDATA[<p>æœ¬æ–‡è®°å½•ä¸€ä¸‹ç§»åŠ¨ç«¯é¡µé¢è°ƒè¯•çš„æ–¹æ³•ï¼Œå¾…æ—¥åæœ‰æ—¶é—´åœ¨è¯¦ç»†è¯´æ˜ç›¸å…³æ­¥éª¤ã€‚</p><a id="more"></a><h2 id="æ‰‹æœºè¿æ¥ä»£ç†"><a href="#æ‰‹æœºè¿æ¥ä»£ç†" class="headerlink" title="æ‰‹æœºè¿æ¥ä»£ç†"></a>æ‰‹æœºè¿æ¥ä»£ç†</h2><p>æ‰‹æœºç«¯è°ƒè¯•é¡µé¢éƒ½éœ€è¦ä»£ç†ï¼ŒIOSå’Œå®‰å“éƒ½ä¸€æ ·ï¼Œè¿æ¥ä»£ç†çš„æ–¹å¼å› æ‰‹æœºç±»å‹ä¸åŒç¨æœ‰å·®å¼‚ï¼Œä½†æ˜¯å½’çº³èµ·æ¥åªæœ‰å¼€å¯æƒé™ã€ä¸‹è½½è¯ä¹¦ã€é…ç½®ä»£ç†å‡ éƒ¨åˆ†ã€‚<br>é¦–å…ˆéœ€è¦åœ¨ç”µè„‘ä¸Šæ‰“å¼€Charlesåº”ç”¨ç¨‹åºï¼Œ<br>Charleså®˜ç½‘æ˜¯<a href="https://www.charlesproxy.com/" target="_blank" rel="noopener">https://www.charlesproxy.com/</a>ï¼Œ<br>å®‰è£…è¯ä¹¦çš„æ–¹å¼éƒ½å¤§åŒå°å¼‚,åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€charleså®˜ç½‘ï¼Œä¸‹è½½è¯ä¹¦ï¼Œç„¶åå®‰è£…ã€‚å¦‚æœå®‰è£…å¤±è´¥ï¼Œå¾ˆå¤§çš„å¯èƒ½æ˜¯æµè§ˆå™¨æƒé™æˆ–è€…æ‰‹æœºè®¾ç½®ä¸å¯¹ã€‚ä¸€èˆ¬åªéœ€è¦åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€Charleså®˜ç½‘ï¼Œè¿æ¥ä»£ç†åè®¿é—®é¡µé¢ä¼šè‡ªåŠ¨ä¸‹è½½ä»£ç†ã€‚</p><h2 id="å®‰è£…è¯ä¹¦"><a href="#å®‰è£…è¯ä¹¦" class="headerlink" title="å®‰è£…è¯ä¹¦"></a>å®‰è£…è¯ä¹¦</h2><p>è¿æ¥å®Œä»£ç†ä¹‹åéœ€è¦å®‰è£…è¯ä¹¦ï¼Œå¦åˆ™æ— æ³•è§£æhttpsçš„æ•°æ®ã€‚<br>ä¾æ¬¡ç‚¹å‡»: ç”µè„‘ä¸Šcharlesçš„helpèœå• =&gt; SSL Proxying =&gt; iosæ‰‹æœºï¼šinstall Charles Root ceritificate in ios simulatore; Androidæ‰‹æœºï¼š on a mobile devices or remote browser =&gt; å¼¹çª—ä¸­çš„ chls.pro/ssl è¾“å…¥åˆ°æ‰‹æœºçš„æµè§ˆå™¨ä¸­ä¸‹è½½è¯ä¹¦ =&gt; åœ¨æ‰‹æœºä¸Šç‚¹å‡»è¯¥æ–‡ä»¶è¿›è¡Œå®‰è£… =&gt; éƒ¨åˆ†æ‰‹æœºçš„å¯ä»¥è¯†åˆ«.pemè¯ä¹¦ï¼Œå¯ä»¥ç›´æ¥å®‰è£…ï¼Œä¸è¯†åˆ«è¯¥ç±»å‹æ–‡ä»¶çš„æ‰‹æœºéœ€è¦æ‰‹åŠ¨å®‰è£…ï¼Œè¯·ç»§ç»­ä¸‹é¢çš„æ“ä½œ =&gt; æ‰¾åˆ°è¯¥è¯ä¹¦æ–‡ä»¶æ‰€åœ¨èµ„æºç®¡ç†å™¨ä¸­çš„è·¯å¾„ï¼Œè®°ä½å®ƒï¼ŒQQæµè§ˆå™¨ä¸‹è½½çš„è·¯å¾„ä¸€èˆ¬åœ¨: Tentcent/QQfile_recvç›®å½•ä¸‹ =&gt; æ¥ä¸‹æ¥æ˜¯æ‰‹åŠ¨å®‰è£…, æ‰“å¼€æ‰‹æœºçš„è®¾ç½® =&gt; æ‰¾åˆ° â€œå®‰å…¨ä¸éšç§â€ èœå•ï¼Œç‚¹è¿›å…¥ï¼Œä¸åŒçš„æ‰‹æœºèœå•ä¸åŒï¼Œè¯·æ ¹æ®ä¸åŒæ‰‹æœºè¿›è¡Œå®é™…æŸ¥æ‰¾ï¼Œè¿›å…¥è¯¥èœå•ä¸‹ =&gt; åœ¨å½“å‰èœå•æˆ–å…¶å­èœå•ä¸­æ‰¾åˆ° â€œä»å­˜å‚¨è®¾å¤‡å®‰è£…â€ èœå•(åä¸ºmate20æ‰‹æœºï¼Œåœ¨è¯¥ç›®å½•ä¸‹çš„ æ›´å¤šå®‰å…¨è®¾ç½® -&gt; åŠ å¯†ä¸å‡­è¯ ä¸‹) =&gt; ç„¶åè¿›å…¥äº†èµ„æºç®¡ç†å™¨ï¼Œæ‰¾åˆ°åˆšæ‰çš„è¯ä¹¦è·¯å¾„ï¼Œå®‰è£…è¯ä¹¦</p><p>ä¸åŒçš„æ‰‹æœºæ‰¾ä¸­ â€œä»å­˜å‚¨è®¾å¤‡å®‰è£…â€åŠŸèƒ½èœå•çš„è·¯å¾„æœ‰å·®å¼‚ï¼ŒåŸºæœ¬ä¸Šéƒ½å¯ä»¥åœ¨å®‰å…¨ä¸éšç§èœå•ä¸‹é¢æ‰¾åˆ°ï¼Œæœ‰äº›æ‰‹æœºå¯ä»¥åœ¨è®¾ç½®ä¸­ç›´æ¥æœç´¢ï¼Œæå¤§åœ°æ–¹ä¾¿äº†æŸ¥æ‰¾ã€‚</p><h2 id="å®‰å“æ‰‹æœºè¿œç¨‹è°ƒè¯•"><a href="#å®‰å“æ‰‹æœºè¿œç¨‹è°ƒè¯•" class="headerlink" title="å®‰å“æ‰‹æœºè¿œç¨‹è°ƒè¯•"></a>å®‰å“æ‰‹æœºè¿œç¨‹è°ƒè¯•</h2><p><a href="https://developers.google.com/web/tools/chrome-devtools/remote-debugging/?utm_source=dcc&amp;utm_medium=redirect&amp;utm_campaign=2016q3" target="_blank" rel="noopener">è¿œç¨‹è°ƒè¯• Android è®¾å¤‡ä½¿ç”¨å¯ä»¥å‚è€ƒè¿™æœ¬ç¯‡æ–‡ç« </a><br>éœ€è¦æ³¨æ„çš„æ˜¯è¯¥æ–¹æ³•å¿…é¡»ä½¿ç”¨Chromeæµè§ˆå™¨ï¼Œæµè§ˆå™¨éœ€è¦ç›¸å…³æƒé™ã€‚</p><h2 id="IOSæ‰‹æœºè¿œç¨‹è°ƒè¯•"><a href="#IOSæ‰‹æœºè¿œç¨‹è°ƒè¯•" class="headerlink" title="IOSæ‰‹æœºè¿œç¨‹è°ƒè¯•"></a>IOSæ‰‹æœºè¿œç¨‹è°ƒè¯•</h2><p>IOSæ‰‹æœºè¿œç¨‹è°ƒè¯•éœ€è¦ä½¿ç”¨çš„æ˜¯åŸç”Ÿæµè§ˆå™¨safariï¼ŒåŒæ ·éœ€è¦æ•°æ®çº¿è¿æ¥ç”µè„‘ï¼Œè¿æ¥ä»£ç†<br>éœ€è¦çš„ç›¸å…³è®¾ç½®</p><p>æ‰‹æœºç«¯ï¼š<br>ä¾æ¬¡è¿›å…¥ï¼šè®¾ç½® &gt; Safari &gt; é«˜çº§ï¼Œç„¶åå¼€å¯Javascript å’Œ Webæ£€æŸ¥å™¨</p><p>ç”µè„‘ç«¯ï¼š<br>æ‰“å¼€ Safari æµè§ˆå™¨ï¼Œ åœ¨è®¾ç½®é‡Œé¢æ‰“å¼€ï¼š è®¾ç½® &gt; é«˜çº§ , å‹¾é€‰æœ€åé¢çš„ <em>åœ¨èœå•ä¸­æ˜¾ç¤ºâ€œå¼€å‘â€èœå•</em>ï¼Œåœ¨ç”µè„‘ç”¨æˆ·åé€‰é¡¹ä¸‹å‹¾é€‰<em>è‡ªåŠ¨æ˜¾ç¤ºJSContextçš„ç½‘é¡µæ£€æŸ¥å™¨</em>ï¼Œç„¶ååœ¨æ‰‹æœºç«¯çš„Safariæµè§ˆå™¨ä¸­æ‰“å¼€éœ€è¦è°ƒè¯•çš„é¡µé¢ï¼Œç”µè„‘Safariæµè§ˆå™¨çš„å¼€å‘èœå•ä¸­ä¼šå‡ºç°ä¸€ä¸ªæ‰‹æœºåç§°çš„é€‰é¡¹å¡ï¼Œé‡Œé¢ä¼šæ˜¾ç¤ºå‡ºæ‰‹æœºç«¯åœ¨Safariä¸­æ‰“å¼€çš„æ‰€æœ‰é¡µé¢ï¼Œç‚¹å‡»éœ€è¦è°ƒè¯•çš„é¡µé¢å³å¯ã€‚å¦‚æœæ²¡æœ‰æ˜¾ç¤ºå‡ºæ¥ï¼Œé‡å¯ç”µè„‘ä¸Šçš„Safariæµè§ˆå™¨å³å¯ã€‚å¦‚æœè¿˜ä¹ˆæœ‰ï¼Œå¯èƒ½æ˜¯æ•°æ®çº¿æˆ–è€…è®¾ç½®çš„é—®é¢˜ï¼Œæ£€æŸ¥ç›¸å…³æ­¥éª¤æœ‰æ²¡æœ‰é—®é¢˜ã€‚</p>]]></content><summary type="html">
    
      ç§»åŠ¨ç«¯h5é¡µé¢è°ƒè¯•æ–¹æ³•
    
    </summary><category term="å‰ç«¯" scheme="https://mhynet.cn/categories/%E5%89%8D%E7%AB%AF/"/><category term="å®‰å“" scheme="https://mhynet.cn/tags/%E5%AE%89%E5%8D%93/"/><category term="è°ƒè¯•" scheme="https://mhynet.cn/tags/%E8%B0%83%E8%AF%95/"/></entry><entry><title>dispatchEventçš„ç”¨æ³•</title><link href="https://mhynet.cn/dispatchEvent.html"/><id>https://mhynet.cn/dispatchEvent.html</id><published>2018-05-04T03:58:31.000Z</published><updated>2020-01-13T04:05:08.195Z</updated><content type="html"><![CDATA[<p>æµè§ˆå™¨äº‹ä»¶ä¸€èˆ¬è¢«ç§°ä¸ºDOMäº‹ä»¶ï¼Œé€šå¸¸çš„ç”¨æ³•æ˜¯ç»™æŸä¸ªDOMå…ƒç´ æ·»åŠ äº‹ä»¶ã€‚æµè§ˆå™¨ä¸­åŸç”Ÿçš„DOMäº‹ä»¶æœ‰å¾ˆå¤šï¼Œæœ€å¸¸ç”¨çš„æœ‰ä»¥ä¸‹å‡ å¤§ç±»ï¼šé¼ æ ‡äº‹ä»¶ã€é”®ç›˜äº‹ä»¶ã€æ¡†æ¶/å¯¹è±¡äº‹ä»¶ã€è¡¨å•äº‹ä»¶ã€å‰ªåˆ‡æ¿äº‹ä»¶ã€æ‰“å°äº‹ä»¶ã€å¤šåª’ä½“äº‹ä»¶ã€åŠ¨ç”»äº‹ä»¶ç­‰ã€‚æ¯ä¸€ç±»éƒ½æœ‰è‹¥å¹²ä¸ªDOMäº‹ä»¶ã€‚<br>å‰ç«¯æœ€å¸¸ç”¨çš„æ˜¯é¼ æ ‡äº‹ä»¶å’Œé”®ç›˜äº‹ä»¶ï¼Œæ¯”å¦‚é¼ æ ‡ç‚¹å‡»ã€é”®ç›˜é”®å…¥ã€ç§»åŠ¨ç«¯çš„touchç­‰ï¼ŒWebé¡µé¢ä¸ç”¨æˆ·äº¤äº’æ˜¯é€šè¿‡DOMäº‹ä»¶æ¥å®Œæˆçš„ã€‚<br>æœ€å¸¸ç”¨çš„äº‹ä»¶åˆ—è¡¨è¿™é‡Œä¸åœ¨ç½—åˆ—ï¼Œå¯ä»¥åœ¨<a href="http://www.runoob.com/jsref/dom-obj-event.html" target="_blank" rel="noopener">www.runoob.com</a>ä¸ŠæŸ¥ã€‚ä¹‹å‰æ€»ç»“è¿‡<a href="http://mhynet.cn/2017/09/04/%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F/">DOMäº‹ä»¶</a>æ–¹é¢çš„çŸ¥è¯†ï¼Œæœ¬æ–‡æƒ³è¯´çš„æ˜¯è‡ªå®šä¹‰äº‹ä»¶çš„ä½¿ç”¨.</p><a id="more"></a><p>åˆ›å»ºäº‹ä»¶çš„æ–¹å¼æ—©æœŸçš„æœ‰<code>createEvent()</code>ï¼Œä½†æ˜¯ç›®å‰å·²ç»è¿‡æ—¶äº†ï¼Œç°åœ¨å¸¸ç”¨çš„æ–¹å¼æ˜¯ä½¿ç”¨æ„é€ å‡½æ•°çš„æ–¹å¼æ¥åˆ›å»ºäº‹ä»¶ã€‚</p><p>äº‹ä»¶è§¦å‘ä¸€èˆ¬é€šè¿‡ç”¨æˆ·åœ¨é¡µé¢ä¸Šçš„æ“ä½œè§¦å‘ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥é€šè¿‡äº‹ä»¶è§¦å‘å™¨æ¥å®ç°ã€‚åœ¨ä¸€äº›ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œç”¨äº‹ä»¶è§¦å‘å™¨æ¥è§¦å‘äº‹ä»¶æ¯”ç”¨æˆ·çš„å®é™…æ“ä½œæ¥è§¦å‘äº‹ä»¶æ›´æ–¹ä¾¿ã€‚</p><p>è§¦å‘äº‹ä»¶æ¯ç§æµè§ˆå™¨éƒ½æœ‰åŸç”Ÿçš„æ–¹å¼ï¼ŒIEæ”¯æŒ<code>fireEvent()</code>æ–¹æ³•è§¦å‘äº‹ä»¶ï¼Œæ ‡å‡†æµè§ˆå™¨éƒ½æ”¯æŒ<code>dispatchEvent()</code>æ–¹æ³•ã€‚<br>ç®€å•ä»‹ç»ä¸€ä¸‹<code>fireEvent()</code>æ–¹å¼å§ï¼Œä¸‹é¢æ˜¯ä¸€æ®µprototype.jsçš„æºç ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fireEvent = <span class="function"><span class="keyword">function</span><span class="title">fireEvent</span>(<span class="params">element,event</span>)</span>&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">document</span>.createEventObject)&#123;</span><br><span class="line"><span class="comment">// IEæµè§ˆå™¨æ”¯æŒfireEventæ–¹æ³•</span></span><br><span class="line"><span class="keyword">var</span> evt = <span class="built_in">document</span>.createEventObject();</span><br><span class="line"><span class="keyword">return</span> element.fireEvent(<span class="string">'on'</span>+event,evt)</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">// å…¶ä»–æ ‡å‡†æµè§ˆå™¨ä½¿ç”¨dispatchEventæ–¹æ³•</span></span><br><span class="line"><span class="keyword">var</span> evt = <span class="built_in">document</span>.createEvent( <span class="string">'HTMLEvents'</span> );</span><br><span class="line"></span><br><span class="line"><span class="comment">// initEventæ¥å—3ä¸ªå‚æ•°ï¼š</span></span><br><span class="line"><span class="comment">// äº‹ä»¶ç±»å‹ï¼Œæ˜¯å¦å†’æ³¡ï¼Œæ˜¯å¦é˜»æ­¢æµè§ˆå™¨çš„é»˜è®¤è¡Œä¸º</span></span><br><span class="line">        evt.initEvent(event, <span class="literal">true</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="keyword">return</span> !element.dispatchEvent(evt);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p><h2 id="dispatchEvent-äº‹ä»¶è§¦å‘å™¨"><a href="#dispatchEvent-äº‹ä»¶è§¦å‘å™¨" class="headerlink" title="dispatchEvent äº‹ä»¶è§¦å‘å™¨"></a>dispatchEvent äº‹ä»¶è§¦å‘å™¨</h2><ul><li><p>æ—©æœŸçš„åˆ›å»ºäº‹ä»¶çš„æ–¹å¼ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> event = <span class="built_in">document</span>.createEvent(<span class="string">'Event'</span>); <span class="comment">// ä¸€ä¸ªå‚æ•°ï¼Œ è¡¨ç¤ºäº‹ä»¶ç±»å‹</span></span><br><span class="line">event.initEvent(<span class="string">'build'</span>, <span class="literal">true</span>, <span class="literal">true</span>); <span class="comment">// ä¸‰ä¸ªå‚æ•°ï¼ŒeventNameäº‹ä»¶ç±»å‹ã€canBubbleæ˜¯å¦å†’æ³¡ã€preventDefaultæ˜¯å¦é˜»æ­¢äº‹ä»¶çš„é»˜è®¤æ“ä½œ</span></span><br><span class="line"><span class="built_in">document</span>.dispatchEvent(event) <span class="comment">// å‚æ•°ä¸ºäº‹ä»¶å¯¹è±¡</span></span><br></pre></td></tr></table></figure></li><li><p>æ„é€ å‡½æ•°æ–¹å¼</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> event = <span class="keyword">new</span> Event(<span class="string">'build'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç›‘å¬äº‹ä»¶</span></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'build'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line"><span class="comment">// e.target matches document from above</span></span><br><span class="line">&#125;, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§¦å‘äº‹ä»¶</span></span><br><span class="line"><span class="built_in">document</span>.dispatchEvent(event);</span><br></pre></td></tr></table></figure></li></ul><p>å†ä¸¾ä¸ªå¯ä»¥ç»™äº‹ä»¶ä¼ å€¼çš„ä¾‹å­ï¼Œå¯ä»¥å°†è§¦å‘äº‹ä»¶å®šä¹‰åœ¨ä¸€ä¸ªæ–¹æ³•å†…:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    name: <span class="string">'mhy'</span>,</span><br><span class="line">    age: <span class="number">23</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> evt = <span class="keyword">new</span> Event(<span class="string">'haha'</span>)</span><br><span class="line"><span class="function"><span class="keyword">function</span><span class="title">handler</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> o = e.eventBody</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'addevt'</span>, o)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'evt'</span>, evt)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'haha'</span>, handler, <span class="literal">false</span>)</span><br><span class="line"><span class="function"><span class="keyword">function</span><span class="title">disPatchEvt</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">2evt.eventBody = obj</span><br><span class="line">2<span class="built_in">document</span>.dispatchEvent(evt, obj)</span><br><span class="line">&#125;</span><br><span class="line">disPatchEvt(obj)</span><br></pre></td></tr></table></figure></p><p>ä»¥ä¸Šä¾‹å­ä¸­æ‰€ä¼ çš„æ•°æ®å¯ä»¥æ˜¯ä»»ä»»æ„ç±»å‹çš„æ•°æ®ï¼Œé€šè¿‡è¿™ç§æ–¹æ³•åŸºæœ¬å¯ä»¥æ»¡è¶³ä»»æ„æ ‡å‡†æµè§ˆå™¨ç¯å¢ƒä¸‹é€šè¿‡è‡ªå®šä¹‰äº‹ä»¶çš„éœ€æ±‚ã€‚</p>]]></content><summary type="html">
    
      javascript æµè§ˆå™¨äº‹ä»¶ï¼ŒdispatchEventäº‹ä»¶è§¦å‘å™¨
    
    </summary><category term="å‰ç«¯" scheme="https://mhynet.cn/categories/%E5%89%8D%E7%AB%AF/"/><category term="javascript" scheme="https://mhynet.cn/tags/javascript/"/><category term="dispatchEvent" scheme="https://mhynet.cn/tags/dispatchEvent/"/><category term="Event" scheme="https://mhynet.cn/tags/Event/"/></entry><entry><title>windowå¯¹è±¡ä¹‹å±å¹•å°ºå¯¸ç›¸å…³çš„å±æ€§</title><link href="https://mhynet.cn/window-screen-property.html"/><id>https://mhynet.cn/window-screen-property.html</id><published>2018-03-15T05:12:19.000Z</published><updated>2020-01-09T07:08:53.590Z</updated><content type="html"><![CDATA[<h2 id="windowå¯¹è±¡ä¸­å±å¹•å°ºå¯¸ç›¸å…³çš„å±æ€§"><a href="#windowå¯¹è±¡ä¸­å±å¹•å°ºå¯¸ç›¸å…³çš„å±æ€§" class="headerlink" title="windowå¯¹è±¡ä¸­å±å¹•å°ºå¯¸ç›¸å…³çš„å±æ€§"></a><code>window</code>å¯¹è±¡ä¸­å±å¹•å°ºå¯¸ç›¸å…³çš„å±æ€§</h2><h3 id="window-screenX-å’Œ-window-screentY"><a href="#window-screenX-å’Œ-window-screentY" class="headerlink" title="window.screenX å’Œ window.screentY"></a><code>window.screenX</code> å’Œ <code>window.screentY</code></h3><p>è¿”å›æµè§ˆå™¨çª—å£å·¦ä¸Šè§’ç›¸å¯¹äºå±å¹•å·¦ä¸Šè§’çš„ï¼ˆ0,0)çš„æ°´å¹³è·ç¦»å’Œå‚ç›´è·ç¦»ï¼Œ å•ä½ä¸ºåƒç´ ã€‚<br><a id="more"></a></p><h3 id="window-innerWidth-å’Œ-window-innerHeight"><a href="#window-innerWidth-å’Œ-window-innerHeight" class="headerlink" title="window.innerWidth å’Œ window.innerHeight"></a><code>window.innerWidth</code> å’Œ <code>window.innerHeight</code></h3><p>è¿”å›å½“å‰æµè§ˆå™¨çª—å£å¯è§†éƒ¨åˆ†çš„å®½åº¦å’Œé«˜åº¦, å³â€œè§†å£â€ï¼ˆviewportï¼‰, å•ä½åƒç´ ã€‚<br>è¿™ä¸¤ä¸ªå±æ€§åŒ…å«æ»šåŠ¨æ¡çš„å°ºå¯¸ã€‚<br>å½“ç”¨æˆ·æ”¾å¤§ç½‘é¡µå°ºå¯¸çš„æ—¶å€™ï¼Œè¿™ä¸¤ä¸ªå±æ€§çš„å€¼ä¼šå˜å°ï¼Œå› ä¸ºè¿™æ—¶ç½‘é¡µçš„åƒç´ å¤§å°ä¸å˜ï¼Œåªæ˜¯æ¯ä¸ªåƒç´ å æ®çš„å±å¹•ç©ºé—´å˜å¤§äº†ï¼Œå› ä¸ºå¯è§éƒ¨åˆ†ï¼ˆè§†å£ï¼‰å°±å˜å°äº†ã€‚</p><h3 id="window-outerWidth-å’Œ-window-outerHeight"><a href="#window-outerWidth-å’Œ-window-outerHeight" class="headerlink" title="window.outerWidth å’Œ window.outerHeight"></a><code>window.outerWidth</code> å’Œ <code>window.outerHeight</code></h3><p>è¿”å›æµè§ˆå™¨çª—å£çš„é«˜åº¦å’Œå®½åº¦ï¼ŒåŒ…æ‹¬æµè§ˆå™¨èœå•æ å’Œè¾¹æ¡†ï¼Œå•ä½ä¸ºåƒç´ ã€‚</p><h3 id="window-pageXOffset-å’Œ-window-pageYOffset"><a href="#window-pageXOffset-å’Œ-window-pageYOffset" class="headerlink" title="window.pageXOffset å’Œ window.pageYOffset"></a><code>window.pageXOffset</code> å’Œ <code>window.pageYOffset</code></h3><p>è¿”å›é¡µé¢çš„æ°´å¹³å’Œå‚ç›´æ»šåŠ¨è·ç¦»ï¼Œ å•ä½ä¸ºåƒç´ ã€‚</p><h2 id="windowå¯¹è±¡ä¸­å±å¹•æ»šåŠ¨ç›¸å…³çš„æ–¹æ³•"><a href="#windowå¯¹è±¡ä¸­å±å¹•æ»šåŠ¨ç›¸å…³çš„æ–¹æ³•" class="headerlink" title="windowå¯¹è±¡ä¸­å±å¹•æ»šåŠ¨ç›¸å…³çš„æ–¹æ³•"></a><code>window</code>å¯¹è±¡ä¸­å±å¹•æ»šåŠ¨ç›¸å…³çš„æ–¹æ³•</h2><p><code>window</code>å¯¹è±¡ä¸­å±å¹•æ»šåŠ¨ç›¸å…³çš„æ–¹æ³•æœ€å¸¸ç”¨çš„æœ‰<code>window.scrollTo(x, y)</code> å’Œ<code>window.scrollBy(x, y)</code>ï¼Œ å•ä½éƒ½æ˜¯åƒç´ ã€‚</p><h3 id="window-scrollTo"><a href="#window-scrollTo" class="headerlink" title="window.scrollTo()"></a><code>window.scrollTo()</code></h3><p>è¯¥æ–¹æ³•ç”¨äºå°†ç½‘é¡µçš„æŒ‡å®šä½ç½®ï¼ˆå‚æ•°åæ ‡ä½ç½®ï¼‰ï¼Œæ»šåŠ¨åˆ°æµè§ˆå™¨çš„å·¦ä¸Šè§’ã€‚å‚æ•°æ˜¯ç›¸å¯¹äºæ•´å¼ ç½‘é¡µçš„åæ ‡ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.scrollTo(<span class="number">0</span>, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure></p><h3 id="window-scrollBy"><a href="#window-scrollBy" class="headerlink" title="window.scrollBy()"></a><code>window.scrollBy()</code></h3><p>è¯¥æ–¹æ³•ç”¨äºå°†ç½‘é¡µæ»šåŠ¨æŒ‡å®šè·ç¦»ã€‚ä¸¤ä¸ªå‚æ•°åˆ†åˆ«ä¸ºå‘å³æ»šåŠ¨çš„è·ç¦»å’Œé¡¹ä¸‹æ»šåŠ¨çš„è·ç¦»ï¼Œå¦‚æœä¸ºè´Ÿå€¼ï¼Œåˆ™å‘ç›¸åçš„æ–¹å‘æ»šåŠ¨ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.scrollBy(<span class="number">0</span>, <span class="built_in">window</span>.innerHeight);</span><br></pre></td></tr></table></figure></p>]]></content><summary type="html">
    
      &lt;h2 id=&quot;windowå¯¹è±¡ä¸­å±å¹•å°ºå¯¸ç›¸å…³çš„å±æ€§&quot;&gt;&lt;a href=&quot;#windowå¯¹è±¡ä¸­å±å¹•å°ºå¯¸ç›¸å…³çš„å±æ€§&quot; class=&quot;headerlink&quot; title=&quot;windowå¯¹è±¡ä¸­å±å¹•å°ºå¯¸ç›¸å…³çš„å±æ€§&quot;&gt;&lt;/a&gt;&lt;code&gt;window&lt;/code&gt;å¯¹è±¡ä¸­å±å¹•å°ºå¯¸ç›¸å…³çš„å±æ€§&lt;/h2&gt;&lt;h3 id=&quot;window-screenX-å’Œ-window-screentY&quot;&gt;&lt;a href=&quot;#window-screenX-å’Œ-window-screentY&quot; class=&quot;headerlink&quot; title=&quot;window.screenX å’Œ window.screentY&quot;&gt;&lt;/a&gt;&lt;code&gt;window.screenX&lt;/code&gt; å’Œ &lt;code&gt;window.screentY&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;è¿”å›æµè§ˆå™¨çª—å£å·¦ä¸Šè§’ç›¸å¯¹äºå±å¹•å·¦ä¸Šè§’çš„ï¼ˆ0,0)çš„æ°´å¹³è·ç¦»å’Œå‚ç›´è·ç¦»ï¼Œ å•ä½ä¸ºåƒç´ ã€‚&lt;br&gt;
    
    </summary><category term="å‰ç«¯" scheme="https://mhynet.cn/categories/%E5%89%8D%E7%AB%AF/"/><category term="javascript" scheme="https://mhynet.cn/tags/javascript/"/><category term="window" scheme="https://mhynet.cn/tags/window/"/></entry><entry><title>ES6ä¹‹Setå’ŒMap</title><link href="https://mhynet.cn/ES6-Set-and-Map.html"/><id>https://mhynet.cn/ES6-Set-and-Map.html</id><published>2018-03-08T07:28:03.000Z</published><updated>2020-01-13T04:05:08.193Z</updated><content type="html"><![CDATA[<p>Setå’ŒMapæ˜¯ES6æ–°å¢çš„æ•°æ®ç»“æ„, Setç±»ä¼¼äºæ•°ç»„ï¼ŒMapç±»ä¼¼äºå¯¹è±¡ã€‚</p><a id="more"></a><h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><p>Setçš„å…ƒç´ å¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„æ•°æ®ï¼Œä½†æ˜¯éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚<br>Setæœ¬èº«æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”ŸæˆSetå®ä¾‹ã€‚<br>ç”ŸæˆSetå®ä¾‹ç”¨newæ“ä½œç¬¦ã€‚</p><h3 id="ç”ŸæˆSetå®ä¾‹"><a href="#ç”ŸæˆSetå®ä¾‹" class="headerlink" title="ç”ŸæˆSetå®ä¾‹"></a>ç”ŸæˆSetå®ä¾‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>, [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], &#123;<span class="attr">name</span>:<span class="string">'li'</span>,<span class="attr">age</span>:<span class="number">22</span>&#125;];</span><br><span class="line"><span class="keyword">let</span><span class="keyword">set</span> = new Set(arr)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span><span class="keyword">set</span> = new Set();</span><br><span class="line">[1,2,2,3,4,5,5].forEach(e =&gt; <span class="keyword">set</span>.add(e));</span><br><span class="line">console.log(<span class="keyword">set</span>); //Set &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">set</span>.size); // 5</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;&#125;;</span><br><span class="line"><span class="keyword">const</span><span class="keyword">set</span> = new Set(obj); //Set &#123;&#123;&#125;&#125;</span><br><span class="line"><span class="keyword">set</span>.add(obj); // Set &#123;&#123;&#125;&#125;</span><br><span class="line"><span class="keyword">set</span>.add(obj); // Set &#123;&#123;&#125;&#125;</span><br><span class="line"><span class="keyword">set</span>.add(&#123;&#125;); <span class="comment">// Set &#123;&#123;&#125;, &#123;&#125;&#125;</span></span><br><span class="line"><span class="keyword">set</span>.add(&#123;&#125;); <span class="comment">// Set &#123;&#123;&#125;, &#123;&#125;&#125;</span></span><br></pre></td></tr></table></figure><h3 id="Setçš„å±æ€§å’Œæ–¹æ³•"><a href="#Setçš„å±æ€§å’Œæ–¹æ³•" class="headerlink" title="Setçš„å±æ€§å’Œæ–¹æ³•"></a>Setçš„å±æ€§å’Œæ–¹æ³•</h3><h4 id="sizeå±æ€§"><a href="#sizeå±æ€§" class="headerlink" title="sizeå±æ€§"></a>sizeå±æ€§</h4><p>è¿”å›Setå®ä¾‹çš„å…ƒç´ æ•°é‡<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="string">'s'</span>,<span class="string">'s'</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span><span class="keyword">set</span> = new Set(arr); // Set &#123;<span class="string">'s'</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">set</span>.size; // 3</span><br></pre></td></tr></table></figure></p><p>#### add(value)</p><p>add() æ–¹æ³•ç”¨äºå‘Setçš„æœ«å°¾æ·»åŠ å…ƒç´ ï¼Œå¯ä»¥æ·»åŠ ä»»ä½•ç±»å‹çš„æ•°æ®(åŒ…æ‹¬Setç±»å‹)ã€‚å¦‚æœsetä¸­æœ‰è¯¥å…ƒç´ ï¼Œåˆ™ä¸æ·»åŠ ï¼›<br>æ·»åŠ æŸä¸ªå€¼ï¼Œè¿”å› Set ç»“æ„æœ¬èº«ã€‚<br>ä¾‹å­è§ä¸Šé¢ã€‚<br>é“¾å¼å†™æ³•:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> s = <span class="keyword">new</span><span class="built_in">Set</span>()</span><br><span class="line">  .add(<span class="number">3</span>)</span><br><span class="line">  .add(<span class="number">2</span>)</span><br><span class="line">  .add(<span class="number">1</span>);</span><br></pre></td></tr></table></figure></p><h4 id="delete-value"><a href="#delete-value" class="headerlink" title="delete(value)"></a>delete(value)</h4><p>deleteæ–¹æ³•ç”¨äºåˆ é™¤Setå®ä¾‹ä¸­çš„å…ƒç´ ï¼Œåˆ é™¤çš„å…ƒç´ ä¸ºä¼ å…¥çš„å‚æ•°ã€‚<br>è¿”å›å€¼ä¸ºå¸ƒå°”å€¼ï¼Œ å¦‚æœå®ä¾‹ä¸­æœ‰è¯¥å‚æ•°å€¼ï¼Œåˆ é™¤å¹¶è¿”å›trueï¼Œå¦åˆ™è¿”å›false.<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="string">'s'</span>,<span class="string">'s'</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span><span class="keyword">set</span> = new Set(arr); // Set &#123;<span class="string">'s'</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">set</span>.delete('s'); // true</span><br><span class="line"><span class="keyword">set</span>.delete('s'); // false</span><br></pre></td></tr></table></figure></p><h4 id="has-value"><a href="#has-value" class="headerlink" title="has(value)"></a>has(value)</h4><p>hasæ–¹æ³•ç”¨æ¥æ£€æŸ¥setå®ä¾‹ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå€¼ï¼Œ å¦‚æœæœ‰åˆ™è¿”å›true, å¦åˆ™è¿”å›falseã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="string">'s'</span>,<span class="string">'s'</span>, <span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span><span class="keyword">set</span> = new Set(arr); // Set &#123;<span class="string">'s'</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">set</span>.has('s'); //true</span><br><span class="line"><span class="keyword">set</span>.delete('s'); // true</span><br><span class="line"><span class="keyword">set</span>.has('s'); //false</span><br></pre></td></tr></table></figure></p><h4 id="clear"><a href="#clear" class="headerlink" title="clear()"></a>clear()</h4><p>clearæ–¹æ³•ç”¨äºæ¸…ç©ºSetã€‚æ²¡æœ‰è¿”å›å€¼ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span><span class="keyword">set</span> = new Set([1,2,3,4,5]);</span><br><span class="line"><span class="keyword">set</span>.clear();</span><br><span class="line">console.log(<span class="keyword">set</span>); // Set &#123;&#125;</span><br></pre></td></tr></table></figure></p><h3 id="Set-çš„éå†æ–¹æ³•"><a href="#Set-çš„éå†æ–¹æ³•" class="headerlink" title="Set çš„éå†æ–¹æ³•"></a>Set çš„éå†æ–¹æ³•</h3><p>Setæœ‰å››ä¸ªéå†æ–¹æ³•ã€‚</p><h4 id="keys-ã€values-å’Œ-enttries"><a href="#keys-ã€values-å’Œ-enttries" class="headerlink" title="keys()ã€values()å’Œ enttries()"></a>keys()ã€values()å’Œ enttries()</h4><p>keysæ–¹æ³•ã€valuesæ–¹æ³•ã€entriesæ–¹æ³•è¿”å›çš„éƒ½æ˜¯éå†å™¨å¯¹è±¡ã€‚ç”±äº Set ç»“æ„æ²¡æœ‰é”®åï¼Œåªæœ‰é”®å€¼ï¼ˆæˆ–è€…è¯´é”®åå’Œé”®å€¼æ˜¯åŒä¸€ä¸ªå€¼ï¼‰ï¼Œæ‰€ä»¥keysæ–¹æ³•å’Œvaluesæ–¹æ³•çš„è¡Œä¸ºå®Œå…¨ä¸€è‡´ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span><span class="keyword">set</span> = new Set(['red', 'green', 'blue']);</span><br><span class="line"></span><br><span class="line">for (let item of <span class="keyword">set</span>.keys()) &#123;</span><br><span class="line"><span class="built_in">console</span>.log(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// red</span></span><br><span class="line"><span class="comment">// green</span></span><br><span class="line"><span class="comment">// blue</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span><span class="keyword">set</span>.values()) &#123;</span><br><span class="line"><span class="built_in">console</span>.log(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// red</span></span><br><span class="line"><span class="comment">// green</span></span><br><span class="line"><span class="comment">// blue</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> item <span class="keyword">of</span><span class="keyword">set</span>.entries()) &#123;</span><br><span class="line"><span class="built_in">console</span>.log(item);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ["red", "red"]</span></span><br><span class="line"><span class="comment">// ["green", "green"]</span></span><br><span class="line"><span class="comment">// ["blue", "blue"]</span></span><br></pre></td></tr></table></figure></p><p>Set ç»“æ„çš„å®ä¾‹é»˜è®¤å¯éå†ï¼Œå®ƒçš„é»˜è®¤éå†å™¨ç”Ÿæˆå‡½æ•°å°±æ˜¯å®ƒçš„valuesæ–¹æ³•ã€‚<br>è¿™æ„å‘³ç€ï¼Œå¯ä»¥çœç•¥valuesæ–¹æ³•ï¼Œç›´æ¥ç”¨forâ€¦ofå¾ªç¯éå† Setã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Set</span>.prototype[<span class="built_in">Symbol</span>.iterator] === <span class="built_in">Set</span>.prototype.values</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span><span class="keyword">set</span> = new Set(['red', 'green', 'blue']);</span><br><span class="line"></span><br><span class="line">//</span><br><span class="line">for (let x of <span class="keyword">set</span>) &#123;</span><br><span class="line"><span class="built_in">console</span>.log(x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// red</span></span><br><span class="line"><span class="comment">// green</span></span><br><span class="line"><span class="comment">// blue</span></span><br></pre></td></tr></table></figure></p><h4 id="forEach"><a href="#forEach" class="headerlink" title="forEach()"></a>forEach()</h4><p>Set ç»“æ„çš„å®ä¾‹ä¸æ•°ç»„ä¸€æ ·ï¼Œä¹Ÿæ‹¥æœ‰forEachæ–¹æ³•ï¼Œç”¨äºå¯¹æ¯ä¸ªæˆå‘˜æ‰§è¡ŒæŸç§æ“ä½œï¼Œ<strong>æ²¡æœ‰è¿”å›å€¼</strong>ã€‚<br>forEachæ–¹æ³•çš„å‚æ•°å°±æ˜¯ä¸€ä¸ªå¤„ç†å‡½æ•°ã€‚è¯¥å‡½æ•°çš„å‚æ•°ä¸æ•°ç»„çš„forEachä¸€è‡´ï¼Œä¾æ¬¡ä¸ºé”®å€¼ã€é”®åã€é›†åˆæœ¬èº«ï¼ˆä¸Šä¾‹çœç•¥äº†è¯¥å‚æ•°ï¼‰ã€‚è¿™é‡Œéœ€è¦æ³¨æ„ï¼ŒSet ç»“æ„çš„é”®åå°±æ˜¯é”®å€¼ï¼ˆä¸¤è€…æ˜¯åŒä¸€ä¸ªå€¼ï¼‰ï¼Œå› æ­¤ç¬¬ä¸€ä¸ªå‚æ•°ä¸ç¬¬äºŒä¸ªå‚æ•°çš„å€¼æ°¸è¿œéƒ½æ˜¯ä¸€æ ·çš„ã€‚</p><p>å¦å¤–ï¼ŒforEachæ–¹æ³•è¿˜å¯ä»¥æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºç»‘å®šå¤„ç†å‡½æ•°å†…éƒ¨çš„thiså¯¹è±¡ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span><span class="keyword">set</span> = new Set([1,2,3,4,5,5,6,6]);</span><br><span class="line"><span class="keyword">set</span>.forEach(item =&gt; console.log(item) )</span><br><span class="line">console.log(<span class="keyword">set</span>)</span><br></pre></td></tr></table></figure></p><h3 id="éå†å™¨çš„åº”ç”¨"><a href="#éå†å™¨çš„åº”ç”¨" class="headerlink" title="éå†å™¨çš„åº”ç”¨"></a>éå†å™¨çš„åº”ç”¨</h3><h4 id="æ•°ç»„å»é‡"><a href="#æ•°ç»„å»é‡" class="headerlink" title="æ•°ç»„å»é‡"></a>æ•°ç»„å»é‡</h4><p>æ•°ç»„å»é‡çš„æ–¹æ³•ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="string">'2'</span>,<span class="string">'s'</span>,<span class="string">'s'</span>];</span><br><span class="line"><span class="built_in">console</span>.log([...new <span class="built_in">Set</span>(arr)]);</span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="built_in">Array</span>.from(<span class="keyword">new</span><span class="built_in">Set</span>(arr));</span><br></pre></td></tr></table></figure></p><h4 id="æ•°ç»„çš„mapå’Œfilteræ–¹æ³•ä¹Ÿå¯ä»¥é—´æ¥ç”¨äº-Set"><a href="#æ•°ç»„çš„mapå’Œfilteræ–¹æ³•ä¹Ÿå¯ä»¥é—´æ¥ç”¨äº-Set" class="headerlink" title="æ•°ç»„çš„mapå’Œfilteræ–¹æ³•ä¹Ÿå¯ä»¥é—´æ¥ç”¨äº Set"></a>æ•°ç»„çš„mapå’Œfilteræ–¹æ³•ä¹Ÿå¯ä»¥é—´æ¥ç”¨äº Set</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ•°ç»„çš„map()</span></span><br><span class="line"><span class="keyword">let</span><span class="keyword">set</span> = new Set([1,2,3,4,5,5,6,6,7]);</span><br><span class="line"><span class="keyword">set</span> = new Set([...<span class="keyword">set</span>].map(item =&gt; `$&#123;item&#125;&lt;----&gt;$&#123;item * <span class="number">2</span>&#125;<span class="string">`))</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//æ•°ç»„çš„filter</span></span><br><span class="line"><span class="string">let set = new Set([1, 2, &#123;name: 'li', age: 22&#125;, &#123;name: 'wang', age: 22&#125;, &#123;name: 'li', age: 24&#125;]);</span></span><br><span class="line"><span class="string">let s = new Set([...set].filter(item =&gt;  item instanceof Object &amp;&amp; item.age == 22 ))</span></span><br></pre></td></tr></table></figure><h4 id="å®ç°å¹¶é›†ï¼ˆUnionï¼‰ã€äº¤é›†ï¼ˆIntersectï¼‰å’Œå·®é›†ï¼ˆDifference"><a href="#å®ç°å¹¶é›†ï¼ˆUnionï¼‰ã€äº¤é›†ï¼ˆIntersectï¼‰å’Œå·®é›†ï¼ˆDifference" class="headerlink" title="å®ç°å¹¶é›†ï¼ˆUnionï¼‰ã€äº¤é›†ï¼ˆIntersectï¼‰å’Œå·®é›†ï¼ˆDifference)"></a>å®ç°å¹¶é›†ï¼ˆUnionï¼‰ã€äº¤é›†ï¼ˆIntersectï¼‰å’Œå·®é›†ï¼ˆDifference)</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span><span class="built_in">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]);</span><br><span class="line"><span class="keyword">let</span> b = <span class="keyword">new</span><span class="built_in">Set</span>([<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¹¶é›† union</span></span><br><span class="line"><span class="keyword">let</span> nuion = <span class="keyword">new</span><span class="built_in">Set</span>([...a, ...b]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// äº¤é›†</span></span><br><span class="line"><span class="keyword">let</span> intersect = <span class="keyword">new</span><span class="built_in">Set</span>([...a].filter(<span class="function"><span class="params">item</span> =&gt;</span> b.has(item)));</span><br><span class="line"></span><br><span class="line"><span class="comment">// å·®é›†</span></span><br><span class="line"><span class="keyword">let</span> difference = <span class="keyword">new</span><span class="built_in">Set</span>([...a].filter(<span class="function"><span class="params">item</span> =&gt;</span> !b.has(item)));</span><br></pre></td></tr></table></figure><h4 id="ç›´æ¥åœ¨éå†æ“ä½œä¸­æ”¹å˜åŸæ¥çš„-Set-ç»“æ„"><a href="#ç›´æ¥åœ¨éå†æ“ä½œä¸­æ”¹å˜åŸæ¥çš„-Set-ç»“æ„" class="headerlink" title="ç›´æ¥åœ¨éå†æ“ä½œä¸­æ”¹å˜åŸæ¥çš„ Set ç»“æ„"></a>ç›´æ¥åœ¨éå†æ“ä½œä¸­æ”¹å˜åŸæ¥çš„ Set ç»“æ„</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ–¹æ³•ä¸€</span></span><br><span class="line"><span class="keyword">let</span><span class="keyword">set</span> = new Set([1, 2, 3]);</span><br><span class="line"><span class="keyword">set</span> = new Set([...<span class="keyword">set</span>].map(val =&gt; val * 2));</span><br><span class="line">// <span class="keyword">set</span>çš„å€¼æ˜¯2, 4, 6</span><br><span class="line"></span><br><span class="line">// æ–¹æ³•äºŒ</span><br><span class="line">let <span class="keyword">set</span> = new Set([1, 2, 3]);</span><br><span class="line"><span class="keyword">set</span> = new Set(Array.from(<span class="keyword">set</span>, val =&gt; val * 2));</span><br><span class="line">// <span class="keyword">set</span>çš„å€¼æ˜¯2, 4, 6</span><br></pre></td></tr></table></figure><h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><p>Mapå’Œå¯¹è±¡ç±»ä¼¼ï¼Œéƒ½æ˜¯å­˜å‚¨çš„é”®å€¼å¯¹ï¼Œä¸åŒä¹‹å¤„åœ¨äºå¯¹è±¡çš„é”®åªèƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè€ŒMapçš„é”®å¯ä»¥ä¸ºä»»æ„ç±»å‹çš„æ•°æ®ã€‚</p><h3 id="ç”ŸæˆMapå®ä¾‹"><a href="#ç”ŸæˆMapå®ä¾‹" class="headerlink" title="ç”ŸæˆMapå®ä¾‹"></a>ç”ŸæˆMapå®ä¾‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> m = <span class="keyword">new</span><span class="built_in">Map</span>([</span><br><span class="line">    [<span class="string">'name'</span>, <span class="string">'lili'</span>],</span><br><span class="line">    [<span class="string">'age'</span>, <span class="number">22</span>],</span><br><span class="line">    [<span class="string">'sex'</span>, <span class="string">'male'</span>]</span><br><span class="line">]);</span><br></pre></td></tr></table></figure><h3 id="Mapçš„å±æ€§å’Œæ“ä½œæ–¹æ³•"><a href="#Mapçš„å±æ€§å’Œæ“ä½œæ–¹æ³•" class="headerlink" title="Mapçš„å±æ€§å’Œæ“ä½œæ–¹æ³•"></a>Mapçš„å±æ€§å’Œæ“ä½œæ–¹æ³•</h3><h4 id="Mapçš„å±æ€§size"><a href="#Mapçš„å±æ€§size" class="headerlink" title="Mapçš„å±æ€§size"></a>Mapçš„å±æ€§size</h4><p>Mapçš„sizeå±æ€§å’ŒSetçš„sizeå±æ€§ç±»ä¼¼ï¼Œè¿”å›Mapç»“æ„çš„æˆå‘˜æ€»æ•°ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">m.size; <span class="comment">// 3</span></span><br></pre></td></tr></table></figure></p><h4 id="set-key-value"><a href="#set-key-value" class="headerlink" title="set(key, value)"></a>set(key, value)</h4><p>Mapçš„set()æ–¹æ³•ç”¨äºå‘Mapå®ä¾‹ä¸­æ·»åŠ æ–°æˆå‘˜ï¼Œè¯¥æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸ºMapå®ä¾‹çš„é”®å’Œå€¼ã€‚å¦‚æœé”®keyå·²å­˜åœ¨ï¼Œåˆ™æ›´æ–°å€¼valueã€‚è¿”å›Mapç»“æ„ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> m = <span class="keyword">new</span><span class="built_in">Map</span>();</span><br><span class="line">m.set(<span class="string">'name'</span>, <span class="string">'liu'</span>); <span class="comment">// Map &#123;'name', 'liu'&#125;</span></span><br></pre></td></tr></table></figure></p><p>å¯ä»¥é‡‡ç”¨é“¾å¼å†™æ³•ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span><span class="built_in">Map</span>()</span><br><span class="line">  .set(<span class="number">1</span>, <span class="string">'a'</span>)</span><br><span class="line">  .set(<span class="number">2</span>, <span class="string">'b'</span>)</span><br><span class="line">  .set(<span class="number">3</span>, <span class="string">'c'</span>);</span><br></pre></td></tr></table></figure></p><h4 id="get-key"><a href="#get-key" class="headerlink" title="get(key)"></a>get(key)</h4><p>Mapçš„get()æ–¹æ³•ç”¨äºæŸ¥è¯¢Mapå®ä¾‹çš„æˆå‘˜ï¼Œ å‚æ•°ä¸ºé”®, è¿”å›è¯¥é”®keyæ‰€å¯¹åº”çš„å€¼valueã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> m = <span class="keyword">new</span><span class="built_in">Map</span>([<span class="string">'name'</span>, <span class="string">'lili'</span>]);</span><br><span class="line">m.get(<span class="string">'name'</span>); <span class="comment">// 'lili'</span></span><br><span class="line">m.get(<span class="string">'age'</span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure></p><h4 id="has-key"><a href="#has-key" class="headerlink" title="has(key)"></a>has(key)</h4><p>Mapç»“æ„çš„has()æ–¹æ³•ç”¨æ¥åˆ¤æ–­æŸä¸ªé”®æ˜¯å¦åœ¨è¯¥Mapç»“æ„ä¸­ï¼Œ è¿”å›å¸ƒå°”å€¼ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> m = <span class="keyword">new</span><span class="built_in">Map</span>(<span class="string">'name'</span>, <span class="string">'wang'</span>);</span><br><span class="line">m.has(<span class="string">'name'</span>); <span class="comment">// ture</span></span><br><span class="line">m.has(<span class="string">'sex'</span>); <span class="comment">// false</span></span><br></pre></td></tr></table></figure></p><h4 id="clear-1"><a href="#clear-1" class="headerlink" title="clear()"></a>clear()</h4><p>åŒSetçš„clear()æ–¹æ³•ï¼Œ ç”¨äºæ¸…ç©ºæ‰€æœ‰æˆå‘˜ï¼Œ æ²¡æœ‰è¿”å›å€¼ã€‚</p><h4 id="delete-key"><a href="#delete-key" class="headerlink" title="delete(key)"></a>delete(key)</h4><p>åˆ é™¤æŸä¸ªé”®ï¼Œ åˆ é™¤æˆåŠŸè¿”å›true, å¦åˆ™è¿”å›falseã€‚</p><h3 id="Mapçš„éå†æ–¹æ³•"><a href="#Mapçš„éå†æ–¹æ³•" class="headerlink" title="Mapçš„éå†æ–¹æ³•"></a>Mapçš„éå†æ–¹æ³•</h3><p>Mapçš„éå†æ–¹æ³•æœ‰keys(), values(), entries(), forEach().<br>Map çš„éå†é¡ºåºå°±æ˜¯æ’å…¥é¡ºåºã€‚<br>ä¸forâ€¦ofå¾ªç¯ç»„åˆä½¿ç”¨å¾ˆå¥½ç”¨ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> m = <span class="keyword">new</span><span class="built_in">Map</span>([</span><br><span class="line">    [<span class="string">'name'</span>, <span class="string">'lili'</span>],</span><br><span class="line">    [<span class="string">'age'</span>, <span class="number">22</span>],</span><br><span class="line">    [<span class="string">'sex'</span>, <span class="string">'male'</span>]</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">of</span> m.keys()) &#123;</span><br><span class="line"><span class="built_in">console</span>.log(key)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> [key, value] <span class="keyword">of</span> m.entries()) &#123;</span><br><span class="line"><span class="built_in">console</span>.log(key, value)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰åŒäºä½¿ç”¨m.entries()</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [key, value] <span class="keyword">of</span> m) &#123;</span><br><span class="line"><span class="built_in">console</span>.log(key, value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>ç»“åˆæ•°ç»„çš„mapæ–¹æ³•ã€filteræ–¹æ³•ï¼Œå¯ä»¥å®ç° Map çš„éå†å’Œè¿‡æ»¤ï¼ˆMap æœ¬èº«æ²¡æœ‰mapå’Œfilteræ–¹æ³•ï¼‰ã€‚</p><h3 id="Map-è½¬æ¢ä¸ºå…¶ä»–æ•°æ®ç»“æ„"><a href="#Map-è½¬æ¢ä¸ºå…¶ä»–æ•°æ®ç»“æ„" class="headerlink" title="Map è½¬æ¢ä¸ºå…¶ä»–æ•°æ®ç»“æ„"></a>Map è½¬æ¢ä¸ºå…¶ä»–æ•°æ®ç»“æ„</h3><h4 id="Map-lt-gt-æ•°ç»„"><a href="#Map-lt-gt-æ•°ç»„" class="headerlink" title="Map&lt;==&gt;æ•°ç»„"></a>Map&lt;==&gt;æ•°ç»„</h4><p>è½¬ä¸ºæ•°ç»„ç»“æ„ï¼Œå¯ä»¥ç”¨å±•å¼€ç¬¦ï¼š<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ•°ç»„è½¬ä¸ºMap</span></span><br><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span><span class="built_in">Map</span>([</span><br><span class="line">  [<span class="number">1</span>, <span class="string">'one'</span>],</span><br><span class="line">  [<span class="number">2</span>, <span class="string">'two'</span>],</span><br><span class="line">  [<span class="number">3</span>, <span class="string">'three'</span>],</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Mapè½¬ä¸ºæ•°ç»„</span></span><br><span class="line">[...map.keys()]</span><br><span class="line"><span class="comment">// [1, 2, 3]</span></span><br><span class="line"></span><br><span class="line">[...map.values()]</span><br><span class="line"><span class="comment">// ['one', 'two', 'three']</span></span><br><span class="line"></span><br><span class="line">[...map.entries()]</span><br><span class="line"><span class="comment">// [[1,'one'], [2, 'two'], [3, 'three']]</span></span><br><span class="line"></span><br><span class="line">[...map]</span><br></pre></td></tr></table></figure></p><h3 id="Map-lt-gt-Object"><a href="#Map-lt-gt-Object" class="headerlink" title="Map&lt;==&gt;Object"></a>Map&lt;==&gt;Object</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span><span class="title">strMapToObj</span>(<span class="params">map</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> obj = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line"><span class="comment">// è¯¥æ–¹æ³•åˆ›å»ºçš„å¯¹è±¡æ²¡æœ‰åŸå‹ï¼Œ å‚æ•°ä¸ºnull</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> [k,v] <span class="keyword">of</span> map.entries()) &#123;</span><br><span class="line">        obj[k] = v;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¦‚æœMapçš„é”®ä¸ºå­—ç¬¦ä¸²å¯ä»¥æ— æŸè½¬ä¸ºå¯¹è±¡ï¼Œå¦‚æœä¸æ˜¯å­—ç¬¦ä¸²åˆ™è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åè½¬ä¸ºå¯¹è±¡ã€‚<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span><span class="title">strObjToMap</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line"><span class="keyword">let</span> map = <span class="keyword">new</span><span class="built_in">Map</span>();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> k <span class="keyword">of</span><span class="built_in">Object</span>.keys(obj)) &#123;</span><br><span class="line">        strMap.set(k, obj[k]);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="Map-lt-gt-JSON"><a href="#Map-lt-gt-JSON" class="headerlink" title="Map &lt;==&gt; JSON"></a>Map &lt;==&gt; JSON</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JSON -&gt; Map</span></span><br><span class="line"><span class="function"><span class="keyword">function</span><span class="title">JSONToMap</span>(<span class="params">str</span>)) </span>&#123;</span><br><span class="line"><span class="keyword">return</span> strObjToMap(<span class="built_in">JSON</span>.parse(str))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Map -&gt; JSON</span></span><br><span class="line"><span class="comment">//é”®åä¸ºå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="function"><span class="keyword">function</span><span class="title">strMapToJSON</span>(<span class="params">strMap</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span><span class="built_in">JSON</span>.stringify(strMapToObj(strMap))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// é”®åä¸ºéå­—ç¬¦ä¸²</span></span><br><span class="line"><span class="function"><span class="keyword">function</span><span class="title">mapToArrayJson</span>(<span class="params">map</span>) </span>&#123;</span><br><span class="line"><span class="keyword">return</span><span class="built_in">JSON</span>.stringify([...map]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content><summary type="html">
    
      &lt;p&gt;Setå’ŒMapæ˜¯ES6æ–°å¢çš„æ•°æ®ç»“æ„, Setç±»ä¼¼äºæ•°ç»„ï¼ŒMapç±»ä¼¼äºå¯¹è±¡ã€‚&lt;/p&gt;
    
    </summary><category term="å‰ç«¯" scheme="https://mhynet.cn/categories/%E5%89%8D%E7%AB%AF/"/><category term="javascript" scheme="https://mhynet.cn/tags/javascript/"/></entry><entry><title>MySQLå­¦ä¹ ç¬”è®°</title><link href="https://mhynet.cn/MySQL-notes.html"/><id>https://mhynet.cn/MySQL-notes.html</id><published>2018-03-03T03:35:30.000Z</published><updated>2020-01-13T04:05:08.194Z</updated><content type="html"><![CDATA[<p>MySQLæ•°æ®åº“å­¦ä¹ ç¬”è®°ã€‚<br>MySQLç¯å¢ƒæ­å»ºå¯æŸ¥é˜…èµ„æ–™ï¼Œæ­¤å¤„ä¸ç»†è¯´ã€‚é»˜è®¤å·²æ­å»ºå¥½MySQLç¯å¢ƒã€‚</p><a id="more"></a><h2 id="1-æˆæƒã€ç™»å½•ç›¸å…³"><a href="#1-æˆæƒã€ç™»å½•ç›¸å…³" class="headerlink" title="1.æˆæƒã€ç™»å½•ç›¸å…³"></a>1.æˆæƒã€ç™»å½•ç›¸å…³</h2><h3 id="å¯åŠ¨MySQLæœåŠ¡å¸¸ç”¨å‘½ä»¤"><a href="#å¯åŠ¨MySQLæœåŠ¡å¸¸ç”¨å‘½ä»¤" class="headerlink" title="å¯åŠ¨MySQLæœåŠ¡å¸¸ç”¨å‘½ä»¤:"></a>å¯åŠ¨MySQLæœåŠ¡å¸¸ç”¨å‘½ä»¤:</h3><ul><li>å¯åŠ¨mysqlæœåŠ¡ï¼šsudo start mysql æˆ–è€… sudo service mysql start</li><li>åœæ­¢mysqlæœåŠ¡ï¼šsudo stop mysql æˆ–è€… sudo service mysql stop</li><li>é‡å¯mysqlæœåŠ¡ï¼š sudo restart mysql æˆ–è€… sudo service mysql restart</li><li>æŸ¥çœ‹mysqlæ•°æ®åº“çš„ç‰ˆæœ¬å·ï¼šmysql -V</li><li>å¯åŠ¨mysqldæœåŠ¡: sudo /etc/init.d/mysql start</li><li>åœæ­¢mysqldæœåŠ¡: sudo /etc/init.d/mysql stop</li><li>å¯åŠ¨mysqldæœåŠ¡: sudo /etc/init.d/mysql restart</li></ul><h3 id="ä»¥rootç”¨æˆ·ç™»å½•MySQL"><a href="#ä»¥rootç”¨æˆ·ç™»å½•MySQL" class="headerlink" title="ä»¥rootç”¨æˆ·ç™»å½•MySQL"></a>ä»¥rootç”¨æˆ·ç™»å½•MySQL</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -p</span><br></pre></td></tr></table></figure><p>ç„¶åè¾“å…¥å¯†ç ï¼Œç™»å½•æˆåŠŸåè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œåˆ›å»ºä¸ªäººç”¨æˆ·ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create user mhy inentified by <span class="string">'123'</span>;</span><br></pre></td></tr></table></figure></p><p>ç”¨æˆ·åä¸º: <code>mhy</code>, å¯†ç ä¸º: <code>123</code>ã€‚</p><h3 id="æˆæƒ"><a href="#æˆæƒ" class="headerlink" title="æˆæƒ"></a>æˆæƒ</h3><p>åˆ›å»ºç”¨æˆ·åéœ€è¦è¿›è¡Œæˆæƒï¼Œ æˆæƒå‘½ä»¤æ ¼å¼:</p><p><code>grant [privilegesCode] on [dbName.tableName] to [username@host] identified by [&quot;password&quot;];</code></p><p><code>[]</code>å†…çš„é¡¹éœ€è¦æ ¹æ®è‡ªå·±çš„æƒ…å†µé€‰æ‹©ã€‚</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grant all privileges on <span class="built_in">test</span>.* to mhy@localhost identified by <span class="string">'123'</span>;</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p><strong>privilegesCode</strong>ä»£è¡¨æˆäºˆçš„æƒé™ï¼Œå¸¸ç”¨çš„æƒé™ç±»å‹æœ‰ï¼š</p><ul><li><code>all privileges</code> æ‰€æœ‰æƒé™</li><li><code>select</code> è¯»å–æƒé™</li><li><code>delete</code> åˆ é™¤æƒé™</li><li><code>update</code> æ›´æ–°æƒé™</li><li><code>create</code> åˆ›å»ºæƒé™</li><li><code>drop</code> åˆ é™¤æ•°æ®åº“ã€æ•°æ®è¡¨æƒé™</li></ul><p><strong>dbName.tableName</strong>è¡¨ç¤ºæˆäºˆæƒé™çš„æ•°æ®åº“å’Œæ•°æ®è¡¨ï¼Œå¸¸ç”¨çš„ç±»å‹æœ‰ä»¥ä¸‹å‡ ä¸ªï¼š</p><ul><li><code>.</code> æˆäºˆè¯¥æ•°æ®åº“æœåŠ¡å™¨ä¸Šæ‰€æœ‰çš„æ•°æ®åº“çš„æƒé™</li><li><code>dbName.*</code> æˆäºˆdbNameæ•°æ®åº“ä¸Šæ‰€æœ‰æ•°æ®è¡¨çš„æƒé™</li><li><code>dbName.dbTable</code> æˆäºˆdbNameæ•°æ®åº“çš„dbTableæ•°æ®è¡¨çš„æƒé™</li></ul><p><strong>username@host</strong>è¡¨ç¤ºæˆäºˆæƒé™çš„ç”¨æˆ·åŠå…è®¸è¯¥ç”¨æˆ·ç™»å½•çš„IPåœ°å€ã€‚å…¶ä¸­Hostæœ‰ä»¥ä¸‹å‡ ç§é€‰æ‹©ï¼š</p><ul><li><code>localhost</code> åªå…è®¸æœ¬åœ°ç™»å½•ï¼Œä¸å…è®¸è¿œç¨‹ç™»å½•ã€‚</li><li><code>%</code> å…è®¸åœ¨é™¤æœ¬æœºä¹‹å¤–çš„ä»»ä½•ä¸€å°æœºå™¨è¿œç¨‹ç™»å½•ã€‚</li><li><code>192.168.33.21</code> å…·ä½“çš„IPåœ°å€ï¼Œè¡¨ç¤ºå…è®¸è¯¥ç”¨æˆ·ä»ç‰¹å®šçš„IPç™»å½•ã€‚</li></ul><p><strong>password</strong><br> æŒ‡å®šè¯¥ç”¨æˆ·ç™»å½•æ—¶çš„å¯†ç ã€‚</p><p><strong>flush privileges</strong><br> è¡¨ç¤ºåˆ·æ–°æƒé™å˜æ›´ã€‚</p><p>è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯ä»¥åˆ é™¤ç”¨æˆ·ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop user zhangsan@<span class="string">'%'</span>;</span><br></pre></td></tr></table></figure></p><p>æŸ¥çœ‹ç”¨æˆ·<code>mhy</code>çš„æƒé™ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show grants <span class="keyword">for</span><span class="string">'mhy'</span>;</span><br></pre></td></tr></table></figure></p><h2 id="2-åˆ›å»ºã€ä¿®æ”¹å’Œåˆ é™¤æ•°æ®åº“-database"><a href="#2-åˆ›å»ºã€ä¿®æ”¹å’Œåˆ é™¤æ•°æ®åº“-database" class="headerlink" title="2.åˆ›å»ºã€ä¿®æ”¹å’Œåˆ é™¤æ•°æ®åº“ database"></a>2.åˆ›å»ºã€ä¿®æ”¹å’Œåˆ é™¤æ•°æ®åº“ database</h2><h3 id="åˆ›å»ºæ•°æ®è¡¨"><a href="#åˆ›å»ºæ•°æ®è¡¨" class="headerlink" title="åˆ›å»ºæ•°æ®è¡¨"></a>åˆ›å»ºæ•°æ®è¡¨</h3><p>åˆ›å»ºæ•°æ®åº“å‘½ä»¤, dbNameä¸ºæ•°æ®åº“åå­—ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database dbName;</span><br></pre></td></tr></table></figure></p><h3 id="åˆ é™¤æ•°æ®åº“ï¼š"><a href="#åˆ é™¤æ•°æ®åº“ï¼š" class="headerlink" title="åˆ é™¤æ•°æ®åº“ï¼š"></a>åˆ é™¤æ•°æ®åº“ï¼š</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop database dbName;</span><br></pre></td></tr></table></figure><h3 id="æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“ï¼š"><a href="#æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“ï¼š" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“ï¼š"></a>æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“ï¼š</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure><h3 id="ä¿®æ”¹æ•°æ®è¡¨"><a href="#ä¿®æ”¹æ•°æ®è¡¨" class="headerlink" title="ä¿®æ”¹æ•°æ®è¡¨"></a>ä¿®æ”¹æ•°æ®è¡¨</h3><p>ä¿®æ”¹æ•°æ®è¡¨æ›´å¤šçš„æ˜¯ä¿®æ”¹æ•°æ®è¡¨çš„ç»“æ„ã€‚ä½¿ç”¨<code>alter table</code>è¯­å¥ã€‚</p><ul><li><p>åˆ é™¤å­—æ®µç”¨ <code>drop</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table tableName drop å­—æ®µå;</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ å­—æ®µç”¨ <code>add</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table tableName add å­—æ®µå æ•°æ®ç±»å‹ [å¯é€‰é¡¹];</span><br></pre></td></tr></table></figure></li><li><p>ä¿®æ”¹å­—æ®µåç§°å’Œç±»å‹<br>æœ‰ä¸¤ç§æ–¹å¼ï¼š<code>modify</code>å’Œ<code>change</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table tableName modify å­—æ®µå [char(20)]</span><br></pre></td></tr></table></figure></li></ul><p>å¯é€‰é¡¹ä¸­å¯ä»¥æ˜¯æ•°æ®ç±»å‹ã€‚</p><p><code>change</code>è¯­å¥é™¤äº†é‡æ–°å®šä¹‰å­—æ®µï¼Œè¿˜å¯ä»¥é‡å‘½åå­—æ®µï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table tableName change åŸå­—æ®µå æ–°å­—æ®µå char(10);</span><br></pre></td></tr></table></figure></p><ul><li>ä¿®æ”¹æ•°æ®è¡¨å<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table tableName rename to newTableName;</span><br></pre></td></tr></table></figure></li></ul><p>è¿˜å¯ä»¥ä¿®æ”¹å­—æ®µçš„é»˜è®¤å€¼ã€‚</p><p>å¦‚æœå¼•æ“æ˜¯innodbçš„è¯ï¼Œæ•°æ®åº“åç§°ä¸èƒ½ä¿®æ”¹ï¼Œå…¶ä»–å¼•æ“çš„æ•°æ®åº“é‡å‘½åæœ‰æ•°æ®ä¸¢å¤±çš„é£é™©ï¼Œæ‰€ä»¥åœ¨åˆ›å»ºæ•°æ®åº“çš„æ—¶å€™å‘½ååˆ‡å‹¿è‰ç‡ã€‚</p><h2 id="3-åˆ›å»ºå’Œä¿®æ”¹æ•°æ®è¡¨-table"><a href="#3-åˆ›å»ºå’Œä¿®æ”¹æ•°æ®è¡¨-table" class="headerlink" title="3.åˆ›å»ºå’Œä¿®æ”¹æ•°æ®è¡¨ table"></a>3.åˆ›å»ºå’Œä¿®æ”¹æ•°æ®è¡¨ table</h2><p>åˆ›å»ºæ•°æ®è¡¨ä¹‹å‰éœ€è¦é€‰æ‹©æ•°æ®åº“ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é€‰æ‹©æ•°æ®åº“ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use dbName;</span><br></pre></td></tr></table></figure></p><p>é€‰æ‹©æ•°æ®åº“ä¹‹åå°±å¯ä»¥åˆ›å»ºæ•°æ®è¡¨äº†ï¼Œåˆ›å»ºæ•°æ®è¡¨çš„æ—¶å€™éœ€è¦å¡«å†™çš„æœ‰è¡¨åã€è¡¨çš„å­—æ®µåç§°ã€æ¯ä¸ªå­—æ®µçš„æ•°æ®ç±»å‹ï¼Œè¿˜æœ‰å…¶ä»–å¯é€‰é¡¹ä¸»é”®ï¼ˆPRIMARY KEYï¼‰ã€å¤–é”®ï¼ˆï¼‰ã€è‡ªåŠ¨å¢é•¿ï¼ˆAUTO_INCREMENTï¼‰ã€é»˜è®¤å€¼ï¼ˆDEFAULTï¼‰ã€æ˜¯å¦å…è®¸ä¸ºç©ºï¼ˆNOT NULLï¼‰ç­‰ã€‚ENGINE=InnoDBè®¾ç½®å¼•æ“ï¼Œå¼•æ“ä¸€èˆ¬ä¼šåœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ï¼Œå¦‚æœè¦å»ºçš„æ•°æ®è¡¨çš„å¼•æ“å’Œé…ç½®æ–‡ä»¶ä¸ä¸€æ ·éœ€è¦åœ¨æ­¤å¤„æŒ‡æ˜ã€‚<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table tableName (</span><br><span class="line">  å­—æ®µ1 æ•°æ®ç±»å‹ [å…¶ä»–å¯é€‰é¡¹]ï¼Œ</span><br><span class="line">  å­—æ®µ2 æ•°æ®ç±»å‹ [å…¶ä»–å¯é€‰é¡¹]ï¼Œ</span><br><span class="line">  ...</span><br><span class="line">) [ENGINE=InnoDB DEFAULT CHARSET=utf8];</span><br></pre></td></tr></table></figure></p><p><code>[]</code>å†…çš„é¡¹ä¸ºå¯é€‰é¡¹ï¼Œæœ€åé¢çš„<code>ENGING DEFAULT CHARSET</code>ä¹Ÿæ˜¯å¯é€‰é¡¹ï¼Œä¸€èˆ¬éƒ½ä¼šåœ¨é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ï¼Œä¸éœ€è¦åœ¨åˆ›å»ºè¡¨æ—¶è¿›è¡Œè®¾ç½®ã€‚<br>åˆ›å»ºæ•°æ®è¡¨çš„å…·ä½“å®ä¾‹ç¨åè®²äº†mysqlçš„æ•°æ®ç±»å‹å’Œçº¦æŸååœ¨å°†ã€‚<br>æŸ¥çœ‹æ•°æ®è¡¨ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables [from dbName];</span><br></pre></td></tr></table></figure></p><p>æŸ¥çœ‹è¡¨ç»“æ„ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show columns from tableName;</span><br></pre></td></tr></table></figure></p><p>æ•°æ®è¡¨åˆ é™¤çš„ä¸‰ç§è¯­å¥dropã€deleteå’Œtruncateçš„å¼‚åŒï¼š</p><p><strong>ç›¸åŒç‚¹</strong>ï¼š</p><ol><li>truncateå’Œdeleteåªåˆ é™¤è¡¨æ•°æ®ä¿ç•™è¡¨ç»“æ„ï¼›</li><li>truncateå’Œä¸å¸¦whereå­å¥çš„deleteï¼Œä»¥åŠdropéƒ½èƒ½åˆ é™¤è¡¨å†…çš„æ•°æ®.</li></ol><p><strong>ä¸åŒç‚¹</strong>ï¼š</p><ol><li>dropæ•´ä¸ªåˆ é™¤æ•°æ®è¡¨ï¼Œé€Ÿåº¦æœ€å¿«ï¼›</li><li>deleteåˆ é™¤æ•°æ®è¡¨ä¸­çš„æ•°æ®ï¼Œå¯ä»¥åŠ å…¥æ¡ä»¶è¯­å¥whereï¼Œéœ€è¦å…ˆæŸ¥è¯¢ç¬¦åˆæ¡ä»¶çš„æ•°æ®ç„¶ååˆ é™¤ï¼Œå¦‚æœä¸åŠ æ¡ä»¶è¯­å¥ï¼Œåˆ™æ¸…ç©ºæ‰€æœ‰æ•°æ®;</li><li>truncateæ¸…ç©ºè¡¨å†…æ•°æ®ï¼Œä½†ä¸åˆ é™¤æ•°æ®è¡¨ç»“æ„ã€‚<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ é™¤æ•°æ®è¡¨ï¼ˆç»“æ„ã€å±æ€§ã€ç´¢å¼•ï¼‰</span></span><br><span class="line">drop table tableName;</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤æŸä¸€è¡Œ</span></span><br><span class="line">delete from tableName  Where volumnName=values;</span><br><span class="line"><span class="comment"># åˆ é™¤æ‰€æœ‰æ•°æ®</span></span><br><span class="line">delete from tableNameï¼›</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line">delete * from tableName</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ¸…ç©ºæ•°æ®</span></span><br><span class="line">truncate table tableName;</span><br></pre></td></tr></table></figure></li></ol><p>å¯¹äºæœ‰ä¸»å¤–é”®å…³ç³»çš„è¡¨ï¼Œä¸èƒ½ä½¿ç”¨truncateè€Œåº”è¯¥ä½¿ç”¨ä¸å¸¦whereå­å¥çš„deleteè¯­å¥ï¼Œç”±äºtruncateä¸è®°å½•åœ¨æ—¥å¿—ä¸­ï¼Œä¸èƒ½å¤Ÿæ¿€æ´»è§¦å‘å™¨ã€‚</p><h2 id="4-SQLæ•°æ®ç±»å‹"><a href="#4-SQLæ•°æ®ç±»å‹" class="headerlink" title="4.SQLæ•°æ®ç±»å‹"></a>4.SQLæ•°æ®ç±»å‹</h2><p>SQLè¯­å¥å¸¸è§çš„æ•°æ®ç±»å‹æœ‰å­—ç¬¦ä¸²ã€æ•°å­—å’Œæ—¥æœŸä¸‰å¤§ç±»ã€‚</p><h3 id="å­—ç¬¦ä¸²ç±»å‹"><a href="#å­—ç¬¦ä¸²ç±»å‹" class="headerlink" title="å­—ç¬¦ä¸²ç±»å‹"></a>å­—ç¬¦ä¸²ç±»å‹</h3><p>CHARå’ŒVARCHARç±»å‹ç±»ä¼¼ï¼Œä½†å®ƒä»¬ä¿å­˜å’Œæ£€ç´¢çš„æ–¹å¼ä¸åŒã€‚å®ƒä»¬çš„æœ€å¤§é•¿åº¦å’Œæ˜¯å¦å°¾éƒ¨ç©ºæ ¼è¢«ä¿ç•™ç­‰æ–¹é¢ä¹Ÿä¸åŒã€‚åœ¨å­˜å‚¨æˆ–æ£€ç´¢è¿‡ç¨‹ä¸­ä¸è¿›è¡Œå¤§å°å†™è½¬æ¢ã€‚</p><p><img style="width: 70%" src="https://wicdn.xiaohongchun.com/xhc-plat/1520585223512_53Wbnarmmc.png"></p><h2 id="æ•°å€¼ç±»å‹"><a href="#æ•°å€¼ç±»å‹" class="headerlink" title="æ•°å€¼ç±»å‹"></a>æ•°å€¼ç±»å‹</h2><p><img style="width: 70%" src="https://wicdn.xiaohongchun.com/xhc-plat/1520585223512_yJtAzAQjAC.png"></p><h3 id="æ—¥æœŸæ—¶é—´ç±»å‹"><a href="#æ—¥æœŸæ—¶é—´ç±»å‹" class="headerlink" title="æ—¥æœŸæ—¶é—´ç±»å‹"></a>æ—¥æœŸæ—¶é—´ç±»å‹</h3><p><img style="width: 70%" src="https://wicdn.xiaohongchun.com/xhc-plat/1520585223509_bknXEkz6P5.png"></p><p>åˆç†é€‰ç”¨æ•°æ®ç±»å‹å¯¹äºæé«˜MySQLæ€§èƒ½å…·æœ‰éå¸¸é‡è¦çš„æ„ä¹‰ï¼Œè¿™ä¸€å—å¯ä»¥å‚è€ƒã€Šé«˜æ€§èƒ½MYSQLã€‹è¿›è¡Œå­¦ä¹ ã€‚</p><h2 id="5-çº¦æŸ"><a href="#5-çº¦æŸ" class="headerlink" title="5.çº¦æŸ"></a>5.çº¦æŸ</h2><p>çº¦æŸä¸»è¦å®Œæˆå¯¹æ•°æ®çš„æ£€éªŒå’Œé™åˆ¶ï¼Œä»è€Œä¿è¯æ•°æ®åº“çš„å®Œæ•´æ€§ã€‚å¸¸è§çš„çº¦æŸæœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>å¤–é”®çº¦æŸ(foreign key)</li><li>ä¸»é”®çº¦æŸ(primary key)</li><li>å”¯ä¸€å€¼çº¦æŸ(unique)</li><li>è‡ªå¢é•¿çº¦æŸ(auto_increment)</li><li>é»˜è®¤å€¼çº¦æŸ(default)</li><li>éç©ºçº¦æŸ(not null)</li></ul><h3 id="ä¸»é”®çº¦æŸï¼ˆprimary-key"><a href="#ä¸»é”®çº¦æŸï¼ˆprimary-key" class="headerlink" title="ä¸»é”®çº¦æŸï¼ˆprimary key)"></a>ä¸»é”®çº¦æŸï¼ˆprimary key)</h3><p>ä¸»é”®çº¦æŸåˆ—ä¸èƒ½é‡å¤ï¼Œä»»æ„ä¸¤è¡Œçš„ä¸»é”®å€¼éƒ½ä¸èƒ½ç›¸åŒï¼Œä¹Ÿä¸èƒ½ä¸ºç©ºå€¼ã€‚<br>ä¸€èˆ¬æ¯ä¸€å¼ æ•°æ®è¡¨éƒ½æœ‰ä¸€ä¸ªçº¦æŸï¼Œé€šå¸¸ä¸ºidï¼Œæœ€å¥½ä¸è¦æŠŠä¸šåŠ¡å­—æ®µè®¾ä¸ºä¸»é”®ï¼Œå› ä¸ºå¯èƒ½ä¼šæœ‰é‡å¤çš„æ•°æ®ã€‚<br>åˆ›å»ºæ•°æ®è¡¨çš„æ—¶å€™åœ¨éœ€è¦åˆ›å»ºä¸»é”®çº¦æŸçš„å­—æ®µåé¢çš„å¯é€‰é¡¹ä½ç½®åŠ å…¥ <code>primary key</code> å³å¯ã€‚<br>æ‹¥æœ‰ä¸»é”®çº¦æŸçš„è¡¨æ’å…¥æ•°æ®æ—¶ï¼Œæ‹¥æœ‰ä¸»é”®çº¦æŸçš„å­—æ®µçš„æ•°æ®é‡å¤æˆ–ä¸ºç©ºæ—¶ä¼šæŠ¥é”™ã€‚<br>å¸¸è§çš„æ“ä½œï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ•°æ®è¡¨æ—¶åŠ å…¥ä¸»é”®çš„ä¸¤ç§æ–¹æ³•</span></span><br><span class="line">create table tableName (</span><br><span class="line">  å­—æ®µå1 æ•°æ®ç±»å‹ primary key,</span><br><span class="line">  å­—æ®µå2 æ•°æ®ç±»å‹</span><br><span class="line">);</span><br><span class="line">create table tableName (</span><br><span class="line">  å­—æ®µå1 æ•°æ®ç±»å‹,</span><br><span class="line">  å­—æ®µå2 æ•°æ®ç±»å‹,</span><br><span class="line">  constraint çº¦æŸå primary key(å­—æ®µå1)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ·»åŠ ä¸»é”® åˆ—åcolumnNameå¦‚æœä¸ºå¤šä¸ªæ—¶å»ºç«‹è”åˆä¸»é”®</span></span><br><span class="line">alter table tableName add primary key(columnName);</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ é™¤ä¸»é”®çº¦æŸ</span></span><br><span class="line">alter table tableName drop primary key;</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¿®æ”¹åˆ—ä¸ºä¸»é”®</span></span><br><span class="line">alter table tableName modify å­—æ®µå æ•°æ®ç±»å‹ primary key;</span><br></pre></td></tr></table></figure></p><p><strong>è”åˆä¸»é”®</strong>:è”åˆå¤šä¸ªåˆ—å»ºç«‹è”åˆä¸»é”®ã€‚</p><h3 id="å¤–é”®çº¦æŸï¼ˆforeign-keyï¼‰"><a href="#å¤–é”®çº¦æŸï¼ˆforeign-keyï¼‰" class="headerlink" title="å¤–é”®çº¦æŸï¼ˆforeign keyï¼‰"></a>å¤–é”®çº¦æŸï¼ˆforeign keyï¼‰</h3><p>å¤–é”®çº¦æŸçš„ä½œç”¨æ˜¯å»ºç«‹ä¸¤å¼ è¡¨ä¹‹é—´çš„è”ç³»ï¼Œä¿æŒæ•°æ®çš„ä¸€è‡´æ€§ã€‚è¡¨çš„å¤–é”®å¯ä»¥æ˜¯å¦ä¸€å¼ è¡¨çš„ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•æˆ–å”¯ä¸€çº¦æŸã€‚<br>å¤–é”®å¯ä»¥æœ‰é‡å¤çš„, å¯ä»¥æ˜¯ç©ºå€¼ã€‚å®ç°ä¸€å¯¹ä¸€æˆ–ä¸€å¯¹å¤šå…³ç³»ã€‚<br>åˆ›å»ºå¤–é”®çº¦æŸå®ä¾‹ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºçˆ¶è¡¨</span></span><br><span class="line">create table fatherTable(</span><br><span class="line">  id int primary key,</span><br><span class="line">  title varchar(10)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºå­è¡¨ï¼Œå»ºç«‹å¤–é”®æœ‰ä¸¤ç§æ–¹å¼</span></span><br><span class="line"><span class="comment"># ç¬¬ä¸€ç§ï¼šæ·»åŠ å…³é”®å­—</span></span><br><span class="line">create table sonTable(</span><br><span class="line">  id int auto_increment,</span><br><span class="line">  name varchar(20),</span><br><span class="line">  constraint son_id primary key(id),</span><br><span class="line">  father_id int references fatherTable(id)</span><br><span class="line">);</span><br><span class="line"><span class="comment"># ç¬¬äºŒç§ï¼š é¢å¤–å£°æ˜ son_id ä¸ºä¸»é”®çš„åå­—ï¼Œfa_tab_idä¸ºå¤–é”®çš„åå­—</span></span><br><span class="line">create table sonTable(</span><br><span class="line">  id int auto_increment,</span><br><span class="line">  name varchar(20),</span><br><span class="line">  constraint son_id primary key(id),</span><br><span class="line">  father_id int,</span><br><span class="line">  constraint fa_tab_id foreign key(father_id) reference fatherTable(id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p><p><strong>åŠ å¤–é”®çº¦æŸçš„æ¡ä»¶</strong>ï¼š</p><ul><li>çˆ¶è¡¨å’Œå­è¡¨å¿…é¡»ä½¿ç”¨ç›¸åŒçš„å­˜å‚¨å¼•æ“ï¼Œ æ•°æ®è¡¨çš„å­˜å‚¨å¼•æ“åªèƒ½ä¸ºInnoDB,default-storage-engine-INNODB</li><li>å¤–é”®åˆ—å’Œå‚ç…§åˆ—å¿…é¡»å…·æœ‰ç›¸ä¼¼çš„æ•°æ®ç±»å‹ï¼Œæ•°å­—çš„é•¿åº¦æˆ–æ˜¯æœ‰ç¬¦å·ä½å¿…é¡»ç›¸åŒï¼Œè€Œå­—ç¬¦ çš„é•¿åº¦å¯ä»¥ä¸åŒ</li><li>å¤–é”®åˆ—å’Œå‚ç…§åˆ—å¿…é¡»åˆ›å»ºç´¢å¼•ï¼Œå¦‚æœå¤–é”®åˆ—ä¸å­˜åœ¨ç´¢å¼•çš„è¯ï¼ŒMySQLå°†è‡ªåŠ¨åˆ›å»ºç´¢å¼•ã€‚</li></ul><p>è®¾å®šå‚ç…§åˆ—:FOREIGN KEY(id) PEFERENCES provinces(id)<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤å¤–é”®çº¦æŸ</span></span><br><span class="line">alter table tableName drop foreign key å¤–é”®çº¦æŸå;</span><br><span class="line">(åˆ›å»ºå¤–é”®çš„æ–¹æ³•æ²¡æœ‰æŒ‡å®šçº¦æŸåç§°ï¼Œç³»ç»Ÿä¼šé»˜è®¤ç»™å¤–é”®çº¦æŸåˆ†é…å¤–é”®çº¦æŸåç§°ï¼Œå‘½åä¸ºstudent_ibfk_n)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¢åŠ å¤–é”®çº¦æŸ</span></span><br><span class="line">alter table tableName add foreign key åˆ—å references çˆ¶è¡¨(å¯¹åº”åˆ—å);</span><br></pre></td></tr></table></figure></p><h3 id="å”¯ä¸€çº¦æŸï¼ˆunique-keyï¼‰"><a href="#å”¯ä¸€çº¦æŸï¼ˆunique-keyï¼‰" class="headerlink" title="å”¯ä¸€çº¦æŸï¼ˆunique keyï¼‰"></a>å”¯ä¸€çº¦æŸï¼ˆunique keyï¼‰</h3><p><code>unique key</code>çš„ç”¨é€”ï¼šä¸»è¦æ˜¯ç”¨æ¥é˜²æ­¢æ•°æ®æ’å…¥çš„æ—¶å€™é‡å¤ã€‚<br>åˆ›å»ºæ•°æ®è¡¨æ—¶åœ¨å­—æ®µåé¢åŠ å…¥<code>unique key</code>å³å¯å»ºç«‹å”¯ä¸€çº¦æŸã€‚<br>ä¹Ÿå¯ä»¥å•ç‹¬è®¾ç½®ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alter table tableName modify columnName char(20) unique key;</span><br></pre></td></tr></table></figure></p><h2 id="6-æ’å…¥å’Œä¿®æ”¹è®°å½•"><a href="#6-æ’å…¥å’Œä¿®æ”¹è®°å½•" class="headerlink" title="6.æ’å…¥å’Œä¿®æ”¹è®°å½•"></a>6.æ’å…¥å’Œä¿®æ”¹è®°å½•</h2><p>å»ºç«‹å¥½æ•°æ®è¡¨ä¹‹åå°±å¯ä»¥æ’å…¥æ•°æ®äº†ã€‚</p><h3 id="æ’å…¥æ•°æ®"><a href="#æ’å…¥æ•°æ®" class="headerlink" title="æ’å…¥æ•°æ®"></a>æ’å…¥æ•°æ®</h3><p>æ’å…¥æ•°æ®ä½¿ç”¨<code>insert into</code>è¯­å¥ï¼Œå…·ä½“å¦‚ä¸‹ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into tableName (å­—æ®µ1, å­—æ®µ2, å­—æ®µ3,...å­—æ®µn) values (å€¼1, å€¼2, å€¼3, ...å€¼n);</span><br><span class="line"><span class="comment"># å¦‚æœæ•°æ®ä¸ºå­—ç¬¦ä¸²ï¼Œå¿…é¡»åŠ å¼•å·ã€‚</span></span><br></pre></td></tr></table></figure></p><p>æ³¨æ„ï¼šä»¥ä¸Šè¯­å¥æ’å…¥æ•°æ®çš„æ—¶å€™å¿…é¡»è¦ä¿è¯ä¸€è‡´æ€§ï¼Œå³å‰åå¿…é¡»ä¸€ä¸€å¯¹åº”ã€‚<br>è¿˜æœ‰ä¸€ç§æ–¹å¼ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into tableName (å­—æ®µ1=å€¼1, å­—æ®µ2=å€¼2, ...);</span><br></pre></td></tr></table></figure></p><h3 id="ä¿®æ”¹æ•°æ®"><a href="#ä¿®æ”¹æ•°æ®" class="headerlink" title="ä¿®æ”¹æ•°æ®"></a>ä¿®æ”¹æ•°æ®</h3><p>update setå‘½ä»¤ç”¨æ¥ä¿®æ”¹è¡¨ä¸­çš„æ•°æ®ã€‚<br>update setå‘½ä»¤æ ¼å¼ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update tableName <span class="built_in">set</span> å­—æ®µ=æ–°å€¼, ... <span class="built_in">where</span> æ¡ä»¶;</span><br></pre></td></tr></table></figure></p><h2 id="7-æŸ¥è¯¢"><a href="#7-æŸ¥è¯¢" class="headerlink" title="7.æŸ¥è¯¢"></a>7.æŸ¥è¯¢</h2><p>æ•°æ®æŸ¥è¯¢ä½¿ç”¨<code>select</code>è¯­å¥ã€‚<br><code>select æŸ¥è¯¢é¡¹ from tableName [where æ¡ä»¶]</code></p>]]></content><summary type="html">
    
      MySQLæ•°æ®åº“åˆçº§åº”ç”¨æŒ‡å—ã€‚
    
    </summary><category term="æ•°æ®åº“" scheme="https://mhynet.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/><category term="mysql" scheme="https://mhynet.cn/tags/mysql/"/><category term="æ•°æ®åº“" scheme="https://mhynet.cn/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/></entry></feed>
